<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸš€ Ron's AI Career Coach - Your Personal AI-Powered Career Development Assistant</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script>
        // Configure PDF.js worker
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    </script>
    <style>
        /* Reset and Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #f8fafc;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 25%, #334155 50%, #1e293b 75%, #0f172a 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Premium Dark Theme with Glassmorphism */
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 25%, #334155 50%, #1e293b 75%, #0f172a 100%);
            color: #f8fafc;
        }

        .container {
            max-width: var(--max-width);
            margin: 0 auto;
            padding: 0 var(--spacing-md);
        }

        /* Premium Dark Theme for All Containers */
        .analysis-container, .chat-container, .insight-card, .settings-section, .pricing-card, 
        .generation-header, .cover-letter-header, .career-planning-container, .job-search-container,
        .search-form, .pricing-container, .insights-container, .analysis-header, .generation-header,
        .cover-letter-header, .career-planning-container, .job-search-container, .pricing-container,
        .insights-container, .settings-container, .chat-header, .jd-input-container, .analysis-options,
        .option-group, .depth-options, .industry-options, .resume-source-options, .job-details-container,
        .details-grid, .input-group, .planning-form, .career-plan, .plan-content, .plan-actions,
        .insights-grid, .insights-actions, .pricing-grid, .search-form, .job-results, .job-list,
        .main-content, .tab-content, .tab-content.active {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            color: #f8fafc;
            border-color: var(--border-primary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
        }

        /* Dark theme for main content area */
        .main-content {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            color: #f8fafc;
            border: 1px solid var(--border-primary);
        }

        /* Premium Dark Theme for All Step Containers */
        .analysis-step, .generation-step, .cover-letter-step {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            color: #f8fafc;
            border-color: var(--border-primary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
        }

        /* Premium Dark Theme for All Option Groups */
        .option-group, .source-option, .source-card {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            color: #f8fafc;
            border-color: var(--border-primary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
        }

        /* Premium Analysis Options Styling */
        .analysis-options, .depth-options, .industry-options, .resume-source-options {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-md);
            box-shadow: var(--shadow-lg);
        }

        .option-group h4 {
            color: var(--primary-light);
            font-weight: 600;
            margin-bottom: var(--spacing-sm);
        }

        .industry-btn, .depth-btn {
            background: var(--bg-glass-light);
            border: 1px solid var(--border-secondary);
            color: #cbd5e1;
            border-radius: var(--radius);
            padding: var(--spacing-sm) var(--spacing-md);
            margin: var(--spacing-xs);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .industry-btn:hover, .depth-btn:hover {
            background: var(--bg-glass);
            border-color: var(--primary);
            color: var(--primary-light);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .industry-btn.selected, .depth-btn.selected {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            box-shadow: var(--shadow-lg);
        }

        /* Premium Dark Theme for All Form Elements */
        .form-input, .form-textarea, .job-description-input, .chat-input, .form-select,
        .upload-area, .jd-input-container {
            background: var(--bg-glass);
            border-color: var(--border-primary);
            color: #f8fafc;
            border-radius: var(--radius-lg);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .form-input:focus, .form-textarea:focus, .job-description-input:focus, .chat-input:focus,
        .form-select:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            outline: none;
            background: var(--bg-glass-light);
        }

        .form-input:hover, .form-textarea:hover, .job-description-input:hover, .chat-input:hover,
        .form-select:hover {
            border-color: var(--primary-light);
            background: var(--bg-glass-light);
        }

        /* Premium Dark Theme for All Buttons */
        .step-btn, .action-btn, .generate-btn, .jd-action-btn, .search-jobs-btn, .pricing-btn, .refresh-btn, .preferences-btn {
            background: var(--bg-glass);
            color: #cbd5e1;
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-sm) var(--spacing-md);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            font-weight: 600;
        }

        .step-btn.primary, .action-btn.primary, .generate-btn, .jd-action-btn, .search-jobs-btn, .pricing-btn {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border-color: var(--primary);
            box-shadow: var(--shadow-lg);
        }

        .step-btn:hover, .action-btn:hover, .generate-btn:hover, .jd-action-btn:hover, .search-jobs-btn:hover,
        .pricing-btn:hover, .refresh-btn:hover, .preferences-btn:hover {
            background: var(--bg-glass-light);
            color: var(--primary-light);
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .step-btn.primary:hover, .action-btn.primary:hover, .generate-btn:hover, .jd-action-btn:hover, 
        .search-jobs-btn:hover, .pricing-btn:hover {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
            transform: translateY(-3px);
            box-shadow: var(--shadow-2xl);
        }

        /* Premium Content Tabs */
        .content-tabs {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            border-radius: var(--radius-lg);
            padding: 6px;
            border: 1px solid var(--border-primary);
            box-shadow: var(--shadow-xl);
        }

        /* Premium Dark Theme for All Text Elements */
        label, h2, h3, h4, p, .step-title, .step-description {
            color: #f8fafc;
        }

        /* Premium Dark Theme for Form Elements */
        .form-input, .form-textarea, .form-select, .job-description-input {
            background: var(--bg-glass);
            border: 1px solid var(--border-primary);
            color: #f8fafc;
            border-radius: var(--radius-lg);
            padding: var(--spacing-sm) var(--spacing-md);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .form-input:focus, .form-textarea:focus, .form-select:focus, .job-description-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            outline: none;
        }

        .form-input:hover, .form-textarea:hover, .form-select:hover, .job-description-input:hover {
            border-color: var(--primary-light);
            background: var(--bg-glass-light);
        }

        /* Premium Dark Theme for File Info and Upload Areas */
        .file-info, .file-details {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            color: #f8fafc;
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-md);
            box-shadow: var(--shadow-lg);
        }

        /* Premium Dark Theme for Progress and Loading Elements */
        .loading, .progress-steps, .progress-step {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            color: #f8fafc;
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
        }

        /* Premium Dark Theme for Results Container */
        .results-container, .generated-resume, .generated-cover-letter {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            color: #f8fafc;
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
        }

        /* Premium Dark Theme for Step Indicators */
        .step-indicator, .step-title {
            color: #f8fafc;
        }

        .step-number {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            box-shadow: var(--shadow-lg);
        }

        /* Premium Dark Theme for Source Cards */
        .source-card {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-md);
            box-shadow: var(--shadow-lg);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .source-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-2xl);
            border-color: var(--primary);
        }

        .source-card h4 {
            color: var(--primary-light);
            font-weight: 600;
        }

        .source-card p {
            color: #cbd5e1;
            line-height: 1.6;
        }

        /* Dark theme for file upload areas */
        .upload-area {
            background: #374151;
            border: 2px dashed #6b7280;
            color: #f1f5f9;
        }

        .upload-area:hover {
            border-color: #3b82f6;
            background: #4b5563;
        }

        /* Dark theme for progress steps */
        .progress-step {
            background: #374151;
            border: 1px solid #6b7280;
        }

        .progress-step.active {
            background: #3b82f6;
            color: white;
        }

        /* Premium Dark Theme for Content Preview */
        .content-preview {
            background: var(--bg-glass-light);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-secondary);
            border-radius: var(--radius-lg);
            color: #f8fafc;
            padding: var(--spacing-md);
            margin: var(--spacing-md) 0;
        }

        /* Premium Dark Theme for Action Buttons Container */
        .content-actions {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            border-top: 1px solid var(--border-primary);
            border-radius: 0 0 var(--radius-lg) var(--radius-lg);
            padding: var(--spacing-md);
            display: flex;
            gap: var(--spacing-sm);
            flex-wrap: wrap;
        }

        /* Premium Design System */
        :root {
            --max-width: 1200px;
            --radius: 16px;
            --radius-lg: 24px;
            --radius-xl: 32px;
            
            /* Premium Shadows */
            --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            
            /* Premium Spacing */
            --spacing-xs: 0.75rem;
            --spacing-sm: 1.25rem;
            --spacing-md: 2rem;
            --spacing-lg: 3rem;
            --spacing-xl: 4rem;
            --spacing-2xl: 6rem;
            
            /* Premium Colors */
            --primary: #3b82f6;
            --primary-dark: #1d4ed8;
            --primary-light: #60a5fa;
            --accent: #06b6d4;
            --accent-dark: #0891b2;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            
            /* Premium Backgrounds */
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --bg-glass: rgba(30, 41, 59, 0.8);
            --bg-glass-light: rgba(51, 65, 85, 0.6);
            
            /* Premium Borders */
            --border-primary: rgba(148, 163, 184, 0.2);
            --border-secondary: rgba(148, 163, 184, 0.1);
            --border-accent: rgba(59, 130, 246, 0.3);
        }

        .container {
            max-width: var(--max-width);
            margin: 0 auto;
            padding: 0 var(--spacing-md);
        }

        /* Premium Header with Glassmorphism */
        .header {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            border-bottom: 1px solid var(--border-primary);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-xl);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: calc(var(--spacing-sm) / 2) 0;
        }

        /* Premium Logo */
        .logo {
            font-size: 1.25rem;
            font-weight: 600;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-decoration: none;
            letter-spacing: -0.025em;
        }

        /* Premium Typography Hierarchy */
        h1, h2, .analysis-header h2, .generation-header h2, .cover-letter-header h2,
        .chat-header h2, .career-planning-container h2, .job-search-container h2,
        .pricing-container h2, .insights-container h2, .settings-container h2 {
            color: var(--primary) !important;
            font-weight: 700;
            letter-spacing: -0.025em;
            line-height: 1.2;
        }

        h3 {
            color: var(--primary-light) !important;
            font-weight: 600;
            letter-spacing: -0.02em;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .user-name {
            color: #6b7280;
            font-weight: 500;
        }

        .header-settings {
            position: relative;
        }

        .header-settings-btn {
            background: none;
            border: none;
            color: #6b7280;
            cursor: pointer;
            padding: var(--spacing-sm);
            border-radius: var(--radius);
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .header-settings-btn:hover {
            background: #f3f4f6;
            color: #374151;
        }

        .settings-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            min-width: 200px;
            z-index: 1000;
            display: none;
            margin-top: var(--spacing-sm);
        }

        .settings-dropdown.show {
            display: block;
        }

        .dropdown-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm) var(--spacing-md);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-bottom: 1px solid var(--border-primary);
            color: #f8fafc;
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .dropdown-item:hover {
            background: var(--bg-glass-light);
            color: var(--primary-light);
        }

        .dropdown-item svg {
            color: #94a3b8;
        }

        .user-actions {
            display: flex;
            gap: var(--spacing-sm);
        }

        .user-action {
            color: #94a3b8;
            text-decoration: none;
            font-size: 0.875rem;
            transition: color 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .user-action:hover {
            color: var(--primary-light);
        }

        /* Premium Motivation Section */
        .motivation-section {
            padding: calc(var(--spacing-xs) / 4) 0;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 50%, var(--bg-primary) 100%);
            margin-bottom: var(--spacing-xs);
        }

        .motivation-section .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 var(--spacing-md);
        }

        .motivation-card {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            border-radius: var(--radius-md);
            padding: calc(var(--spacing-xs) / 2);
            text-align: center;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border-primary);
            position: relative;
            overflow: hidden;
            max-width: 800px;
            margin: 0 auto;
            min-height: auto;
        }

        .motivation-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
        }

        .motivation-text {
            color: #f9fafb;
            font-size: 0.875rem;
            line-height: 1.4;
            display: block;
            text-align: center;
        }

        .motivation-text strong {
            color: #60a5fa;
            font-weight: 600;
        }

        /* Chat Interface */
        .chat-container {
            background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
            border-radius: var(--radius-lg);
            padding: var(--spacing-md);
            box-shadow: var(--shadow-lg);
            max-width: 100%;
            margin: 0 auto;
            position: relative;
            backdrop-filter: blur(10px);
        }

        /* Dark Theme Support */
        .theme-dark .chat-container {
            background: #1f2937;
            color: #f9fafb;
        }

        .theme-dark .chat-header h2 {
            color: #f9fafb;
        }

        .theme-dark .chat-header p {
            color: #d1d5db;
        }

        .theme-dark .chat-messages {
            background: #374151;
        }

        .theme-dark .message-content {
            background: #4b5563;
            color: #f9fafb;
        }

        .theme-dark .user-message .message-content {
            background: #2563eb;
            color: white;
        }

        .theme-dark .chat-input {
            background: #374151;
            border-color: #6b7280;
            color: #f9fafb;
        }

        .theme-dark .chat-input:focus {
            border-color: #3b82f6;
        }

        .theme-dark .voice-btn {
            background: #4b5563;
            color: #d1d5db;
        }

        .theme-dark .voice-btn:hover {
            background: #6b7280;
            color: #f9fafb;
        }

        .chat-header {
            text-align: center;
            margin-bottom: var(--spacing-xs);
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            border-radius: var(--radius-md);
            padding: calc(var(--spacing-sm) / 2);
            box-shadow: var(--shadow-md);
            position: relative;
            z-index: 10;
        }

        .chat-header h2 {
            color: var(--primary);
            margin-bottom: calc(var(--spacing-xs) / 2);
            font-weight: 600;
            font-size: 1rem;
        }

        .chat-header p {
            color: #cbd5e1;
            font-size: 0.75rem;
            margin: 0;
        }



        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: var(--spacing-sm);
            background: #374151;
            border-radius: var(--radius);
            margin-bottom: 0;
            min-height: 250px;
            max-height: 270px;
            display: block;
            visibility: visible;
            opacity: 1;
        }

        .chat-messages::-webkit-scrollbar {
            width: 8px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: var(--bg-glass);
            border-radius: 4px;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }

        .chat-messages::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }

        .message {
            margin-bottom: var(--spacing-md);
            display: flex;
            animation: fadeIn 0.3s ease-out;
        }

        .message-content {
            background: var(--bg-glass);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            border: 1px solid var(--border-secondary);
            box-shadow: var(--shadow-md);
            max-width: 80%;
            word-wrap: break-word;
            line-height: 1.6;
            backdrop-filter: blur(20px) saturate(180%);
        }

        .message.user-message {
            justify-content: flex-end;
        }

        .message.ai-message {
            justify-content: flex-start;
        }

        .user-message .message-content {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            color: white;
            margin-left: auto;
        }

        .ai-message .message-content {
            background: linear-gradient(135deg, var(--bg-glass) 0%, var(--bg-glass-light) 100%);
            color: #f8fafc;
            margin-right: auto;
            border: 1px solid var(--border-secondary);
            box-shadow: var(--shadow-lg);
            backdrop-filter: blur(20px) saturate(180%);
        }



        .message-content ul {
            margin: var(--spacing-md) 0;
            padding-left: var(--spacing-lg);
        }

        .message-content li {
            margin-bottom: var(--spacing-sm);
            color: #e2e8f0;
            font-weight: 500;
        }

        .chat-input-container {
            background: linear-gradient(135deg, var(--bg-glass) 0%, var(--bg-glass-light) 100%);
            border-radius: var(--radius-md);
            padding: var(--spacing-sm);
            position: relative;
            z-index: 100;
            box-shadow: var(--shadow-sm);
            height: 60px;
            flex-shrink: 0;
            display: flex;
            visibility: visible;
            opacity: 1;
            margin-top: auto;
            border-top: 1px solid var(--border-secondary);
            backdrop-filter: blur(20px) saturate(180%);
        }

        /* Job Description Analysis Styling */
        .jd-analysis {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-md);
            margin-top: var(--spacing-sm);
            box-shadow: var(--shadow-lg);
        }

        .jd-analysis h4 {
            color: var(--primary);
            margin-bottom: var(--spacing-sm);
            font-size: 1rem;
            font-weight: 600;
        }

        .analysis-content {
            color: #f8fafc;
        }

        .analysis-content ul {
            margin: var(--spacing-sm) 0;
            padding-left: var(--spacing-md);
        }

        .analysis-content li {
            margin-bottom: calc(var(--spacing-xs) / 2);
            color: #e2e8f0;
        }

        .analysis-content p {
            margin-bottom: var(--spacing-xs);
            line-height: 1.5;
        }

        /* Premium Dark Theme for Remaining Elements */
        .job-item, .activity-stats, .action-items {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-md);
            box-shadow: var(--shadow-lg);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .job-item:hover, .activity-stats:hover, .action-items:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-xl);
            border-color: var(--primary);
        }

        /* Premium Job Item Styling */
        .job-item {
            margin-bottom: var(--spacing-md);
            position: relative;
            overflow: hidden;
        }

        /* Job Description Upload Styling */
        .job-description-upload {
            margin-top: var(--spacing-md);
            padding: var(--spacing-md);
            background: var(--bg-glass-light);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-secondary);
        }

        .upload-hint {
            color: #94a3b8;
            font-size: 0.875rem;
            margin-bottom: var(--spacing-sm);
        }

        .jd-upload-container {
            position: relative;
        }

        .jd-file-input {
            display: none;
        }

        .jd-upload-label {
            cursor: pointer;
            display: block;
        }

        .jd-upload-area {
            border: 2px dashed var(--border-accent);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            text-align: center;
            background: var(--bg-glass);
            backdrop-filter: blur(10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }

        .jd-upload-area:hover {
            border-color: var(--primary);
            background: var(--bg-glass-light);
            transform: translateY(-2px);
        }

        .upload-icon {
            font-size: 2rem;
            margin-bottom: var(--spacing-sm);
            color: var(--primary);
        }

        .jd-file-info {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: var(--bg-glass);
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--radius);
            margin-top: var(--spacing-sm);
            border: 1px solid var(--border-primary);
        }

        .file-name {
            color: #cbd5e1;
            font-weight: 500;
        }

        .remove-file-btn {
            background: var(--error);
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            transition: all 0.2s;
        }

        .remove-file-btn:hover {
            background: #dc2626;
            transform: scale(1.1);
        }

        .job-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .job-item:hover::before {
            opacity: 1;
        }

        .job-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-sm);
        }

        .job-header h4 {
            color: var(--primary-light);
            font-weight: 600;
            margin: 0;
        }

        .job-posted {
            color: #94a3b8;
            font-size: 0.875rem;
            background: var(--bg-glass-light);
            padding: 0.25rem 0.5rem;
            border-radius: var(--radius);
            border: 1px solid var(--border-secondary);
        }

        .job-details {
            margin-bottom: var(--spacing-md);
        }

        .job-details p {
            margin-bottom: var(--spacing-xs);
            color: #cbd5e1;
        }

        .job-salary {
            color: var(--success) !important;
            font-weight: 600;
        }

        .job-description {
            color: #94a3b8;
            line-height: 1.6;
        }

        .job-actions {
            display: flex;
            gap: var(--spacing-sm);
            flex-wrap: wrap;
        }

        /* Premium Chat Container Styling */
        .chat-container {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-sm);
            box-shadow: var(--shadow-2xl);
        }

        .chat-interface {
            display: flex;
            flex-direction: column;
            height: 350px;
            min-height: 350px;
            position: relative;
            overflow: hidden;
            background: var(--bg-glass-light);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-secondary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-sm);
        }

        /* Premium Chat Interface Styling */
        .chat-messages {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-lg);
        }

        .message-content {
            background: var(--bg-glass-light);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-secondary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
        }

        .user-message .message-content {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
        }

        .ai-message .message-content {
            background: var(--bg-glass);
            color: #f8fafc;
            border: 1px solid var(--border-primary);
        }

        /* Ensure AI chat messages are visible */
        .message-content {
            color: #f8fafc !important;
            background: var(--bg-glass) !important;
        }

        .ai-message .message-content {
            background: var(--bg-glass) !important;
            color: #f8fafc !important;
        }

        .user-message .message-content {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%) !important;
            color: white !important;
        }

        .chat-input {
            background: var(--bg-glass);
            border: 1px solid var(--border-primary);
            color: #f8fafc;
            border-radius: var(--radius-lg);
        }

        .voice-btn {
            background: var(--bg-glass);
            border: 1px solid var(--border-primary);
            color: #cbd5e1;
            border-radius: var(--radius-lg);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .voice-btn:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .input-group {
            display: flex;
            gap: var(--spacing-xs);
            align-items: center;
            background: var(--bg-glass);
            border-radius: var(--radius-md);
            padding: var(--spacing-xs);
            box-shadow: var(--shadow-sm);
            position: relative;
            visibility: visible;
            opacity: 1;
            width: 100%;
            height: 100%;
            backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid var(--border-secondary);
        }

        .chat-input {
            flex: 1;
            border: none;
            border-radius: var(--radius-md);
            padding: var(--spacing-xs);
            font-family: inherit;
            font-size: 14px;
            resize: none;
            min-height: 32px;
            max-height: 48px;
            background: var(--bg-glass);
            color: #f8fafc;
            transition: all 0.3s ease;
            position: relative;
            visibility: visible;
            opacity: 1;
            z-index: 100;
            backdrop-filter: blur(20px) saturate(180%);
        }

        .chat-input:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.2);
            background: var(--bg-glass-light);
            transform: scale(1.01);
        }

        .chat-actions {
            display: flex;
            gap: var(--spacing-xs);
            align-items: center;
            flex-shrink: 0;
            position: relative;
            visibility: visible;
            opacity: 1;
        }

        .voice-btn, .send-btn {
            padding: var(--spacing-xs);
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 36px;
            min-height: 36px;
            box-shadow: var(--shadow-sm);
            position: relative;
            visibility: visible;
            opacity: 1;
            z-index: 100;
            backdrop-filter: blur(20px) saturate(180%);
        }

        .voice-btn {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
        }

        .voice-btn:hover {
            background: linear-gradient(135deg, #1d4ed8 0%, #3b82f6 100%);
            color: white;
            transform: translateY(-1px);
            box-shadow: var(--shadow-lg);
        }

        .stop-speak-btn {
            background: #dc2626;
            color: white;
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
            transition: all 0.2s;
            display: none;
            align-items: center;
            justify-content: center;
        }

        .stop-speak-btn:hover {
            background: #b91c1c;
        }

        .theme-dark .stop-speak-btn {
            background: #dc2626;
            color: white;
        }

        .theme-dark .stop-speak-btn:hover {
            background: #b91c1c;
        }

        .send-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }

        .send-btn:hover {
            background: linear-gradient(135deg, #059669 0%, #10b981 100%);
            color: white;
            transform: translateY(-1px);
            box-shadow: var(--shadow-lg);
        }

        /* Job Search Styles */
        .job-search-container {
            display: grid;
            gap: var(--spacing-lg);
        }

        .search-form {
            background: #374151;
            padding: var(--spacing-lg);
            border-radius: var(--radius);
            border: 1px solid #6b7280;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }

        .search-jobs-btn {
            background: #2563eb;
            color: white;
            border: none;
            padding: var(--spacing-md) var(--spacing-lg);
            border-radius: var(--radius);
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }

        .search-jobs-btn:hover {
            background: #1d4ed8;
        }

        /* Pricing Styles */
        .pricing-container {
            padding: var(--spacing-lg) 0;
        }

        .pricing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--spacing-lg);
        }

        .pricing-card {
            background: #1f2937;
            border: 1px solid #374151;
            border-radius: var(--radius);
            padding: var(--spacing-lg);
            text-align: center;
            transition: all 0.3s;
        }

        .pricing-card.featured {
            border-color: #2563eb;
            box-shadow: var(--shadow-lg);
            transform: scale(1.05);
        }

        .pricing-card h3 {
            color: #1f2937;
            margin-bottom: var(--spacing-sm);
        }

        .price {
            font-size: 2rem;
            font-weight: 700;
            color: #2563eb;
            margin-bottom: var(--spacing-md);
        }

        .pricing-card ul {
            list-style: none;
            margin-bottom: var(--spacing-lg);
        }

        .pricing-card li {
            padding: 0.5rem 0;
            color: #6b7280;
        }

        .pricing-btn {
            background: #2563eb;
            color: white;
            border: none;
            padding: var(--spacing-md) var(--spacing-lg);
            border-radius: var(--radius);
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }

        .pricing-btn:hover {
            background: #1d4ed8;
        }

        /* Insights Styles */
        .insights-container {
            padding: var(--spacing-lg) 0;
        }

        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
        }

        .insight-card {
            background: #1f2937;
            border: 1px solid #374151;
            border-radius: var(--radius);
            padding: var(--spacing-lg);
        }

        .insight-card h3 {
            color: #1f2937;
            margin-bottom: var(--spacing-md);
        }

        .activity-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-md);
        }

        .stat {
            text-align: center;
            padding: var(--spacing-sm);
            background: #374151;
            border-radius: var(--radius);
            border: 1px solid #6b7280;
        }

        .stat-number {
            display: block;
            font-size: 1.5rem;
            font-weight: 700;
            color: #2563eb;
        }

        .stat-label {
            font-size: 0.875rem;
            color: #6b7280;
        }

        .progress-score {
            text-align: center;
        }

        .score-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .recommendations, .career-tips {
            list-style: none;
        }

        .recommendations li, .career-tips li {
            padding: 0.5rem 0;
            color: #6b7280;
        }

        .feature-usage {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
        }

        .usage-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .usage-bar {
            flex: 1;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
        }

        .usage-fill {
            height: 100%;
            background: #2563eb;
            transition: width 0.3s;
        }

        .insights-actions {
            display: flex;
            gap: var(--spacing-md);
            justify-content: center;
        }

        .refresh-btn, .preferences-btn {
            background: #2563eb;
            color: white;
            border: none;
            padding: var(--spacing-md) var(--spacing-lg);
            border-radius: var(--radius);
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }

        .refresh-btn:hover, .preferences-btn:hover {
            background: #1d4ed8;
        }

        /* Job Item Styles */
        .job-item {
            background: #1f2937;
            border: 1px solid #374151;
            border-radius: var(--radius);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-md);
        }

        .job-item h4 {
            color: #1f2937;
            margin-bottom: var(--spacing-sm);
        }

        .job-item p {
            color: #6b7280;
            margin-bottom: 0.5rem;
        }

        .apply-btn {
            background: #2563eb;
            color: white;
            border: none;
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--radius);
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }

        .apply-btn:hover {
            background: #1d4ed8;
        }

        /* Career Plan Styles */
        .timeline {
            margin: var(--spacing-lg) 0;
        }

        .timeline-item {
            border-left: 3px solid #2563eb;
            padding-left: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
            position: relative;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -8px;
            top: 0;
            width: 13px;
            height: 13px;
            background: #2563eb;
            border-radius: 50%;
        }

        .timeline-item h5 {
            color: #1f2937;
            margin-bottom: var(--spacing-sm);
        }

        .action-items {
            background: #374151;
            padding: var(--spacing-lg);
            border-radius: var(--radius);
            margin-top: var(--spacing-lg);
            border: 1px solid #6b7280;
        }

        .action-items h5 {
            color: #1f2937;
            margin-bottom: var(--spacing-md);
        }

        .action-items ul {
            list-style: none;
        }

        .action-items li {
            padding: 0.5rem 0;
            color: #6b7280;
        }

        .action-items li::before {
            content: 'âœ“';
            color: #2563eb;
            font-weight: bold;
            margin-right: var(--spacing-sm);
        }

        /* Settings Styles */
        .settings-container {
            padding: var(--spacing-lg) 0;
            background: #1f2937;
        }

        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
        }

        .settings-section {
            background: #1f2937;
            border: 1px solid #374151;
            border-radius: var(--radius);
            padding: var(--spacing-lg);
        }

        .settings-section h3 {
            color: #1f2937;
            margin-bottom: var(--spacing-md);
            border-bottom: 2px solid #f3f4f6;
            padding-bottom: var(--spacing-sm);
        }

        .setting-item {
            margin-bottom: var(--spacing-md);
        }

        .setting-item label {
            display: block;
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.5rem;
        }

        .setting-item select,
        .setting-item input[type="text"],
        .setting-item input[type="email"] {
            width: 100%;
            padding: var(--spacing-sm);
            border: 1px solid #d1d5db;
            border-radius: var(--radius);
            font-size: 0.875rem;
        }

        .setting-item select:focus,
        .setting-item input:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .checkbox-label {
            display: flex !important;
            align-items: center;
            gap: var(--spacing-sm);
            cursor: pointer;
        }

        .checkbox-label input[type="checkbox"] {
            width: auto;
            margin: 0;
        }

        .settings-btn {
            background: #f3f4f6;
            color: #374151;
            border: 1px solid #d1d5db;
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--radius);
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
            width: 100%;
            text-align: left;
        }

        .settings-btn:hover {
            background: #e5e7eb;
            color: #1f2937;
        }

        .settings-btn.danger {
            background: #fef2f2;
            color: #dc2626;
            border-color: #fecaca;
        }

        .settings-btn.danger:hover {
            background: #fee2e2;
            color: #b91c1c;
        }

        .settings-actions {
            display: flex;
            gap: var(--spacing-md);
            justify-content: center;
            padding-top: var(--spacing-lg);
            border-top: 1px solid #e5e7eb;
        }

        .save-settings-btn, .reset-settings-btn {
            background: #2563eb;
            color: white;
            border: none;
            padding: var(--spacing-md) var(--spacing-lg);
            border-radius: var(--radius);
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }

        .save-settings-btn:hover {
            background: #1d4ed8;
        }

        .reset-settings-btn {
            background: #6b7280;
        }

        .reset-settings-btn:hover {
            background: #4b5563;
        }

        .nav {
            display: flex;
            gap: var(--spacing-lg);
            align-items: center;
        }

        .nav-link {
            color: #6b7280;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s;
        }

        .nav-link:hover {
            color: #2563eb;
        }

        .cta-button {
            background: #2563eb;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.2s;
        }

        .cta-button:hover {
            background: #1d4ed8;
            transform: translateY(-1px);
            box-shadow: var(--shadow-lg);
        }

        /* Hero Section */
        .hero {
            display: none;
            padding: var(--spacing-2xl) 0;
            text-align: center;
        }

        .hero h1 {
            font-size: 3.5rem;
            font-weight: 800;
            line-height: 1.1;
            margin-bottom: var(--spacing-lg);
            background: linear-gradient(135deg, #1e293b 0%, #475569 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-subtitle {
            font-size: 1.25rem;
            color: #64748b;
            margin-bottom: var(--spacing-xl);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .hero-cta {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            color: white;
            padding: 1rem 2rem;
            border-radius: var(--radius);
            text-decoration: none;
            font-weight: 600;
            font-size: 1.125rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s;
            box-shadow: var(--shadow-xl);
        }

        .hero-cta:hover {
            transform: translateY(-2px);
            box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25);
        }

        .hero-cta-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .hero-cta-subtitle {
            font-size: 0.875rem;
            color: #6b7280;
            text-align: center;
        }

        .upload-icon {
            width: 20px;
            height: 20px;
        }

        /* Scorecard Preview */
        .scorecard-preview {
            display: none;
            background: white;
            border-radius: var(--radius);
            padding: var(--spacing-lg);
            margin: var(--spacing-xl) auto;
            max-width: 500px;
            box-shadow: var(--shadow-xl);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .score-header {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }

        .score-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .score-details h3 {
            font-size: 1.25rem;
            margin-bottom: 0.25rem;
        }

        .score-details p {
            color: #6b7280;
            font-size: 0.875rem;
        }

        .score-breakdown {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-sm);
        }

        .score-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid #f3f4f6;
        }

        .score-item:last-child {
            border-bottom: none;
        }

        /* Features */
        .features {
            display: none;
            padding: var(--spacing-2xl) 0;
            background: white;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-lg);
            margin-top: var(--spacing-xl);
        }

        .feature-card {
            background: white;
            padding: var(--spacing-lg);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: all 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-xl);
        }

        .feature-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: var(--spacing-md);
        }

        .feature-icon svg {
            width: 24px;
            height: 24px;
            color: white;
        }

        .feature-card h3 {
            font-size: 1.25rem;
            margin-bottom: var(--spacing-sm);
            color: #1f2937;
        }

        .feature-card p {
            color: #6b7280;
            line-height: 1.6;
        }

        /* 3-Step Funnel */
        .funnel {
            display: none;
            padding: var(--spacing-2xl) 0;
            background: #f8fafc;
        }

        .funnel-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-lg);
            margin-top: var(--spacing-xl);
        }

        .step {
            background: white;
            padding: var(--spacing-lg);
            border-radius: var(--radius);
            text-align: center;
            box-shadow: var(--shadow);
            position: relative;
        }

        .step-number {
            width: 40px;
            height: 40px;
            background: #2563eb;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin: 0 auto var(--spacing-md);
        }

        .step h3 {
            margin-bottom: var(--spacing-sm);
            color: #1f2937;
        }

        .step p {
            color: #6b7280;
            font-size: 0.875rem;
        }

        /* Social Proof */
        .social-proof {
            padding: var(--spacing-xl) 0;
            background: white;
            border-top: 1px solid #e5e7eb;
        }

        .logos {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: var(--spacing-xl);
            flex-wrap: wrap;
            opacity: 0.6;
        }

        .logo-item {
            font-size: 1.25rem;
            font-weight: 600;
            color: #6b7280;
        }

        /* Premium Main Content Area */
        .main-content {
            display: block;
            padding: var(--spacing-lg);
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            margin: var(--spacing-md);
        }

        /* Premium Tab Content Styling */
        .tab-content {
            display: none;
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            border-radius: var(--radius-lg);
            padding: var(--spacing-md);
            margin-top: var(--spacing-sm);
            box-shadow: var(--shadow-lg);
            min-height: 500px;
            max-height: 70vh;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .content-tabs {
            display: flex;
            gap: 0;
            margin-bottom: var(--spacing-sm);
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            border-radius: var(--radius);
            padding: 4px;
            border: 1px solid var(--border-primary);
            box-shadow: var(--shadow-xl);
        }

        .tab-button {
            flex: 1;
            padding: var(--spacing-sm) var(--spacing-md);
            border: none;
            background: transparent;
            color: #94a3b8;
            font-weight: 500;
            cursor: pointer;
            border-radius: calc(var(--radius-lg) - 4px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .tab-button.active {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            color: var(--primary-light);
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-primary);
        }

        .tab-button:hover:not(.active) {
            background: var(--bg-glass-light);
            color: #cbd5e1;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* AI Chat specific spacing */
        #ai-chat.tab-content.active {
            margin-top: var(--spacing-xs);
        }

        /* Premium Resume Analysis */
        .analysis-container {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            box-shadow: var(--shadow-2xl);
            border: 1px solid var(--border-primary);
            position: relative;
            overflow: hidden;
        }

        .analysis-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
        }

        .upload-area {
            border: 2px dashed var(--border-accent);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            text-align: center;
            background: var(--bg-glass-light);
            backdrop-filter: blur(10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .upload-area::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent, rgba(59, 130, 246, 0.05), transparent);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .upload-area:hover {
            border-color: var(--primary);
            background: var(--bg-glass);
            transform: translateY(-2px);
            box-shadow: var(--shadow-xl);
        }

        .upload-area:hover::before {
            opacity: 1;
        }

        .upload-area.dragover {
            border-color: var(--primary);
            background: var(--bg-glass);
            transform: scale(1.02);
            box-shadow: var(--shadow-2xl);
        }

        .upload-icon-large {
            width: 48px;
            height: 48px;
            color: #9ca3af;
            margin-bottom: var(--spacing-md);
        }

        .file-input {
            display: none;
        }

        .job-description-input {
            width: 100%;
            padding: var(--spacing-md);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-lg);
            margin-top: var(--spacing-md);
            font-family: inherit;
            resize: vertical;
            min-height: 120px;
            background: var(--bg-glass);
            color: #f8fafc;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .job-description-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            outline: none;
            background: var(--bg-glass-light);
        }

        .job-description-input:hover {
            border-color: var(--primary-light);
            background: var(--bg-glass-light);
        }

        .analyze-button {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            padding: var(--spacing-md) var(--spacing-lg);
            border-radius: var(--radius-lg);
            font-weight: 700;
            cursor: pointer;
            margin-top: var(--spacing-md);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }

        .analyze-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s;
        }

        .analyze-button:hover::before {
            left: 100%;
        }

        .analyze-button:hover {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
            transform: translateY(-3px);
            box-shadow: var(--shadow-2xl);
        }

        .analyze-button:disabled {
            background: linear-gradient(135deg, #64748b 0%, #475569 100%);
            cursor: not-allowed;
            transform: none;
            box-shadow: var(--shadow-sm);
        }

        /* Results Display */
        .results-container {
            display: none;
            margin-top: var(--spacing-lg);
        }

        .score-display {
            text-align: center;
            margin-bottom: var(--spacing-lg);
        }

        .score-circle-large {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            margin: 0 auto var(--spacing-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 700;
            color: white;
        }

        .score-excellent {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }

        .score-good {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }

        .score-poor {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }

        .score-label {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .score-description {
            color: #6b7280;
        }

        .analysis-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
        }

        .detail-card {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            padding: var(--spacing-lg);
            border-radius: var(--radius-lg);
            border-left: 4px solid var(--primary);
            border: 1px solid var(--border-primary);
            box-shadow: var(--shadow-lg);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .detail-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .detail-card:hover::before {
            opacity: 1;
        }

        .detail-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-2xl);
        }

        .detail-card h4 {
            margin-bottom: var(--spacing-sm);
            color: var(--primary-light);
            font-weight: 600;
        }

        .detail-card p {
            color: #cbd5e1;
            font-size: 0.875rem;
            line-height: 1.6;
        }

        .suggestions {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            padding: var(--spacing-lg);
            border-radius: var(--radius-lg);
            margin-top: var(--spacing-md);
            border: 1px solid var(--border-primary);
            box-shadow: var(--shadow-lg);
        }

        .suggestions h4 {
            margin-bottom: var(--spacing-sm);
            color: var(--primary-light);
            font-weight: 600;
        }

        .suggestion-item {
            background: var(--bg-glass-light);
            backdrop-filter: blur(10px);
            padding: var(--spacing-md);
            border-radius: calc(var(--radius-lg) - 4px);
            margin-bottom: var(--spacing-sm);
            border-left: 3px solid var(--primary);
            border: 1px solid var(--border-secondary);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .suggestion-item:hover {
            background: var(--bg-glass);
            transform: translateX(4px);
            box-shadow: var(--shadow-lg);
        }

        .suggestion-item:last-child {
            margin-bottom: 0;
        }

        /* Score Breakdown Styling */
        .score-breakdown-item {
            text-align: center;
            margin-top: var(--spacing-sm);
        }

        .score-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-light);
            margin-bottom: var(--spacing-sm);
        }

        .score-bar {
            width: 100%;
            height: 8px;
            background: var(--bg-glass-light);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: var(--spacing-sm);
        }

        .score-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--primary-light) 100%);
            transition: width 0.8s ease-in-out;
            border-radius: 4px;
        }

        /* Loading States */
        .loading {
            display: none;
            text-align: center;
            padding: var(--spacing-xl);
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f4f6;
            border-top: 4px solid #2563eb;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto var(--spacing-md);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            .funnel-steps {
                grid-template-columns: 1fr;
            }
            
            .nav {
                display: none;
            }
        }

        /* Interactive Step-by-Step Guidance */
        .step-guide {
            position: fixed;
            top: 50%;
            right: 20px;
            transform: translateY(-50%);
            background: white;
            border-radius: var(--radius);
            padding: var(--spacing-md);
            box-shadow: var(--shadow-xl);
            border: 2px solid #2563eb;
            max-width: 300px;
            z-index: 1000;
            display: none;
        }

        .step-guide.active {
            display: block;
            animation: slideInRight 0.3s ease-out;
        }

        .step-guide h4 {
            color: #2563eb;
            margin-bottom: var(--spacing-sm);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .step-guide .step-number {
            background: #2563eb;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .step-guide p {
            color: #6b7280;
            font-size: 0.875rem;
            margin-bottom: var(--spacing-sm);
        }

        .step-guide .step-actions {
            display: flex;
            gap: 0.5rem;
        }

        .step-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: calc(var(--radius) - 4px);
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .step-btn.primary {
            background: #2563eb;
            color: white;
        }

        .step-btn.secondary {
            background: #f3f4f6;
            color: #6b7280;
        }

        .step-btn:hover {
            transform: translateY(-1px);
        }

        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 4px;
            background: linear-gradient(90deg, #2563eb, #1d4ed8);
            z-index: 1001;
            transition: width 0.3s ease;
        }

        .progress-bar.active {
            width: 100%;
        }

        .floating-cta {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #2563eb;
            color: white;
            padding: var(--spacing-md);
            border-radius: 50px;
            box-shadow: var(--shadow-xl);
            cursor: pointer;
            z-index: 999;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s;
        }

        .floating-cta:hover {
            transform: translateY(-2px);
            box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25);
        }

        .floating-cta.hidden {
            display: none;
        }

        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #1f2937;
            color: white;
            text-align: center;
            border-radius: var(--radius);
            padding: var(--spacing-sm);
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.875rem;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        .highlight {
            background: linear-gradient(120deg, #fef3c7 0%, #fde68a 100%);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-weight: 600;
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* Enhanced Interactive Elements */
        .interactive-card {
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .interactive-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(37, 99, 235, 0.1), transparent);
            transition: left 0.5s;
        }

        .interactive-card:hover::before {
            left: 100%;
        }

        .interactive-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-xl);
        }

        /* Generation Options */
        .generation-options, .cover-letter-options {
            margin-bottom: var(--spacing-lg);
        }

        .generation-options h3, .cover-letter-options h3 {
            margin-bottom: var(--spacing-md);
            color: #1f2937;
        }

        .style-options, .tone-options {
            display: flex;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-md);
            flex-wrap: wrap;
        }

        .style-btn, .tone-btn {
            padding: 0.75rem 1.5rem;
            border: 2px solid #e5e7eb;
            background: white;
            color: #6b7280;
            border-radius: var(--radius);
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
        }

        .style-btn:hover, .tone-btn:hover {
            border-color: #2563eb;
            color: #2563eb;
        }

        .style-btn.active, .tone-btn.active {
            background: #2563eb;
            color: white;
            border-color: #2563eb;
        }

        .generate-btn {
            background: #10b981;
            color: white;
            border: none;
            padding: var(--spacing-md) var(--spacing-lg);
            border-radius: var(--radius);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1rem;
        }

        .generate-btn:hover {
            background: #059669;
            transform: translateY(-1px);
            box-shadow: var(--shadow-lg);
        }

        .generated-content {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            margin-top: var(--spacing-md);
            color: #f8fafc;
        }

        .generated-content h4 {
            color: var(--primary-light);
            margin-bottom: var(--spacing-md);
        }

        .generated-content .content-preview {
            background: var(--bg-glass-light);
            backdrop-filter: blur(10px);
            padding: var(--spacing-md);
            border-radius: calc(var(--radius-lg) - 4px);
            border-left: 4px solid var(--success);
            margin-bottom: var(--spacing-md);
            color: #f8fafc;
        }

        /* Resume Content Styling */
        .resume-content {
            margin-top: var(--spacing-md);
        }

        .resume-content p {
            margin: var(--spacing-xs) 0;
            line-height: 1.6;
        }

        .resume-content p strong {
            color: var(--primary-light);
            font-weight: 600;
        }

        .resume-content ul {
            margin: var(--spacing-xs) 0;
            padding-left: var(--spacing-md);
        }

        .resume-content li {
            margin: calc(var(--spacing-xs) / 2) 0;
            line-height: 1.5;
        }

        .raw-content {
            background: var(--bg-secondary);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-md);
            padding: var(--spacing-md);
            margin-top: var(--spacing-md);
        }

        .raw-content pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            line-height: 1.5;
            color: #cbd5e1;
        }

        /* ATS-Friendly Professional Resume Styling */
        .ats-resume, .professional-resume {
            background: white;
            color: #333;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
        }

        .resume-header {
            text-align: center;
            border-bottom: 2px solid #3b82f6;
            padding-bottom: 1rem;
            margin-bottom: 2rem;
        }

        .resume-name {
            font-size: 2rem;
            font-weight: bold;
            color: #1e40af;
            margin-bottom: 0.5rem;
        }

        .resume-contact {
            font-size: 0.9rem;
            color: #666;
        }

        .contact-item {
            margin: 0 0.5rem;
        }

        .resume-section {
            margin-bottom: 2rem;
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: #1e40af;
            border-bottom: 1px solid #e5e7eb;
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
        }

        .section-content {
            margin-bottom: 1rem;
            color: #1f2937 !important;
            font-weight: 400;
        }

        .experience-item {
            margin-bottom: 1.5rem;
        }

        .job-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.5rem;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .job-title {
            font-size: 1.1rem;
            font-weight: bold;
            color: #1f2937;
        }

        .job-company {
            font-weight: 600;
            color: #374151;
        }

        .job-dates {
            font-style: italic;
            color: #6b7280;
        }

        .job-achievements {
            margin-left: 1rem;
        }

        .job-achievements li {
            margin-bottom: 0.25rem;
        }

        .skills-content {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .skill-tag {
            background: #e0e7ff;
            color: #3730a3;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .skills-categories {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .skill-category {
            margin-bottom: 0.5rem;
            line-height: 1.5;
        }

        .skill-category strong {
            color: #1e40af;
            font-weight: 600;
        }

        .education-item {
            margin-bottom: 1.5rem;
        }

        .education-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.5rem;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .degree {
            font-size: 1rem;
            font-weight: bold;
            color: #1f2937;
        }

        .institution {
            font-weight: 600;
            color: #374151;
            margin-left: 0.5rem;
        }

        .education-dates {
            font-style: italic;
            color: #6b7280;
            margin-left: 0.5rem;
        }

        .education-details {
            margin-top: 0.25rem;
            font-size: 0.9rem;
            color: #4b5563;
        }

        .education-details strong {
            color: #1e40af;
        }

        /* ATS-Specific Optimizations */
        .ats-resume {
            font-size: 11pt;
            line-height: 1.4;
        }

        .ats-resume .resume-name {
            font-size: 18pt;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .ats-resume .section-title {
            font-size: 12pt;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 1rem;
            margin-bottom: 0.5rem;
        }

        .ats-resume .job-title {
            font-size: 11pt;
            font-weight: bold;
        }

        .ats-resume .job-company {
            font-weight: 600;
        }

        .ats-resume .job-dates {
            font-size: 10pt;
        }

        .ats-resume .job-achievements li {
            margin-bottom: 0.2rem;
            font-size: 10pt;
        }

        .ats-resume .skill-category {
            margin-bottom: 0.3rem;
            font-size: 10pt;
        }

        .ats-resume .section-content {
            font-size: 10pt;
            text-align: justify;
            color: #1f2937 !important;
            font-weight: 400;
        }

        .ats-resume .section-content p {
            color: #1f2937 !important;
            font-weight: 400;
            margin: 0;
        }

        .content-actions {
            display: flex;
            gap: var(--spacing-sm);
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 0.5rem 1rem;
            border: 1px solid var(--border-primary);
            background: var(--bg-glass);
            color: #cbd5e1;
            border-radius: calc(var(--radius-lg) - 4px);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 0.875rem;
        }

        .action-btn:hover {
            border-color: var(--primary);
            color: var(--primary-light);
            background: var(--bg-glass-light);
            transform: translateY(-2px);
        }

        .action-btn.primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border-color: var(--primary);
            box-shadow: var(--shadow-lg);
        }

        .action-btn.primary:hover {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
            transform: translateY(-3px);
            box-shadow: var(--shadow-xl);
        }

        /* AI Chat Styles */
        .chat-container {
            max-height: 500px;
            display: flex;
            flex-direction: column;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: var(--spacing-md);
            background: #f9fafb;
            border-radius: var(--radius);
            margin-bottom: var(--spacing-md);
            max-height: 400px;
        }

        .message {
            margin-bottom: var(--spacing-md);
            display: flex;
            flex-direction: column;
        }

        .ai-message {
            align-items: flex-start;
        }

        .user-message {
            align-items: flex-end;
        }

        .message-content {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            padding: var(--spacing-md);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            max-width: 80%;
            color: #f8fafc;
        }

        .ai-message .message-content {
            background: var(--bg-glass-light);
            backdrop-filter: blur(10px);
            border-left: 4px solid var(--primary);
        }

        .user-message .message-content {
            background: #2563eb;
            color: white;
        }

        .chat-input-container {
            display: flex;
            gap: var(--spacing-sm);
            align-items: flex-end;
        }

        .chat-input {
            flex: 1;
            padding: var(--spacing-md);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-lg);
            resize: none;
            min-height: 60px;
            font-family: inherit;
            background: var(--bg-glass);
            color: #f8fafc;
        }

        .chat-send-btn {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            padding: var(--spacing-md);
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--shadow-lg);
        }

        .chat-send-btn:hover {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
            transform: translateY(-2px);
            box-shadow: var(--shadow-xl);
        }

        /* Interview Prep Styles */
        .interview-container {
            max-width: 800px;
        }

        .interview-setup {
            margin-bottom: var(--spacing-lg);
        }

        .setup-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-md);
            margin: var(--spacing-md) 0;
        }

        .option-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .option-group label {
            font-weight: 600;
            color: #f8fafc;
        }

        .form-select, .form-input, .form-textarea {
            padding: var(--spacing-sm);
            border: 1px solid var(--border-primary);
            border-radius: calc(var(--radius-lg) - 4px);
            font-family: inherit;
            font-size: 0.875rem;
            background: var(--bg-glass);
            color: #f8fafc;
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .start-interview-btn {
            background: linear-gradient(135deg, var(--success) 0%, #059669 100%);
            color: white;
            border: none;
            padding: var(--spacing-md) var(--spacing-lg);
            border-radius: var(--radius-lg);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--shadow-lg);
        }

        .start-interview-btn:hover {
            background: linear-gradient(135deg, #059669 0%, var(--success) 100%);
            transform: translateY(-2px);
            box-shadow: var(--shadow-xl);
        }

        .question-container {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            padding: var(--spacing-lg);
            border-radius: var(--radius-lg);
            margin-bottom: var(--spacing-md);
            border: 1px solid var(--border-primary);
        }

        .question-text {
            background: var(--bg-glass-light);
            backdrop-filter: blur(10px);
            padding: var(--spacing-md);
            border-radius: calc(var(--radius-lg) - 4px);
            margin: var(--spacing-md) 0;
            border-left: 4px solid var(--primary);
            font-size: 1.1rem;
            line-height: 1.6;
            color: #f8fafc;
        }

        .answer-actions {
            display: flex;
            gap: var(--spacing-sm);
            margin-top: var(--spacing-md);
        }

        .submit-answer-btn, .skip-question-btn {
            padding: var(--spacing-sm) var(--spacing-md);
            border: none;
            border-radius: calc(var(--radius-lg) - 4px);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .submit-answer-btn {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            box-shadow: var(--shadow-lg);
        }

        .submit-answer-btn:hover {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
            transform: translateY(-2px);
            box-shadow: var(--shadow-xl);
        }

        .skip-question-btn {
            background: linear-gradient(135deg, #64748b 0%, #475569 100%);
            color: white;
            box-shadow: var(--shadow-lg);
        }

        .skip-question-btn:hover {
            background: linear-gradient(135deg, #475569 0%, #64748b 100%);
            transform: translateY(-2px);
            box-shadow: var(--shadow-xl);
        }

        .restart-interview-btn {
            background: linear-gradient(135deg, var(--success) 0%, #059669 100%);
            color: white;
            border: none;
            padding: var(--spacing-md) var(--spacing-lg);
            border-radius: var(--radius-lg);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--shadow-lg);
        }

        .restart-interview-btn:hover {
            background: linear-gradient(135deg, #059669 0%, var(--success) 100%);
            transform: translateY(-2px);
            box-shadow: var(--shadow-xl);
        }

        /* Career Development Styles */
        .career-planning-container {
            max-width: 800px;
        }

        .planning-form {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            padding: var(--spacing-lg);
            border-radius: var(--radius-lg);
            margin-bottom: var(--spacing-lg);
            border: 1px solid var(--border-primary);
        }

        .form-group {
            margin-bottom: var(--spacing-md);
        }

        .form-group label {
            display: block;
            font-weight: 600;
            color: #f8fafc;
            margin-bottom: 0.5rem;
        }

        .generate-plan-btn {
            background: #8b5cf6;
            color: white;
            border: none;
            padding: var(--spacing-md) var(--spacing-lg);
            border-radius: var(--radius);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .generate-plan-btn:hover {
            background: #7c3aed;
        }

        .career-plan {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            padding: var(--spacing-lg);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-primary);
        }

        .plan-content {
            background: var(--bg-glass-light);
            backdrop-filter: blur(10px);
            padding: var(--spacing-md);
            border-radius: calc(var(--radius-lg) - 4px);
            margin: var(--spacing-md) 0;
            line-height: 1.6;
            border: 1px solid var(--border-secondary);
            color: #f8fafc;
        }

        .plan-actions {
            display: flex;
            gap: var(--spacing-sm);
            margin-top: var(--spacing-md);
        }

        .download-plan-btn, .edit-plan-btn {
            padding: var(--spacing-sm) var(--spacing-md);
            border: 1px solid var(--border-primary);
            background: var(--bg-glass);
            color: #cbd5e1;
            border-radius: calc(var(--radius-lg) - 4px);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 0.875rem;
        }

        .download-plan-btn:hover, .edit-plan-btn:hover {
            border-color: var(--primary);
            color: var(--primary-light);
            background: var(--bg-glass-light);
            transform: translateY(-2px);
        }

        /* Enhanced Interview Prep Styles */
        .interview-header h2 {
            color: #3b82f6;
            margin-bottom: var(--spacing-sm);
        }

        .question-content {
            background: var(--bg-glass);
            border-radius: 12px;
            padding: 24px;
            margin: 16px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .question-meta {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }

        .question-category {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .question-difficulty {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .question-text {
            font-size: 18px;
            line-height: 1.6;
            color: var(--text-primary);
            font-weight: 500;
        }

        .loading-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            display: inline-block;
            margin-right: 8px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Job Description Input Method Styles */
        .input-method-selection {
            margin-bottom: 16px;
        }

        .method-tabs {
            display: flex;
            background: var(--bg-glass);
            border-radius: 8px;
            padding: 4px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .method-tab {
            flex: 1;
            padding: 12px 16px;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 14px;
        }

        .method-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
        }

        .method-tab:hover:not(.active) {
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
        }

        .input-method-content {
            margin-top: 16px;
        }

        .jd-textarea {
            width: 100%;
            min-height: 200px;
            padding: 16px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            background: var(--bg-glass);
            color: var(--text-primary);
            font-size: 14px;
            line-height: 1.6;
            resize: vertical;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .jd-textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .jd-textarea::placeholder {
            color: var(--text-secondary);
            opacity: 0.8;
        }

        .text-input-footer {
            margin-top: 8px;
            text-align: center;
        }

        .text-input-footer small {
            color: var(--text-secondary);
            font-size: 12px;
            font-style: italic;
        }

        /* Real Interview Feedback Styles */
        .interview-header {
            text-align: center;
            margin-bottom: 24px;
            padding: 20px;
            background: var(--bg-glass);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .completion-stats {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 16px;
            flex-wrap: wrap;
        }

        .stat-item {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        .job-context {
            background: var(--bg-glass);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 24px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .performance-analysis {
            margin-bottom: 24px;
        }

        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 16px;
        }

        .analysis-card {
            background: var(--bg-glass);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
        }

        .analysis-card h6 {
            margin-bottom: 12px;
            color: var(--text-primary);
            font-size: 16px;
        }

        .score-badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 18px;
            margin-bottom: 12px;
        }

        .score-badge.excellent {
            background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%);
            color: white;
        }

        .score-badge.good {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: white;
        }

        .score-badge.needs-improvement {
            background: linear-gradient(135deg, #f87171 0%, #ef4444 100%);
            color: white;
        }

        .detailed-feedback {
            margin-bottom: 24px;
        }

        .question-feedback {
            background: var(--bg-glass);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .question-header h6 {
            margin: 0;
            color: var(--text-primary);
        }

        .question-score {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
        }

        .question-text, .answer-text {
            margin-bottom: 8px;
            line-height: 1.6;
        }

        .feedback-text {
            margin-top: 12px;
            padding: 12px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 8px;
            border-left: 4px solid var(--primary);
            font-weight: 500;
        }

        .improvement-recommendations, .strengths-highlights {
            background: var(--bg-glass);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .improvement-recommendations ul, .strengths-highlights ul {
            margin: 12px 0;
            padding-left: 20px;
        }

        .improvement-recommendations li, .strengths-highlights li {
            margin-bottom: 8px;
            line-height: 1.6;
        }

        .interview-mode-selection {
            margin-bottom: var(--spacing-lg);
        }

        .mode-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-md);
            margin: var(--spacing-md) 0;
        }

        .mode-option {
            display: flex;
            align-items: center;
        }

        .mode-option input[type="radio"] {
            display: none;
        }

        .mode-card {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            border: 2px solid var(--border-primary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-md);
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            width: 100%;
        }

        .mode-option input[type="radio"]:checked + label .mode-card {
            border-color: var(--primary);
            background: var(--bg-glass-light);
            backdrop-filter: blur(10px);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .mode-icon {
            font-size: 2rem;
            margin-bottom: var(--spacing-sm);
        }

        .mode-card h4 {
            color: var(--primary-light);
            margin-bottom: var(--spacing-sm);
        }

        .mode-card p {
            color: #cbd5e1;
            font-size: 0.875rem;
        }

        .setup-actions {
            text-align: center;
            margin-top: var(--spacing-lg);
        }

        /* Video Interview Styles */
        .video-interview-session {
            margin-top: var(--spacing-lg);
        }

        .video-container {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-lg);
            align-items: center;
            max-width: 100%;
        }

        .video-feed {
            position: relative;
            background: #000;
            border-radius: var(--radius-lg);
            overflow: hidden;
            width: 100%;
            max-width: 800px;
            aspect-ratio: 16/9;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border: 3px solid var(--primary);
        }

        #userVideo {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(180deg, rgba(0,0,0,0.7) 0%, transparent 30%, transparent 70%, rgba(0,0,0,0.7) 100%);
            color: white;
            padding: var(--spacing-md);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .recording-indicator {
            position: absolute;
            top: var(--spacing-md);
            right: var(--spacing-md);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            background: rgba(239, 68, 68, 0.9);
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: 20px;
            font-size: 0.875rem;
        }

        .recording-dot {
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
            animation: pulse 1s infinite;
        }

        .question-display {
            position: absolute;
            bottom: var(--spacing-md);
            left: var(--spacing-md);
            right: var(--spacing-md);
            background: rgba(0, 0, 0, 0.8);
            padding: var(--spacing-md);
            border-radius: var(--radius);
        }

        .question-display h4 {
            color: #fbbf24;
            margin-bottom: var(--spacing-sm);
        }

        /* AI Analysis Panel */
        .ai-analysis-panel {
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            border-radius: var(--radius-lg);
            padding: var(--spacing-md);
            box-shadow: var(--shadow-lg);
            height: fit-content;
            border: 1px solid var(--border-primary);
        }

        .analysis-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-sm);
            border-bottom: 1px solid var(--border-primary);
        }

        .analysis-header h4 {
            color: var(--primary-light);
            margin: 0;
        }

        .analysis-status {
            background: #10b981;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .analysis-metrics {
            margin-bottom: var(--spacing-md);
        }

        .metric-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-md);
            padding: var(--spacing-sm);
            background: var(--bg-glass-light);
            backdrop-filter: blur(10px);
            border-radius: calc(var(--radius-lg) - 4px);
            border: 1px solid var(--border-secondary);
        }

        .metric-icon {
            font-size: 1.25rem;
            min-width: 24px;
        }

        .metric-content {
            flex: 1;
        }

        .metric-label {
            display: block;
            font-size: 0.875rem;
            color: #94a3b8;
            margin-bottom: 0.25rem;
        }

        .metric-bar {
            width: 100%;
            height: 6px;
            background: var(--bg-glass);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 0.25rem;
        }

        .metric-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #059669);
            transition: width 0.3s ease;
        }

        .metric-value {
            font-size: 0.875rem;
            font-weight: 600;
            color: #f8fafc;
        }

        .real-time-feedback {
            background: var(--bg-glass-light);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-accent);
            border-radius: calc(var(--radius-lg) - 4px);
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }

        .real-time-feedback h5 {
            color: var(--primary-light);
            margin-bottom: var(--spacing-sm);
            font-size: 0.875rem;
        }

        .feedback-message {
            color: var(--primary-light);
            font-size: 0.875rem;
            line-height: 1.5;
        }

        .video-controls {
            display: flex;
            gap: var(--spacing-md);
            flex-wrap: wrap;
            justify-content: center;
            margin-top: var(--spacing-lg);
        }

        .video-controls button {
            min-width: 120px;
            padding: 12px 24px;
            font-size: 16px;
            font-weight: 600;
        }

        /* Mobile responsiveness for video */
        @media (max-width: 768px) {
            .video-feed {
                max-width: 100%;
                margin: 0 16px;
            }
            
            .video-controls {
                flex-direction: column;
                align-items: center;
            }
            
            .video-controls button {
                width: 100%;
                max-width: 200px;
            }
        }

        .control-btn {
            padding: 0.5rem 1rem;
            border: 1px solid var(--border-primary);
            background: var(--bg-glass);
            color: #cbd5e1;
            border-radius: calc(var(--radius-lg) - 4px);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .control-btn:hover {
            border-color: var(--primary);
            color: var(--primary-light);
            background: var(--bg-glass-light);
            transform: translateY(-2px);
        }

        .control-btn.danger {
            border-color: #ef4444;
            color: #ef4444;
        }

        .control-btn.danger:hover {
            background: #ef4444;
            color: white;
        }

        /* Video Analysis Results */
        .video-analysis-results {
            margin-top: var(--spacing-lg);
            padding: var(--spacing-lg);
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-primary);
        }

        .performance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-md);
            margin: var(--spacing-md) 0;
        }

        .performance-card {
            background: var(--bg-glass-light);
            backdrop-filter: blur(10px);
            padding: var(--spacing-md);
            border-radius: calc(var(--radius-lg) - 4px);
            text-align: center;
            border: 1px solid var(--border-secondary);
        }

        .performance-card h5 {
            color: var(--primary-light);
            margin-bottom: var(--spacing-sm);
            font-size: 0.875rem;
        }

        .score-display {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .score-circle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            font-weight: 700;
        }

        .score-label {
            font-size: 0.875rem;
            color: #94a3b8;
        }

        .performance-metric {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .performance-metric .metric-value {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--success);
        }

        .performance-metric .metric-bar {
            width: 80%;
            height: 8px;
            background: var(--bg-glass);
            border-radius: 4px;
            overflow: hidden;
        }

        .performance-metric .metric-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #059669);
        }

        .video-feedback {
            margin-top: var(--spacing-lg);
        }

        .feedback-item {
            background: var(--bg-glass-light);
            backdrop-filter: blur(10px);
            padding: var(--spacing-md);
            border-radius: calc(var(--radius-lg) - 4px);
            margin-bottom: var(--spacing-md);
            border-left: 4px solid var(--success);
        }

        .feedback-item strong {
            color: var(--primary-light);
            display: block;
            margin-bottom: var(--spacing-sm);
        }

        .feedback-item ul {
            margin: 0;
            padding-left: var(--spacing-md);
        }

        .feedback-item li {
            color: #cbd5e1;
            margin-bottom: 0.25rem;
        }

        .results-actions {
            display: flex;
            gap: var(--spacing-sm);
            margin-top: var(--spacing-lg);
            flex-wrap: wrap;
        }

        .download-results-btn, .share-results-btn {
            padding: var(--spacing-sm) var(--spacing-md);
            border: 1px solid var(--border-primary);
            background: var(--bg-glass);
            color: #cbd5e1;
            border-radius: calc(var(--radius-lg) - 4px);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 0.875rem;
        }

        .download-results-btn:hover, .share-results-btn:hover {
            border-color: var(--primary);
            color: var(--primary-light);
            background: var(--bg-glass-light);
            transform: translateY(-2px);
        }

        /* Interview Results Styles */
        .results-content {
            line-height: 1.6;
        }

        .response-item {
            background: var(--bg-glass-light);
            backdrop-filter: blur(10px);
            padding: var(--spacing-md);
            border-radius: calc(var(--radius-lg) - 4px);
            margin: var(--spacing-md) 0;
            border-left: 4px solid var(--success);
        }

        .feedback {
            background: var(--bg-glass-light);
            backdrop-filter: blur(10px);
            padding: var(--spacing-md);
            border-radius: calc(var(--radius-lg) - 4px);
            margin-top: var(--spacing-md);
            border-left: 4px solid var(--primary);
        }

        /* Utility Classes */
        .hidden {
            display: none;
        }

        .text-center {
            text-align: center;
        }

        .mb-4 {
            margin-bottom: var(--spacing-md);
        }

        .mt-4 {
            margin-top: var(--spacing-md);
        }

        /* Cover Letter Styles */
        .cover-letter-header {
            text-align: center;
            margin-bottom: var(--spacing-xl);
        }

        .cover-letter-header h2 {
            color: #1f2937;
            margin-bottom: var(--spacing-sm);
            font-size: 2rem;
        }

        .cover-letter-header p {
            color: #6b7280;
            font-size: 1.1rem;
        }

        .cover-letter-step {
            display: none;
            animation: fadeInUp 0.5s ease;
        }

        .cover-letter-step.active {
            display: block;
        }

        .job-details-container {
            background: white;
            border-radius: var(--radius);
            padding: var(--spacing-lg);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
        }

        .company-info-section {
            margin-top: var(--spacing-lg);
        }

        .company-info-input {
            width: 100%;
            padding: var(--spacing-md);
            border: 1px solid #d1d5db;
            border-radius: calc(var(--radius) - 4px);
            font-size: 0.875rem;
            resize: vertical;
            min-height: 100px;
        }

        .company-info-input:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .focus-options {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
        }

        .focus-option {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm);
            border-radius: calc(var(--radius) - 4px);
            transition: background-color 0.2s;
        }

        .focus-option:hover {
            background: #f9fafb;
        }

        .focus-option input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: #2563eb;
        }

        .focus-option label {
            font-size: 0.875rem;
            color: #374151;
            cursor: pointer;
        }

        .customization-options {
            display: flex;
            gap: var(--spacing-sm);
            flex-wrap: wrap;
        }

        .customization-btn {
            padding: 0.75rem 1.5rem;
            border: 1px solid #d1d5db;
            background: white;
            color: #6b7280;
            border-radius: calc(var(--radius) - 4px);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.875rem;
        }

        .customization-btn:hover {
            border-color: #2563eb;
            color: #2563eb;
        }

        .customization-btn.active {
            background: #2563eb;
            color: white;
            border-color: #2563eb;
        }

        .cover-letter-preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-lg);
            padding-bottom: var(--spacing-md);
            border-bottom: 1px solid var(--border-primary);
        }

        .cover-letter-preview-header h3 {
            color: var(--primary-light);
            margin: 0;
        }

        /* Resume Preview Header Styling */
        .resume-preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-lg);
            padding-bottom: var(--spacing-md);
            border-bottom: 1px solid var(--border-primary);
        }

        .resume-preview-header h3 {
            color: var(--primary-light);
            margin: 0;
        }

        .cover-letter-actions {
            display: flex;
            gap: var(--spacing-sm);
            flex-wrap: wrap;
        }

        .cover-letter-preview {
            background: var(--bg-glass-light);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-secondary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            line-height: 1.6;
            color: #f8fafc;
            font-size: 0.875rem;
        }

        .cover-letter-preview h4 {
            color: var(--primary-light);
            margin-bottom: var(--spacing-md);
            font-size: 1.1rem;
        }

        .cover-letter-preview p {
            margin-bottom: var(--spacing-md);
        }

        .cover-letter-preview ul {
            margin: var(--spacing-md) 0;
            padding-left: var(--spacing-lg);
        }

        .cover-letter-preview li {
            margin-bottom: var(--spacing-sm);
        }

        /* Optimization Options Styles */
        .optimization-options {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
        }

        .optimization-option {
            display: flex;
            align-items: flex-start;
            gap: var(--spacing-sm);
            padding: var(--spacing-md);
            border: 1px solid var(--border-primary);
            border-radius: calc(var(--radius-lg) - 4px);
            background: var(--bg-glass);
            backdrop-filter: blur(10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .optimization-option:hover {
            border-color: var(--primary);
            background: var(--bg-glass-light);
            transform: translateY(-2px);
        }

        .optimization-option input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--primary);
            margin-top: 2px;
        }

        .optimization-option label {
            font-weight: 600;
            color: #f8fafc;
            cursor: pointer;
            flex: 1;
        }

        .option-desc {
            font-size: 0.75rem;
            color: #94a3b8;
            margin-top: 2px;
            display: block;
        }

        .advanced-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-md);
        }

        .advanced-option {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
        }

        .advanced-option label {
            font-size: 0.875rem;
            font-weight: 600;
            color: #f8fafc;
        }

        /* Resume Preview Styling */
        .resume-preview {
            background: var(--bg-glass-light);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-secondary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            line-height: 1.6;
            color: #f8fafc;
            font-size: 0.875rem;
        }

        .resume-preview h4 {
            color: var(--primary-light);
            margin-bottom: var(--spacing-md);
            font-size: 1.1rem;
        }

        .resume-preview p {
            margin-bottom: var(--spacing-md);
            color: #cbd5e1;
        }

        .resume-preview ul {
            margin: var(--spacing-md) 0;
            padding-left: var(--spacing-lg);
        }

        .resume-preview li {
            margin-bottom: var(--spacing-sm);
            color: #cbd5e1;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">ðŸš€ Ron's AI Career Coach</div>
                <div class="user-info">
                    <span class="user-name">Welcome, User</span>
                    <div class="header-settings">
                        <button class="header-settings-btn" onclick="toggleSettingsMenu()">
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                        </button>
                        <div class="settings-dropdown" id="settingsDropdown">
                            <div class="dropdown-item" onclick="showTab('settings')">
                                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                                Settings
                            </div>
                            <div class="dropdown-item" onclick="changePassword()">
                                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4l-1.5-1.5L11 3h2a6 6 0 016 6z"></path>
                                </svg>
                                Change Password
                            </div>
                            <div class="dropdown-item" onclick="logout()">
                                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                                </svg>
                                Logout
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Motivation Section -->
    <div class="motivation-section">
        <div class="container">
            <div class="motivation-card">
                <span class="motivation-text">ðŸ’ª <strong>Today's Motivation:</strong> "The only limit to our realization of tomorrow is our doubts of today." - Franklin D. Roosevelt</span>
            </div>
        </div>
    </div>

    <!-- Progress Bar -->
    <div class="progress-bar" id="progressBar"></div>

    <!-- Main Content Area -->
    <main class="main-content" id="mainContent">
        <div class="container">
            <div class="content-tabs">
                <button class="tab-button active" onclick="showTab('ai-chat')">ðŸ’¬ AI Chat</button>
                <button class="tab-button" onclick="showTab('resume-analysis')">ðŸ“„ Resume Analysis</button>
                <button class="tab-button" onclick="showTab('resume-generation')">ðŸ“ Resume Generation</button>
                <button class="tab-button" onclick="showTab('cover-letter')">âœ‰ï¸ Cover Letter</button>
                <button class="tab-button" onclick="showTab('interview-prep')">ðŸŽ¯ Interview Prep</button>
                <button class="tab-button" onclick="showTab('payment-plans')">ðŸ’³ Payment Plans</button>
                <button class="tab-button" onclick="showTab('career-development')">ðŸŽ¯ Career Planning</button>
                <button class="tab-button" onclick="showTab('my-insights')">ðŸ’¡ My Insights</button>
            </div>

            <!-- AI Chat Tab -->
            <div id="ai-chat" class="tab-content active">
                <div class="chat-container">
                    <div class="chat-header">
                        <h2>ðŸ’¬ AI Career Coach Chat</h2>
                        <p>Ask me anything about your career, resume, interviews, or job search!</p>
                    </div>
                    
                    <div class="chat-interface">
                        <div class="chat-messages" id="chatMessages">
                            <div class="message ai-message">
                                <div class="message-content">
                                    <p>ðŸ‘‹ Hello! I'm your AI Career Coach. I can help you with:</p>
                                    <ul>
                                        <li>ðŸ“„ Resume analysis and optimization</li>
                                        <li>ðŸŽ¯ Interview preparation and practice</li>
                                        <li>ðŸ” Job search strategies</li>
                                        <li>ðŸ’¼ Career development advice</li>
                                        <li>âœ‰ï¸ Cover letter writing</li>
                                    </ul>
                                    <p>What would you like to work on today?</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="chat-input-container">
                            <div class="input-group">
                                <textarea 
                                    id="chatInput" 
                                    class="chat-input" 
                                    placeholder="Type your message here..."
                                    rows="1"
                                ></textarea>
                                <div class="chat-actions">
                                    <button class="voice-btn" onclick="startVoiceInput()" title="Voice Input" id="voiceInputBtn">
                                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path>
                                        </svg>
                                    </button>
                                    <button class="stop-speak-btn" onclick="stopSpeaking()" title="Stop Speaking" id="stopSpeakBtn" style="display: none;">
                                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                        </svg>
                                    </button>
                                    <button class="send-btn" onclick="sendMessage()">
                                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Resume Analysis Tab -->
            <div id="resume-analysis" class="tab-content">
                <div class="analysis-container">
                    <div class="analysis-header">
                        <h2>ðŸš€ Advanced Resume Analysis</h2>
                        <p class="mb-4">Get comprehensive ATS scoring, industry optimization, and skill gap analysis</p>
                    </div>
                    
                    <!-- Step 1: Upload Resume -->
                    <div class="analysis-step active" id="step1">
                        <div class="step-indicator">
                            <span class="step-number">1</span>
                            <span class="step-title">Upload Resume</span>
                        </div>
                        
                        <div class="upload-area" onclick="document.getElementById('resumeFile').click()">
                            <svg class="upload-icon-large" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                            </svg>
                            <p><strong>Click to upload</strong> or drag and drop</p>
                            <p class="text-center">PDF, DOCX, or DOC files</p>
                            <input type="file" id="resumeFile" class="file-input" accept=".pdf,.docx,.doc" onchange="handleFileUpload(event)">
                        </div>
                        
                        <div id="fileInfo" class="file-info" style="display: none;">
                            <div class="file-details">
                                <span class="file-name" id="fileName"></span>
                                <span class="file-size" id="fileSize"></span>
                            </div>
                            <button class="change-file-btn" onclick="changeFile()">Change File</button>
                        </div>
                    </div>

                    <!-- Step 2: Job Description -->
                    <div class="analysis-step" id="step2">
                        <div class="step-indicator">
                            <span class="step-number">2</span>
                            <span class="step-title">Job Description</span>
                        </div>
                        
                        <div class="jd-input-container">
                            <label for="jobDescription">Paste the job description to tailor your analysis:</label>
                            <textarea 
                                id="jobDescription" 
                                class="job-description-input" 
                                placeholder="Paste the complete job description here... Include requirements, responsibilities, and company details for better analysis."
                                rows="6"
                            ></textarea>
                            
                            <div class="jd-actions">
                                <button class="jd-action-btn" onclick="analyzeJD()">
                                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 00-2 2"></path>
                                    </svg>
                                    Analyze JD
                                </button>
                                <button class="jd-action-btn secondary" onclick="clearJD()">
                                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                    </svg>
                                    Clear
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Step 3: Analysis Options -->
                    <div class="analysis-step" id="step3">
                        <div class="step-indicator">
                            <span class="step-number">3</span>
                            <span class="step-title">Analysis Options</span>
                        </div>
                        
                        <div class="analysis-options">
                            <div class="option-group">
                                <h4>Industry Focus</h4>
                                <div class="industry-options">
                                    <button class="industry-btn active" onclick="selectIndustry('tech')">Technology</button>
                                    <button class="industry-btn" onclick="selectIndustry('finance')">Finance</button>
                                    <button class="industry-btn" onclick="selectIndustry('healthcare')">Healthcare</button>
                                    <button class="industry-btn" onclick="selectIndustry('marketing')">Marketing</button>
                                    <button class="industry-btn" onclick="selectIndustry('consulting')">Consulting</button>
                                    <button class="industry-btn" onclick="selectIndustry('other')">Other</button>
                                </div>
                            </div>
                            
                            <div class="option-group">
                                <h4>Analysis Depth</h4>
                                <div class="depth-options">
                                    <button class="depth-btn active" onclick="selectDepth('comprehensive')">Comprehensive</button>
                                    <button class="depth-btn" onclick="selectDepth('standard')">Standard</button>
                                    <button class="depth-btn" onclick="selectDepth('quick')">Quick Scan</button>
                                </div>
                            </div>
                        </div>
                        
                        <button id="analyzeBtn" class="analyze-button" onclick="analyzeResume()" disabled>
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                            </svg>
                            Start Comprehensive Analysis
                        </button>
                    </div>

                    <!-- Loading State -->
                    <div id="loading" class="loading">
                        <div class="analysis-progress">
                            <div class="progress-steps">
                                <div class="progress-step active">
                                    <div class="step-icon">ðŸ“„</div>
                                    <span>Parsing Resume</span>
                                </div>
                                <div class="progress-step">
                                    <div class="step-icon">ðŸ”</div>
                                    <span>ATS Analysis</span>
                                </div>
                                <div class="progress-step">
                                    <div class="step-icon">ðŸ“Š</div>
                                    <span>Skill Matching</span>
                                </div>
                                <div class="progress-step">
                                    <div class="step-icon">ðŸŽ¯</div>
                                    <span>Industry Optimization</span>
                                </div>
                                <div class="progress-step">
                                    <div class="step-icon">âœ…</div>
                                    <span>Generating Report</span>
                                </div>
                            </div>
                            <div class="progress-bar-container">
                                <div class="progress-bar-fill" id="analysisProgress"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Results Container -->
                    <div id="results" class="results-container">
                        <!-- Advanced Results will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Resume Generation Tab -->
            <div id="resume-generation" class="tab-content">
                <div class="analysis-container">
                    <div class="generation-header">
                        <h2>ðŸŽ¯ Smart Resume Generation</h2>
                        <p>Create ATS-optimized, industry-tailored resumes with advanced formatting options</p>
                    </div>
                    
                    <div id="generationContent">
                        <!-- Step 1: Resume Source -->
                        <div class="generation-step active" id="genStep1">
                            <div class="step-indicator">
                                <span class="step-number">1</span>
                                <span class="step-title">Resume Source</span>
                            </div>
                            
                            <div class="resume-source-options">
                                <div class="source-option">
                                    <input type="radio" id="useAnalyzed" name="resumeSource" value="analyzed" checked>
                                    <label for="useAnalyzed">
                                        <div class="source-card">
                                            <div class="source-icon">ðŸ“Š</div>
                                            <h4>Use Analyzed Resume</h4>
                                            <p>Generate from your recently analyzed resume</p>
                                            <span class="source-status" id="analyzedStatus">Available</span>
                                        </div>
                                    </label>
                                </div>
                                
                                <div class="source-option">
                                    <input type="radio" id="uploadNew" name="resumeSource" value="new">
                                    <label for="uploadNew">
                                        <div class="source-card">
                                            <div class="source-icon">ðŸ“</div>
                                            <h4>Upload New Resume</h4>
                                            <p>Upload a different resume file</p>
                                            <input type="file" id="newResumeFile" class="file-input" accept=".pdf,.docx,.doc" style="display: none;">
                                        </div>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="step-actions">
                                <button class="step-btn primary" onclick="nextResumeGenStep()">Next: Target Job</button>
                            </div>
                        </div>

                        <!-- Step 2: Job Description -->
                        <div class="generation-step" id="genStep2">
                            <div class="step-indicator">
                                <span class="step-number">2</span>
                                <span class="step-title">Target Job</span>
                            </div>
                            
                            <div class="job-target-container">
                                <div class="target-inputs">
                                    <div class="input-group">
                                        <label for="targetRole">Target Role/Position</label>
                                        <input type="text" id="targetRole" class="form-input" placeholder="e.g., Senior Software Engineer, Data Analyst">
                                    </div>
                                    
                                    <div class="input-group">
                                        <label for="targetCompany">Target Company</label>
                                        <input type="text" id="targetCompany" class="form-input" placeholder="e.g., Google, Microsoft">
                                    </div>
                                    
                                    <div class="input-group">
                                        <label for="targetIndustry">Industry</label>
                                        <select id="targetIndustry" class="form-select">
                                            <option value="">Select Industry</option>
                                            <option value="technology">Technology</option>
                                            <option value="finance">Finance</option>
                                            <option value="healthcare">Healthcare</option>
                                            <option value="marketing">Marketing</option>
                                            <option value="consulting">Consulting</option>
                                            <option value="education">Education</option>
                                            <option value="government">Government</option>
                                            <option value="nonprofit">Non-Profit</option>
                                            <option value="other">Other</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="jd-input-section">
                                    <label for="genJobDescription">Job Description</label>
                                    <textarea 
                                        id="genJobDescription" 
                                        class="job-description-input" 
                                        placeholder="Paste the complete job description here... This will be used to tailor your resume with relevant keywords and skills."
                                        rows="8"
                                    ></textarea>
                                    
                                    <div class="jd-actions">
                                        <button class="jd-action-btn" onclick="analyzeGenJD()">
                                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 00-2 2"></path>
                                            </svg>
                                            Analyze & Extract Keywords
                                        </button>
                                        <button class="jd-action-btn secondary" onclick="clearGenJD()">
                                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                            </svg>
                                            Clear
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="step-actions">
                                <button class="step-btn secondary" onclick="previousResumeGenStep()">Previous: Resume Source</button>
                                <button class="step-btn primary" onclick="nextResumeGenStep()">Next: Customization</button>
                            </div>
                        </div>

                        <!-- Step 3: Generation Options -->
                        <div class="generation-step" id="genStep3">
                            <div class="step-indicator">
                                <span class="step-number">3</span>
                                <span class="step-title">Customization</span>
                            </div>
                            
                            <div class="generation-options">
                                <div class="option-group">
                                    <h4>Resume Style</h4>
                                    <div class="style-options">
                                        <button class="style-btn active" onclick="selectStyle('standard')">
                                            <div class="style-info">
                                                <span class="style-name">Standard</span>
                                                <span class="style-desc">Professional & balanced</span>
                                            </div>
                                        </button>
                                        <button class="style-btn" onclick="selectStyle('impact')">
                                            <div class="style-info">
                                                <span class="style-name">Impact</span>
                                                <span class="style-desc">Results-focused & bold</span>
                                            </div>
                                        </button>
                                        <button class="style-btn" onclick="selectStyle('conservative')">
                                            <div class="style-info">
                                                <span class="style-name">Conservative</span>
                                                <span class="style-desc">Traditional & safe</span>
                                            </div>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="option-group">
                                    <h4>Content Preferences</h4>
                                    <div class="content-options">
                                        <div class="content-option">
                                            <label for="bulletCount">Bullet Points per Role:</label>
                                            <select id="bulletCount" class="form-select">
                                                <option value="4">4 bullets</option>
                                                <option value="5" selected>5 bullets</option>
                                                <option value="6">6 bullets</option>
                                                <option value="7">7 bullets</option>
                                                <option value="8">8 bullets</option>
                                            </select>
                                        </div>
                                        
                                        <div class="content-option">
                                            <label for="quantificationLevel">Quantification Level:</label>
                                            <div class="slider-container">
                                                <input type="range" id="quantificationLevel" min="1" max="5" value="4" class="slider">
                                                <div class="slider-labels">
                                                    <span>Minimal</span>
                                                    <span>Balanced</span>
                                                    <span>Maximum</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="content-option">
                                            <label for="includeSummary">Include Professional Summary:</label>
                                            <input type="checkbox" id="includeSummary" checked>
                                        </div>
                                        
                                        <div class="content-option">
                                            <label for="includeSkills">Include Skills Section:</label>
                                            <input type="checkbox" id="includeSkills" checked>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="option-group">
                                    <h4>Optimization Options</h4>
                                    <div class="optimization-options">
                                        <div class="optimization-option">
                                            <input type="checkbox" id="atsOptimization" checked>
                                            <label for="atsOptimization">ATS Optimization</label>
                                            <span class="option-desc">Ensure ATS-friendly formatting and keywords</span>
                                        </div>
                                        
                                        <div class="optimization-option">
                                            <input type="checkbox" id="skillGapAnalysis" checked>
                                            <label for="skillGapAnalysis">Skill Gap Analysis</label>
                                            <span class="option-desc">Identify and address missing skills</span>
                                        </div>
                                        
                                        <div class="optimization-option">
                                            <input type="checkbox" id="industryOptimization" checked>
                                            <label for="industryOptimization">Industry-Specific Optimization</label>
                                            <span class="option-desc">Tailor content for target industry</span>
                                        </div>
                                        
                                        <div class="optimization-option">
                                            <input type="checkbox" id="contentEnhancement" checked>
                                            <label for="contentEnhancement">Content Enhancement</label>
                                            <span class="option-desc">Improve impact and clarity of achievements</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="option-group">
                                    <h4>Advanced Options</h4>
                                    <div class="advanced-options">
                                        <div class="advanced-option">
                                            <label for="keywordDensity">Keyword Density:</label>
                                            <select id="keywordDensity" class="form-select">
                                                <option value="low">Low (1-2%)</option>
                                                <option value="medium" selected>Medium (2-3%)</option>
                                                <option value="high">High (3-4%)</option>
                                            </select>
                                        </div>
                                        
                                        <div class="advanced-option">
                                            <label for="actionVerbStyle">Action Verb Style:</label>
                                            <select id="actionVerbStyle" class="form-select">
                                                <option value="standard">Standard</option>
                                                <option value="powerful" selected>Powerful</option>
                                                <option value="leadership">Leadership-focused</option>
                                            </select>
                                        </div>
                                        
                                        <div class="advanced-option">
                                            <label for="metricsStyle">Metrics Style:</label>
                                            <select id="metricsStyle" class="form-select">
                                                <option value="percentage">Percentage-based</option>
                                                <option value="absolute" selected>Absolute numbers</option>
                                                <option value="mixed">Mixed approach</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="step-actions">
                                <button class="step-btn secondary" onclick="previousResumeGenStep()">Previous: Target Job</button>
                                <button id="generateResumeBtn" class="generate-btn" onclick="generateOptimizedResume()">
                                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                                    </svg>
                                    Generate ATS-Optimized Resume
                                </button>
                            </div>
                        </div>

                        <!-- Generated Resume Display -->
                        <div id="generatedResume" class="generated-content" style="display: none;">
                            <div class="resume-preview-header">
                                <h3>Your Generated Resume</h3>
                                <div class="resume-actions">
                                    <button class="action-btn primary" onclick="downloadResume('pdf')">
                                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                        </svg>
                                        Download PDF
                                    </button>
                                    <button class="action-btn secondary" onclick="downloadResume('docx')">
                                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                        </svg>
                                        Download Word
                                    </button>
                                    <button class="action-btn secondary" onclick="copyResume()">
                                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                        </svg>
                                        Copy to Clipboard
                                    </button>
                                    <button class="action-btn secondary" onclick="editResume()">
                                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                        </svg>
                                        Edit Resume
                                    </button>
                                </div>
                            </div>
                            
                            <div class="resume-preview" id="resumePreview">
                                <!-- Generated resume content will appear here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cover Letter Tab -->
            <div id="cover-letter" class="tab-content">
                <div class="analysis-container">
                    <div class="cover-letter-header">
                        <h2>ðŸ“ Professional Cover Letter Generator</h2>
                        <p>Create compelling, ATS-optimized cover letters tailored to your target role and company</p>
                    </div>
                    
                    <div id="coverLetterContent">
                        <!-- Step 1: Resume Source -->
                        <div class="cover-letter-step active" id="clStep1">
                            <div class="step-indicator">
                                <span class="step-number">1</span>
                                <span class="step-title">Resume Source</span>
                            </div>
                            
                            <div class="resume-source-options">
                                <div class="source-option">
                                    <input type="radio" id="clUseAnalyzed" name="clResumeSource" value="analyzed" checked>
                                    <label for="clUseAnalyzed">
                                        <div class="source-card">
                                            <div class="source-icon">ðŸ“Š</div>
                                            <h4>Use Analyzed Resume</h4>
                                            <p>Generate from your recently analyzed resume</p>
                                            <span class="source-status" id="clAnalyzedStatus">Available</span>
                                        </div>
                                    </label>
                                </div>
                                
                                <div class="source-option">
                                    <input type="radio" id="clUploadNew" name="clResumeSource" value="new">
                                    <label for="clUploadNew">
                                        <div class="source-card">
                                            <div class="source-icon">ðŸ“</div>
                                            <h4>Upload New Resume</h4>
                                            <p>Upload a different resume file</p>
                                            <input type="file" id="clNewResumeFile" class="file-input" accept=".pdf,.docx,.doc" style="display: none;">
                                        </div>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="step-actions">
                                <button class="step-btn primary" onclick="nextCoverLetterStep()">Next: Job & Company Details</button>
                            </div>
                        </div>

                        <!-- Step 2: Job & Company Details -->
                        <div class="cover-letter-step" id="clStep2">
                            <div class="step-indicator">
                                <span class="step-number">2</span>
                                <span class="step-title">Job & Company Details</span>
                            </div>
                            
                            <div class="job-details-container">
                                <div class="details-grid">
                                    <div class="input-group">
                                        <label for="clTargetRole">Target Role/Position</label>
                                        <input type="text" id="clTargetRole" class="form-input" placeholder="e.g., Senior Software Engineer, Data Analyst">
                                    </div>
                                    
                                    <div class="input-group">
                                        <label for="clTargetCompany">Target Company</label>
                                        <input type="text" id="clTargetCompany" class="form-input" placeholder="e.g., Google, Microsoft">
                                    </div>
                                    
                                    <div class="input-group">
                                        <label for="clHiringManager">Hiring Manager (Optional)</label>
                                        <input type="text" id="clHiringManager" class="form-input" placeholder="e.g., John Smith, Sarah Johnson">
                                    </div>
                                    
                                    <div class="input-group">
                                        <label for="clIndustry">Industry</label>
                                        <select id="clIndustry" class="form-select">
                                            <option value="">Select Industry</option>
                                            <option value="technology">Technology</option>
                                            <option value="finance">Finance</option>
                                            <option value="healthcare">Healthcare</option>
                                            <option value="marketing">Marketing</option>
                                            <option value="consulting">Consulting</option>
                                            <option value="education">Education</option>
                                            <option value="government">Government</option>
                                            <option value="nonprofit">Non-Profit</option>
                                            <option value="other">Other</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="jd-input-section">
                                    <label for="clJobDescription">Job Description</label>
                                    <textarea 
                                        id="clJobDescription" 
                                        class="job-description-input" 
                                        placeholder="Paste the complete job description here... This will be used to tailor your cover letter with relevant keywords and company-specific language."
                                        rows="8"
                                    ></textarea>
                                    
                                    <div class="jd-actions">
                                        <button class="jd-action-btn" onclick="analyzeCLJD()">
                                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 00-2 2"></path>
                                            </svg>
                                            Analyze & Extract Keywords
                                        </button>
                                        <button class="jd-action-btn secondary" onclick="clearCLJD()">
                                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                            </svg>
                                            Clear
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="company-info-section">
                                    <label for="clCompanyInfo">Company Information (Optional)</label>
                                    <textarea 
                                        id="clCompanyInfo" 
                                        class="company-info-input" 
                                        placeholder="Add any specific company information, recent news, or insights that could make your cover letter more personalized..."
                                        rows="4"
                                    ></textarea>
                                </div>
                            </div>
                            
                            <div class="step-actions">
                                <button class="step-btn secondary" onclick="previousCoverLetterStep()">Previous: Resume Source</button>
                                <button class="step-btn primary" onclick="nextCoverLetterStep()">Next: Cover Letter Options</button>
                            </div>
                        </div>

                        <!-- Step 3: Cover Letter Options -->
                        <div class="cover-letter-step" id="clStep3">
                            <div class="step-indicator">
                                <span class="step-number">3</span>
                                <span class="step-title">Cover Letter Options</span>
                            </div>
                            
                            <div class="cover-letter-options">
                                <div class="option-group">
                                    <h4>Writing Tone</h4>
                                    <div class="tone-options">
                                        <button class="tone-btn active" onclick="selectCLTone('crisp')">
                                            <div class="tone-info">
                                                <span class="tone-name">Crisp</span>
                                                <span class="tone-desc">Concise & direct (120 words)</span>
                                            </div>
                                        </button>
                                        <button class="tone-btn" onclick="selectCLTone('standard')">
                                            <div class="tone-info">
                                                <span class="tone-name">Standard</span>
                                                <span class="tone-desc">Professional & balanced (150 words)</span>
                                            </div>
                                        </button>
                                        <button class="tone-btn" onclick="selectCLTone('warm')">
                                            <div class="tone-info">
                                                <span class="tone-name">Warm</span>
                                                <span class="tone-desc">Friendly & engaging (180 words)</span>
                                            </div>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="option-group">
                                    <h4>Content Focus</h4>
                                    <div class="focus-options">
                                        <div class="focus-option">
                                            <input type="checkbox" id="includeSTAR" checked>
                                            <label for="includeSTAR">Include STAR method examples</label>
                                        </div>
                                        <div class="focus-option">
                                            <input type="checkbox" id="includeMetrics" checked>
                                            <label for="includeMetrics">Include quantifiable achievements</label>
                                        </div>
                                        <div class="focus-option">
                                            <input type="checkbox" id="includeCompanyResearch" checked>
                                            <label for="includeCompanyResearch">Reference company research</label>
                                        </div>
                                        <div class="focus-option">
                                            <input type="checkbox" id="includeCallToAction" checked>
                                            <label for="includeCallToAction">Include strong call-to-action</label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="option-group">
                                    <h4>Customization Level</h4>
                                    <div class="customization-options">
                                        <button class="customization-btn active" onclick="selectCustomization('standard')">Standard</button>
                                        <button class="customization-btn" onclick="selectCustomization('enhanced')">Enhanced</button>
                                        <button class="customization-btn" onclick="selectCustomization('premium')">Premium</button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="step-actions">
                                <button class="step-btn secondary" onclick="previousCoverLetterStep()">Previous: Job & Company Details</button>
                                <button id="generateCoverLetterBtn" class="generate-btn" onclick="generateCoverLetter()">
                                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                                    </svg>
                                    Generate Professional Cover Letter
                                </button>
                            </div>
                        </div>

                        <!-- Generated Cover Letter Display -->
                        <div id="generatedCoverLetter" class="generated-content" style="display: none;">
                            <div class="cover-letter-preview-header">
                                <h3>Your Generated Cover Letter</h3>
                                <div class="cover-letter-actions">
                                    <button class="action-btn primary" onclick="downloadCoverLetter('pdf')">
                                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                        </svg>
                                        Download PDF
                                    </button>
                                    <button class="action-btn secondary" onclick="downloadCoverLetter('docx')">
                                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                        </svg>
                                        Download Word
                                    </button>
                                    <button class="action-btn secondary" onclick="copyCoverLetter()">
                                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                        </svg>
                                        Copy to Clipboard
                                    </button>
                                    <button class="action-btn secondary" onclick="editCoverLetter()">
                                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                        </svg>
                                        Edit Cover Letter
                                    </button>
                                </div>
                            </div>
                            
                            <div class="cover-letter-preview" id="coverLetterPreview">
                                <!-- Generated cover letter content will appear here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AI Chat Tab -->
            <div id="ai-chat" class="tab-content">
                <div class="analysis-container">
                    <h2>AI Career Chat</h2>
                    <p>Get personalized career advice and guidance from our AI coach.</p>
                    <div class="chat-container">
                        <div class="chat-messages" id="chatMessages">
                            <div class="message ai-message">
                                <div class="message-content">
                                    <p>Hello! I'm your AI Career Coach. How can I help you today? You can ask me about:</p>
                                    <ul>
                                        <li>Career transitions and planning</li>
                                        <li>Skill development strategies</li>
                                        <li>Industry insights and trends</li>
                                        <li>Professional networking tips</li>
                                        <li>Salary negotiation advice</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="chat-input-container">
                            <textarea id="chatInput" placeholder="Ask me anything about your career..." class="chat-input"></textarea>
                            <button onclick="sendChatMessage()" class="chat-send-btn">
                                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Interview Prep Tab -->
            <div id="interview-prep" class="tab-content">
                <div class="analysis-container">
                    <div class="interview-header">
                        <h2>ðŸŽ¥ AI-Powered Interview Preparation</h2>
                        <p>Practice with real-time AI analysis, video feedback, and personalized coaching</p>
                    </div>
                    
                    <div class="interview-container">
                        <!-- Interview Mode Selection -->
                        <div class="interview-mode-selection">
                            <h3>Choose Your Interview Mode</h3>
                            <div class="mode-options">
                                <div class="mode-option">
                                    <input type="radio" id="textMode" name="interviewMode" value="text" checked>
                                    <label for="textMode">
                                        <div class="mode-card">
                                            <div class="mode-icon">ðŸ“</div>
                                            <h4>Text-Based Practice</h4>
                                            <p>Answer questions in writing with AI feedback</p>
                                        </div>
                                    </label>
                                </div>
                                
                                <div class="mode-option">
                                    <input type="radio" id="videoMode" name="interviewMode" value="video">
                                    <label for="videoMode">
                                        <div class="mode-card">
                                            <div class="mode-icon">ðŸŽ¥</div>
                                            <h4>Video Interview Practice</h4>
                                            <p>Real-time AI analysis with video feedback</p>
                                        </div>
                                    </label>
                                </div>
                                
                                <div class="mode-option">
                                    <input type="radio" id="audioMode" name="interviewMode" value="audio">
                                    <label for="audioMode">
                                        <div class="mode-card">
                                            <div class="mode-icon">ðŸŽ¤</div>
                                            <h4>Audio Practice</h4>
                                            <p>Practice speaking with voice analysis</p>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Interview Setup -->
                        <div class="interview-setup" id="interviewSetup">
                            <h3>Interview Configuration</h3>
                            <div class="setup-options">
                                <div class="option-group">
                                    <label>Role Type:</label>
                                    <select id="roleType" class="form-select">
                                        <option value="technical">Technical</option>
                                        <option value="non-technical">Non-Technical</option>
                                        <option value="leadership">Leadership</option>
                                        <option value="entry-level">Entry Level</option>
                                        <option value="sales">Sales</option>
                                        <option value="marketing">Marketing</option>
                                        <option value="consulting">Consulting</option>
                                    </select>
                                </div>
                                <div class="option-group">
                                    <label>Experience Level:</label>
                                    <select id="experienceLevel" class="form-select">
                                        <option value="entry">Entry Level (0-2 years)</option>
                                        <option value="mid">Mid Level (3-7 years)</option>
                                        <option value="senior">Senior Level (8+ years)</option>
                                        <option value="executive">Executive Level (15+ years)</option>
                                    </select>
                                </div>
                                <div class="option-group">
                                    <label>Industry:</label>
                                    <select id="industry" class="form-select">
                                        <option value="tech">Technology</option>
                                        <option value="finance">Finance</option>
                                        <option value="healthcare">Healthcare</option>
                                        <option value="consulting">Consulting</option>
                                        <option value="retail">Retail</option>
                                        <option value="manufacturing">Manufacturing</option>
                                        <option value="education">Education</option>
                                        <option value="government">Government</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                <div class="option-group">
                                    <label>Interview Type:</label>
                                    <select id="interviewType" class="form-select">
                                        <option value="behavioral">Behavioral</option>
                                        <option value="technical">Technical</option>
                                        <option value="case-study">Case Study</option>
                                        <option value="situational">Situational</option>
                                        <option value="mixed">Mixed</option>
                                    </select>
                                </div>
                                <div class="option-group">
                                    <label>Question Count:</label>
                                    <select id="questionCount" class="form-select">
                                        <option value="5">5 Questions</option>
                                        <option value="10" selected>10 Questions</option>
                                        <option value="15">15 Questions</option>
                                        <option value="20">20 Questions</option>
                                    </select>
                                </div>
                                
                                <!-- Job Description Input for Tailored Questions -->
                                <div class="option-group job-description-input">
                                    <label>ðŸ“‹ Job Description (Required)</label>
                                    <p class="input-hint">Provide a job description to get personalized interview questions tailored to the specific role and company</p>
                                    
                                    <!-- Input Method Selection -->
                                    <div class="input-method-selection">
                                        <div class="method-tabs">
                                            <button type="button" class="method-tab active" onclick="switchInputMethod('text')" id="textTab">
                                                ðŸ“ Text Input
                                            </button>
                                            <button type="button" class="method-tab" onclick="switchInputMethod('file')" id="fileTab">
                                                ðŸ“„ File Upload
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <!-- Text Input Method -->
                                    <div id="textInputMethod" class="input-method-content">
                                        <textarea 
                                            id="jdTextInput" 
                                            placeholder="Paste the job description here... Include job title, company, requirements, responsibilities, and any other relevant details."
                                            rows="8"
                                            class="jd-textarea"
                                        ></textarea>
                                        <div class="text-input-footer">
                                            <small>ðŸ’¡ Tip: Include the complete job description for better question generation</small>
                                        </div>
                                    </div>
                                    
                                    <!-- File Upload Method -->
                                    <div id="fileInputMethod" class="input-method-content" style="display: none;">
                                    <div class="jd-upload-container">
                                        <input type="file" id="jdFile" accept=".pdf,.docx,.doc,.txt" class="jd-file-input">
                                        <label for="jdFile" class="jd-upload-label">
                                            <div class="jd-upload-area">
                                                <div class="upload-icon">ðŸ“„</div>
                                                <span>Choose file or drag & drop</span>
                                                <small>PDF, DOCX, DOC, TXT (Max 5MB)</small>
                                            </div>
                                        </label>
                                        <div id="jdFileInfo" class="jd-file-info" style="display: none;">
                                            <span class="file-name"></span>
                                            <button type="button" class="remove-file-btn" onclick="removeJD()">âœ•</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="setup-actions">
                                <button onclick="startInterview()" class="start-interview-btn">
                                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                    Start Interview Practice
                                </button>
                            </div>
                        </div>

                        <!-- Video Interview Session -->
                        <div class="video-interview-session" id="videoInterviewSession" style="display: none;">
                            <div class="video-container">
                                <div class="video-feed">
                                    <video id="userVideo" autoplay muted playsinline></video>
                                    <div class="video-overlay">
                                        <div class="recording-indicator">
                                            <div class="recording-dot"></div>
                                            <span>Recording</span>
                                        </div>
                                        <div class="question-display" id="videoQuestionDisplay">
                                            <h4>Question <span id="videoQuestionNumber">1</span></h4>
                                            <p id="videoQuestionText"></p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="ai-analysis-panel">
                                    <div class="analysis-header">
                                        <h4>ðŸ¤– AI Real-Time Analysis</h4>
                                        <div class="analysis-status" id="analysisStatus">Analyzing...</div>
                                    </div>
                                    
                                    <div class="analysis-metrics">
                                        <div class="metric-item">
                                            <div class="metric-icon">ðŸ‘ï¸</div>
                                            <div class="metric-content">
                                                <span class="metric-label">Eye Contact</span>
                                                <div class="metric-bar">
                                                    <div class="metric-fill" id="eyeContactBar"></div>
                                                </div>
                                                <span class="metric-value" id="eyeContactValue">85%</span>
                                            </div>
                                        </div>
                                        
                                        <div class="metric-item">
                                            <div class="metric-icon">ðŸ˜Š</div>
                                            <div class="metric-content">
                                                <span class="metric-label">Facial Expression</span>
                                                <div class="metric-bar">
                                                    <div class="metric-fill" id="facialExpressionBar"></div>
                                                </div>
                                                <span class="metric-value" id="facialExpressionValue">Good</span>
                                            </div>
                                        </div>
                                        
                                        <div class="metric-item">
                                            <div class="metric-icon">ðŸŽ¯</div>
                                            <div class="metric-content">
                                                <span class="metric-label">Confidence Level</span>
                                                <div class="metric-bar">
                                                    <div class="metric-fill" id="confidenceBar"></div>
                                                </div>
                                                <span class="metric-value" id="confidenceValue">High</span>
                                            </div>
                                        </div>
                                        
                                        <div class="metric-item">
                                            <div class="metric-icon">ðŸ—£ï¸</div>
                                            <div class="metric-content">
                                                <span class="metric-label">Speech Clarity</span>
                                                <div class="metric-bar">
                                                    <div class="metric-fill" id="speechClarityBar"></div>
                                                </div>
                                                <span class="metric-value" id="speechClarityValue">Clear</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="real-time-feedback" id="realTimeFeedback">
                                        <h5>Live Feedback</h5>
                                        <div class="feedback-message" id="feedbackMessage">
                                            Great eye contact! Try to maintain this throughout your answer.
                                        </div>
                                    </div>
                                    
                                    <div class="video-controls">
                                        <button class="control-btn" onclick="pauseVideo()" id="pauseBtn">
                                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                            </svg>
                                            Pause
                                        </button>
                                        <button class="control-btn" onclick="nextVideoQuestion()" id="nextVideoBtn">
                                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                                            </svg>
                                            Next Question
                                        </button>
                                        <button class="control-btn danger" onclick="endVideoInterview()">
                                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                            </svg>
                                            End Interview
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Text Interview Session -->
                        <div class="interview-session" id="interviewSession" style="display: none;">
                            <div class="question-container">
                                <h3>Question <span id="questionNumber">1</span> of <span id="totalQuestions">5</span></h3>
                                <div class="question-text" id="questionText"></div>
                                <div class="answer-input">
                                    <textarea id="answerInput" placeholder="Type your answer here..." class="form-textarea"></textarea>
                                    <div class="answer-actions">
                                        <button onclick="submitAnswer()" class="submit-answer-btn">Submit Answer</button>
                                        <button onclick="skipQuestion()" class="skip-question-btn">Skip Question</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Interview Results -->
                        <div class="interview-results" id="interviewResults" style="display: none;">
                            <h3>Interview Results & Analysis</h3>
                            <div class="results-summary" id="resultsSummary"></div>
                            
                            <!-- Video Analysis Results -->
                            <div class="video-analysis-results" id="videoAnalysisResults" style="display: none;">
                                <h4>ðŸŽ¥ Video Performance Analysis</h4>
                                <div class="performance-grid">
                                    <div class="performance-card">
                                        <h5>Overall Score</h5>
                                        <div class="score-display">
                                            <div class="score-circle" id="overallVideoScore">87</div>
                                            <span class="score-label">Excellent</span>
                                        </div>
                                    </div>
                                    
                                    <div class="performance-card">
                                        <h5>Eye Contact</h5>
                                        <div class="performance-metric">
                                            <span class="metric-value">92%</span>
                                            <div class="metric-bar">
                                                <div class="metric-fill" style="width: 92%"></div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="performance-card">
                                        <h5>Body Language</h5>
                                        <div class="performance-metric">
                                            <span class="metric-value">85%</span>
                                            <div class="metric-bar">
                                                <div class="metric-fill" style="width: 85%"></div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="performance-card">
                                        <h5>Speech Quality</h5>
                                        <div class="performance-metric">
                                            <span class="metric-value">88%</span>
                                            <div class="metric-bar">
                                                <div class="metric-fill" style="width: 88%"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="video-feedback">
                                    <h5>Detailed Feedback</h5>
                                    <div class="feedback-item">
                                        <strong>Strengths:</strong>
                                        <ul>
                                            <li>Excellent eye contact maintained throughout</li>
                                            <li>Confident posture and hand gestures</li>
                                            <li>Clear articulation and appropriate pace</li>
                                        </ul>
                                    </div>
                                    <div class="feedback-item">
                                        <strong>Areas for Improvement:</strong>
                                        <ul>
                                            <li>Consider varying facial expressions more</li>
                                            <li>Practice maintaining energy in longer responses</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="results-actions">
                                <button onclick="restartInterview()" class="restart-interview-btn">Start New Interview</button>
                                <button onclick="downloadResults()" class="download-results-btn">Download Results</button>
                                <button onclick="shareResults()" class="share-results-btn">Share Results</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Career Development Tab -->
            <div id="career-development" class="tab-content">
                <div class="analysis-container">
                    <h2>Career Development Planning</h2>
                    <p>Create personalized career development plans and track your professional growth.</p>
                    <div class="career-planning-container">
                        <div class="planning-form">
                            <h3>Create Your Career Plan</h3>
                            <div class="form-group">
                                <label>Current Role:</label>
                                <input type="text" id="cpCurrentRole" placeholder="e.g., Software Developer" class="form-input">
                            </div>
                            <div class="form-group">
                                <label>Target Role:</label>
                                <input type="text" id="cpTargetRole" placeholder="e.g., Senior Software Engineer" class="form-input">
                            </div>
                            <div class="form-group">
                                <label>Years of Experience:</label>
                                <input type="number" id="cpYearsExperience" placeholder="5" class="form-input">
                            </div>
                            <div class="form-group">
                                <label>Key Goals:</label>
                                <textarea id="cpCareerGoals" placeholder="What do you want to achieve in your career?" class="form-textarea"></textarea>
                            </div>
                            <button onclick="generateCareerPlan()" class="generate-plan-btn">Generate Career Plan</button>
                        </div>
                        <div class="career-plan" id="careerPlan" style="display: none;">
                            <h3>Your Career Development Plan</h3>
                            <div class="plan-content" id="planContent"></div>
                            <div class="plan-actions">
                                <button onclick="downloadPlan()" class="download-plan-btn">Download Plan</button>
                                <button onclick="editPlan()" class="edit-plan-btn">Edit Plan</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Job Search Tab -->
            <div id="job-search" class="tab-content">
                <div class="analysis-container">
                    <h2>ðŸ” AI Job Search & Matching</h2>
                    <p>Find the perfect job opportunities with AI-powered matching and real-time insights.</p>
                    
                    <div class="job-search-container">
                        <div class="search-form">
                            <h3>Job Search Preferences</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Job Title:</label>
                                    <input type="text" id="jobTitle" placeholder="e.g., Software Engineer" class="form-input">
                                </div>
                                <div class="form-group">
                                    <label>Location:</label>
                                    <input type="text" id="jobLocation" placeholder="e.g., New York, NY" class="form-input">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Experience Level:</label>
                                    <select id="experienceLevel" class="form-input">
                                        <option value="">Select Level</option>
                                        <option value="entry">Entry Level</option>
                                        <option value="mid">Mid Level</option>
                                        <option value="senior">Senior Level</option>
                                        <option value="executive">Executive</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Salary Range:</label>
                                    <select id="salaryRange" class="form-input">
                                        <option value="">Select Range</option>
                                        <option value="0-50000">$0 - $50,000</option>
                                        <option value="50000-75000">$50,000 - $75,000</option>
                                        <option value="75000-100000">$75,000 - $100,000</option>
                                        <option value="100000+">$100,000+</option>
                                    </select>
                                </div>
                            </div>
                            <button onclick="searchJobs()" class="search-jobs-btn">ðŸ” Search Jobs</button>
                        </div>
                        
                        <div class="job-results" id="jobResults" style="display: none;">
                            <h3>Job Opportunities</h3>
                            <div class="job-list" id="jobList"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Payment Plans Tab -->
            <div id="payment-plans" class="tab-content">
                <div class="analysis-container">
                    <h2>ðŸ’³ Payment Plans & Pricing</h2>
                    <p>Choose the perfect plan for your career development journey.</p>
                    
                    <div class="pricing-container">
                        <div class="pricing-grid">
                            <div class="pricing-card">
                                <h3>Free</h3>
                                <div class="price">$0</div>
                                <ul>
                                    <li>Basic resume analysis</li>
                                    <li>5 AI chat messages</li>
                                    <li>Basic interview prep</li>
                                </ul>
                                <button class="pricing-btn">Get Started</button>
                            </div>
                            <div class="pricing-card featured">
                                <h3>Pro</h3>
                                <div class="price">$9.99/month</div>
                                <ul>
                                    <li>Advanced resume analysis</li>
                                    <li>Unlimited AI chat</li>
                                    <li>Video interview practice</li>
                                    <li>Cover letter generation</li>
                                    <li>Job matching</li>
                                    <li>Priority support</li>
                                </ul>
                                <button class="pricing-btn">Choose Pro</button>
                            </div>
                            <div class="pricing-card">
                                <h3>Enterprise</h3>
                                <div class="price">$19.99/month</div>
                                <ul>
                                    <li>Everything in Pro</li>
                                    <li>Career coaching sessions</li>
                                    <li>Premium support</li>
                                    <li>Custom integrations</li>
                                    <li>Advanced analytics</li>
                                    <li>Team collaboration</li>
                                </ul>
                                <button class="pricing-btn">Choose Enterprise</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- My Insights Tab -->
            <div id="my-insights" class="tab-content">
                <div class="analysis-container">
                    <h2>ðŸ’¡ My Personal Insights</h2>
                    <p>Your personalized career development insights and recommendations.</p>
                    
                    <div class="insights-container">
                        <div class="insights-grid">
                            <div class="insight-card">
                                <h3>ðŸ“Š My Activity Summary</h3>
                                <div class="activity-stats">
                                    <div class="stat">
                                        <span class="stat-number">1</span>
                                        <span class="stat-label">Features Used</span>
                                    </div>
                                    <div class="stat">
                                        <span class="stat-number">0</span>
                                        <span class="stat-label">Days Active</span>
                                    </div>
                                    <div class="stat">
                                        <span class="stat-number">â­</span>
                                        <span class="stat-label">My Level</span>
                                    </div>
                                    <div class="stat">
                                        <span class="stat-number">ðŸŒ±</span>
                                        <span class="stat-label">Beginner</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="insight-card">
                                <h3>ðŸ’ª Progress Score</h3>
                                <div class="progress-score">
                                    <div class="score-circle">
                                        <span class="score-number">100</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="insight-card">
                                <h3>ðŸš€ Recommended Next Steps</h3>
                                <ul class="recommendations">
                                    <li>ðŸš€ Review and update your resume regularly</li>
                                    <li>ðŸš€ Practice advanced interview scenarios</li>
                                    <li>ðŸš€ Track your career progress and achievements</li>
                                    <li>ðŸš€ Create a 5-year career development plan</li>
                                </ul>
                            </div>
                            
                            <div class="insight-card">
                                <h3>ðŸ’¡ Career Tips for You</h3>
                                <ul class="career-tips">
                                    <li>ðŸ’¡ Focus on building foundational skills</li>
                                    <li>ðŸ’¡ Seek mentorship from experienced professionals</li>
                                    <li>ðŸ’¡ Take on entry-level projects to gain experience</li>
                                </ul>
                            </div>
                            
                            <div class="insight-card">
                                <h3>ðŸ“ˆ My Feature Usage</h3>
                                <div class="feature-usage">
                                    <div class="usage-item">
                                        <span>ResumeOptimization</span>
                                        <div class="usage-bar">
                                            <div class="usage-fill" style="width: 0%"></div>
                                        </div>
                                        <span>0%</span>
                                    </div>
                                    <div class="usage-item">
                                        <span>InterviewPreparation</span>
                                        <div class="usage-bar">
                                            <div class="usage-fill" style="width: 0%"></div>
                                        </div>
                                        <span>0%</span>
                                    </div>
                                    <div class="usage-item">
                                        <span>CareerPlanning</span>
                                        <div class="usage-bar">
                                            <div class="usage-fill" style="width: 0%"></div>
                                        </div>
                                        <span>0%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="insights-actions">
                            <button onclick="refreshInsights()" class="refresh-btn">ðŸ”„ Refresh My Insights</button>
                            <button onclick="setPreferences()" class="preferences-btn">âš™ï¸ Set My Preferences</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="settings" class="tab-content">
                <div class="analysis-container">
                    <h2>âš™ï¸ Settings & Preferences</h2>
                    <p>Customize your experience and manage your account settings.</p>
                    
                    <div class="settings-container">
                        <div class="settings-grid">
                            <div class="settings-section">
                                <h3>ðŸŽ¨ Theme & Appearance</h3>
                                <div class="setting-item">
                                    <label>Theme:</label>
                                    <select id="themeSelect" onchange="changeTheme()">
                                        <option value="light">Light Mode</option>
                                        <option value="dark">Dark Mode</option>
                                        <option value="auto">Auto (System)</option>
                                    </select>
                                </div>
                                <div class="setting-item">
                                    <label>Color Scheme:</label>
                                    <select id="colorScheme" onchange="changeColorScheme()">
                                        <option value="blue">Blue (Default)</option>
                                        <option value="green">Green</option>
                                        <option value="purple">Purple</option>
                                        <option value="orange">Orange</option>
                                    </select>
                                </div>
                                <div class="setting-item">
                                    <label>Font Size:</label>
                                    <select id="fontSize" onchange="changeFontSize()">
                                        <option value="small">Small</option>
                                        <option value="medium">Medium</option>
                                        <option value="large">Large</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="settings-section">
                                <h3>ðŸ‘¤ Profile Settings</h3>
                                <div class="setting-item">
                                    <label>Display Name:</label>
                                    <input type="text" id="displayName" placeholder="Enter your display name" class="form-input">
                                </div>
                                <div class="setting-item">
                                    <label>Email:</label>
                                    <input type="email" id="userEmail" placeholder="your@email.com" class="form-input">
                                </div>
                                <div class="setting-item">
                                    <label>Job Title:</label>
                                    <input type="text" id="userJobTitle" placeholder="e.g., Software Engineer" class="form-input">
                                </div>
                                <div class="setting-item">
                                    <label>Industry:</label>
                                    <select id="userIndustry" class="form-input">
                                        <option value="">Select Industry</option>
                                        <option value="tech">Technology</option>
                                        <option value="finance">Finance</option>
                                        <option value="healthcare">Healthcare</option>
                                        <option value="education">Education</option>
                                        <option value="marketing">Marketing</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="settings-section">
                                <h3>ðŸ”” Notifications</h3>
                                <div class="setting-item">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="emailNotifications" checked>
                                        Email notifications
                                    </label>
                                </div>
                                <div class="setting-item">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="browserNotifications" checked>
                                        Browser notifications
                                    </label>
                                </div>
                                <div class="setting-item">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="weeklyInsights" checked>
                                        Weekly career insights
                                    </label>
                                </div>
                                <div class="setting-item">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="jobAlerts" checked>
                                        Job alerts
                                    </label>
                                </div>
                            </div>
                            
                            <div class="settings-section">
                                <h3>ðŸ”’ Privacy & Security</h3>
                                <div class="setting-item">
                                    <button onclick="changePassword()" class="settings-btn">Change Password</button>
                                </div>
                                <div class="setting-item">
                                    <button onclick="exportData()" class="settings-btn">Export My Data</button>
                                </div>
                                <div class="setting-item">
                                    <button onclick="deleteAccount()" class="settings-btn danger">Delete Account</button>
                                </div>
                            </div>
                            
                            <div class="settings-section">
                                <h3>ðŸ“ž Support & Help</h3>
                                <div class="setting-item">
                                    <button onclick="contactSupport()" class="settings-btn">Contact Support</button>
                                </div>
                                <div class="setting-item">
                                    <button onclick="viewHelpCenter()" class="settings-btn">Help Center</button>
                                </div>
                                <div class="setting-item">
                                    <button onclick="submitFeedback()" class="settings-btn">Submit Feedback</button>
                                </div>
                                <div class="setting-item">
                                    <button onclick="reportBug()" class="settings-btn">Report a Bug</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="settings-actions">
                            <button onclick="saveSettings()" class="save-settings-btn">ðŸ’¾ Save All Settings</button>
                            <button onclick="resetSettings()" class="reset-settings-btn">ðŸ”„ Reset to Default</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Adzuna API Configuration for Real-Time US Jobs
        const ADZUNA_CONFIG = {
            appId: 'fda07aa95244daefa04863acfb7fabdc',
            appKey: 'b96827ea',
            country: 'us',
            baseUrl: 'http://api.adzuna.com:80/v1/api/jobs/us/search/1'
        };

        // âœ… API Credentials Configured:
        // App ID: fda07aa95244daefa04863acfb7fabdc
        // App Key: b96827ea
        // Country: US (United States)
        // Base URL: http://api.adzuna.com:80/v1/api/jobs/us/search/1
        // Format: http://api.adzuna.com:80/v1/api/jobs/{country}/search/{page}?app_id={APP_ID}&app_key={APP_KEY}&results_per_page=20&what={keyword}&where={location}&sort_by=date&content-type=application/json

        // Interactive Step-by-Step Guidance System
        let currentStep = 0;
        let totalSteps = 0;
        let isGuidedMode = false;

        const guidedSteps = [
            {
                title: "Welcome to AI Career Coach!",
                description: "Let's optimize your job application step by step. I'll guide you through the entire process.",
                action: "showWelcome"
            },
            {
                title: "Step 1: Upload Your Resume",
                description: "First, let's upload your resume. We support PDF, DOCX, and DOC files. Drag and drop or click to browse.",
                action: "highlightUpload",
                target: ".upload-area"
            },
            {
                title: "Step 2: Add Job Description",
                description: "Now paste the job description to tailor your analysis. This helps us match your skills to the role requirements.",
                action: "highlightJobDesc",
                target: "#jobDescription"
            },
            {
                title: "Step 3: Analyze & Score",
                description: "Click 'Analyze Resume' to get your comprehensive ATS score and personalized recommendations.",
                action: "highlightAnalyze",
                target: "#analyzeBtn"
            },
            {
                title: "Step 4: Review Results",
                description: "Review your score breakdown, keyword matches, and specific improvement suggestions.",
                action: "showResults"
            },
            {
                title: "Step 5: Generate Optimized Resume",
                description: "Switch to the Resume Generation tab to create your ATS-optimized, tailored resume.",
                action: "switchToGeneration"
            },
            {
                title: "Step 6: Create Cover Letter",
                description: "Finally, generate a compelling cover letter tailored to your target role.",
                action: "switchToCoverLetter"
            },
            {
                title: "You're All Set!",
                description: "Congratulations! You now have an optimized resume and cover letter ready for your job application.",
                action: "completeJourney"
            }
        ];

        // Initialize the guided experience
        function startGuidedJourney() {
            isGuidedMode = true;
            currentStep = 0;
            totalSteps = guidedSteps.length;
            
            // Show progress bar
            document.getElementById('progressBar').classList.add('active');
            
            // Show step guide
            showStepGuide();
            
            // Hide hero section and show main content
            showMainContent();
            
            // Start with first step
            updateStepGuide();
        }

        // Show the step guide
        function showStepGuide() {
            const stepGuide = document.getElementById('stepGuide');
            stepGuide.classList.add('active');
            
            // Update floating CTA
            updateFloatingCTA();
        }

        // Update step guide content
        function updateStepGuide() {
            if (currentStep >= guidedSteps.length) return;
            
            const step = guidedSteps[currentStep];
            document.getElementById('currentStepNumber').textContent = currentStep + 1;
            document.getElementById('currentStepTitle').textContent = step.title;
            document.getElementById('currentStepDescription').textContent = step.description;
            
            // Update progress bar
            const progress = ((currentStep + 1) / totalSteps) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            
            // Execute step action
            executeStepAction(step.action, step.target);
        }

        // Execute specific step actions
        function executeStepAction(action, target) {
            switch(action) {
                case 'showWelcome':
                    // Already handled
                    break;
                case 'highlightUpload':
                    highlightElement('.upload-area');
                    break;
                case 'highlightJobDesc':
                    highlightElement('#jobDescription');
                    break;
                case 'highlightAnalyze':
                    highlightElement('#analyzeBtn');
                    break;
                case 'showResults':
                    // Will be called after analysis
                    break;
                case 'switchToGeneration':
                    showTab('resume-generation');
                    highlightElement('#resume-generation');
                    break;
                case 'switchToCoverLetter':
                    showTab('cover-letter');
                    highlightElement('#cover-letter');
                    break;
                case 'completeJourney':
                    completeGuidedJourney();
                    break;
            }
        }

        // Highlight an element
        function highlightElement(selector) {
            const element = document.querySelector(selector);
            if (element) {
                element.classList.add('pulse');
                element.scrollIntoView({ behavior: 'smooth', block: 'center' });
                
                // Remove pulse after animation
                setTimeout(() => {
                    element.classList.remove('pulse');
                }, 2000);
            }
        }

        // Next step
        function nextStep() {
            if (currentStep < guidedSteps.length - 1) {
                currentStep++;
                updateStepGuide();
            }
        }

        // Previous step
        function previousStep() {
            if (currentStep > 0) {
                currentStep--;
                updateStepGuide();
            }
        }

        // Show next step (called from floating CTA)
        function showNextStep() {
            if (currentStep < guidedSteps.length - 1) {
                nextStep();
            }
        }

        // Update floating CTA
        function updateFloatingCTA() {
            const floatingCTA = document.getElementById('floatingCTA');
            const floatingCTAText = document.getElementById('floatingCTAText');
            
            if (currentStep < guidedSteps.length - 1) {
                floatingCTAText.textContent = `Step ${currentStep + 2}: ${guidedSteps[currentStep + 1].title.split(':')[0]}`;
                floatingCTA.classList.remove('hidden');
            } else {
                floatingCTA.classList.add('hidden');
            }
        }

        // Complete guided journey
        function completeGuidedJourney() {
            document.getElementById('stepGuide').classList.remove('active');
            document.getElementById('floatingCTA').classList.add('hidden');
            document.getElementById('progressBar').classList.remove('active');
            
            // Show completion message
            showCompletionMessage();
        }

        // Show completion message
        function showCompletionMessage() {
            const mainContent = document.getElementById('mainContent');
            const completionDiv = document.createElement('div');
            completionDiv.className = 'completion-message';
            completionDiv.innerHTML = `
                <div style="text-align: center; padding: 2rem; background: #f0f9ff; border-radius: 12px; margin: 1rem 0;">
                    <h2 style="color: #2563eb; margin-bottom: 1rem;">ðŸŽ‰ Journey Complete!</h2>
                    <p style="color: #1f2937; margin-bottom: 1rem;">You've successfully optimized your resume and created a tailored cover letter.</p>
                    <p style="color: #6b7280;">Your job application is now ready to impress recruiters!</p>
                </div>
            `;
            mainContent.appendChild(completionDiv);
        }

        // Show main content when CTA is clicked
        function showMainContent() {
            document.querySelector('.hero').style.display = 'none';
            document.querySelector('.scorecard-preview').style.display = 'none';
            document.querySelector('.features').style.display = 'none';
            document.querySelector('.funnel').style.display = 'none';
            document.querySelector('.social-proof').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
        }

        // Tab switching
        function showTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            
            // Remove active class from all tab buttons
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => button.classList.remove('active'));
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
        }

        // File upload handling
        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const analyzeBtn = document.getElementById('analyzeBtn');
                analyzeBtn.disabled = false;
                analyzeBtn.textContent = `Analyze ${file.name}`;
            }
        }

        // Resume analysis
        function analyzeResume() {
            const fileInput = document.getElementById('resumeFile');
            const jobDescription = document.getElementById('jobDescription').value;
            
            if (!fileInput.files[0]) {
                alert('Please upload a resume first.');
                return;
            }

            // Show loading
            document.getElementById('loading').style.display = 'block';
            document.getElementById('results').style.display = 'none';

            // Simulate analysis (replace with actual API call)
            setTimeout(() => {
                document.getElementById('loading').style.display = 'none';
                showResults();
                
                // If in guided mode, advance to next step
                if (isGuidedMode && currentStep === 3) {
                    setTimeout(() => {
                        nextStep();
                    }, 2000);
                }
            }, 3000);
        }

        // Show analysis results
        function showResults() {
            const resultsContainer = document.getElementById('results');
            resultsContainer.style.display = 'block';
            
            // Generate comprehensive scores
            const jobMatchScore = Math.floor(Math.random() * 30) + 70; // 70-100
            const atsScore = Math.floor(Math.random() * 25) + 75; // 75-100
            const overallScore = Math.floor((jobMatchScore + atsScore) / 2);
            
            let overallScoreClass = 'score-excellent';
            let overallScoreLabel = 'Excellent';
            
            if (overallScore < 80) {
                overallScoreClass = 'score-good';
                overallScoreLabel = 'Good';
            }
            if (overallScore < 70) {
                overallScoreClass = 'score-poor';
                overallScoreLabel = 'Needs Improvement';
            }

            resultsContainer.innerHTML = `
                <div class="score-display">
                    <div class="score-circle-large ${overallScoreClass}">${overallScore}</div>
                    <div class="score-label">Overall Score: ${overallScoreLabel}</div>
                    <div class="score-description">Your resume is ${overallScore < 80 ? 'good but could be improved' : 'excellent and recruiter-ready'}.</div>
                </div>
                
                <div class="analysis-details">
                    <div class="detail-card">
                        <h4>ðŸŽ¯ Job Match Score</h4>
                        <div class="score-breakdown-item">
                            <div class="score-number">${jobMatchScore}%</div>
                            <div class="score-bar">
                                <div class="score-fill" style="width: ${jobMatchScore}%"></div>
                            </div>
                            <p>Keyword alignment and skill relevance</p>
                        </div>
                    </div>
                    <div class="detail-card">
                        <h4>ðŸ“Š ATS Score</h4>
                        <div class="score-breakdown-item">
                            <div class="score-number">${atsScore}%</div>
                            <div class="score-bar">
                                <div class="score-fill" style="width: ${atsScore}%"></div>
                            </div>
                            <p>Formatting and parsing compatibility</p>
                        </div>
                    </div>
                    <div class="detail-card">
                        <h4>ðŸ“ˆ Overall Score</h4>
                        <div class="score-breakdown-item">
                            <div class="score-number">${overallScore}%</div>
                            <div class="score-bar">
                                <div class="score-fill" style="width: ${overallScore}%"></div>
                            </div>
                            <p>Combined performance assessment</p>
                        </div>
                    </div>
                </div>
                
                <div class="suggestions">
                    <h4>Key Improvements</h4>
                    <div class="suggestion-item">
                        <strong>Add metrics:</strong> Quantify your achievements with specific numbers
                    </div>
                    <div class="suggestion-item">
                        <strong>Action verbs:</strong> Start bullet points with strong action verbs
                    </div>
                    <div class="suggestion-item">
                        <strong>Tailor content:</strong> Align skills with the specific job requirements
                    </div>
                    <div class="suggestion-item">
                        <strong>ATS optimization:</strong> Use standard fonts and avoid complex formatting
                    </div>
                </div>
            `;
        }

        // Style and tone selection
        let selectedStyle = 'standard';
        let selectedTone = 'crisp';

        function selectStyle(style) {
            selectedStyle = style;
            document.querySelectorAll('.style-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }

        function selectTone(tone) {
            selectedTone = tone;
            document.querySelectorAll('.tone-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }

        // Generate optimized resume and cover letter
        function generateOptimizedResume() {
            const generateBtn = document.getElementById('generateResumeBtn');
            generateBtn.textContent = 'Generating...';
            generateBtn.disabled = true;

            // Get uploaded resume data
            const resumeFile = document.getElementById('resumeFile');
            const jobDescription = document.getElementById('genJobDescription').value;
            const targetRole = document.getElementById('targetRole').value;
            const targetCompany = document.getElementById('targetCompany').value;
            
            if (!resumeFile.files[0]) {
                alert('Please upload a resume first.');
                generateBtn.textContent = 'Generate Optimized Resume';
                generateBtn.disabled = false;
                return;
            }

            // Parse the uploaded resume file
            const file = resumeFile.files[0];
            const fileType = file.type;
            
            if (fileType === 'application/pdf') {
                // Handle PDF files
                parsePDFFile(file, targetRole, targetCompany, jobDescription, selectedStyle);
            } else {
                // Handle text files
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    const resumeContent = e.target.result;
                    const parsedResume = parseResumeContent(resumeContent);
                    
                    // Generate optimized resume with actual content
            setTimeout(() => {
                const generatedResume = document.getElementById('generatedResume');
                generatedResume.style.display = 'block';
                
                // Get file name for display
                const fileName = resumeFile.files[0].name;
                
                generatedResume.innerHTML = `
                    <h4>Your Optimized Resume (${selectedStyle} style)</h4>
                    <div class="content-preview">
                        <p><strong>Source Resume:</strong> ${fileName}</p>
                                <p><strong>Target Role:</strong> ${targetRole || 'Not specified'}</p>
                                <p><strong>Target Company:</strong> ${targetCompany || 'Not specified'}</p>
                        <p><strong>Job Description:</strong> ${jobDescription ? 'Customized for target role' : 'General optimization'}</p>
                        
                                <div class="resume-content">
                                    ${parsedResume}
                                </div>
                            </div>
                            <div class="content-actions">
                                <button class="action-btn" onclick="downloadResume('pdf')">Download PDF</button>
                                <button class="action-btn" onclick="downloadResume('word')">Download Word</button>
                                <button class="action-btn" onclick="copyResume()">Copy to Clipboard</button>
                                <button class="action-btn primary" onclick="editResume()">Edit Resume</button>
                            </div>
                        `;

                        // Auto-generate cover letter after resume
                        setTimeout(() => {
                            generateCoverLetter();
                        }, 1000);

                        generateBtn.textContent = 'Generate Optimized Resume';
                        generateBtn.disabled = false;

                        // If in guided mode, advance to next step
                        if (isGuidedMode && currentStep === 5) {
                            setTimeout(() => {
                                nextStep();
                            }, 2000);
                        }
                    }, 2000);
                };
                
                reader.readAsText(file);
            }
        }

        // Parse PDF file and extract text content
        async function parsePDFFile(file, targetRole, targetCompany, jobDescription, selectedStyle) {
            try {
                console.log('Starting PDF parsing for file:', file.name);
                
                const arrayBuffer = await file.arrayBuffer();
                console.log('PDF array buffer loaded, size:', arrayBuffer.byteLength);
                
                const pdf = await pdfjsLib.getDocument({
                    data: arrayBuffer,
                    useSystemFonts: true
                }).promise;
                
                console.log('PDF loaded, pages:', pdf.numPages);
                
                let fullText = '';
                
                // Extract text from all pages
                for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {
                    console.log('Processing page:', pageNum);
                    const page = await pdf.getPage(pageNum);
                    const textContent = await page.getTextContent();
                    const pageText = textContent.items.map(item => item.str).join(' ');
                    fullText += pageText + '\n';
                }
                
                console.log('Extracted text length:', fullText.length);
                console.log('Extracted text preview:', fullText.substring(0, 200));
                
                // Parse the extracted text into structured data
                const parsedData = parseResumeToStructuredData(fullText);
                const professionalResume = createProfessionalResume(parsedData, targetRole, targetCompany, jobDescription);
                
                // Generate optimized resume with actual content
                setTimeout(() => {
                    const generatedResume = document.getElementById('generatedResume');
                    generatedResume.style.display = 'block';
                    
                    // Get file name for display
                    const fileName = file.name;
                    
                    generatedResume.innerHTML = `
                        <h4>Your Optimized Resume (${selectedStyle} style)</h4>
                        <div class="content-preview">
                            <p><strong>Source Resume:</strong> ${fileName}</p>
                            <p><strong>Target Role:</strong> ${targetRole || 'Not specified'}</p>
                            <p><strong>Target Company:</strong> ${targetCompany || 'Not specified'}</p>
                            <p><strong>Job Description:</strong> ${jobDescription ? 'Customized for target role' : 'General optimization'}</p>
                            
                            <div class="resume-content">
                                ${professionalResume}
                            </div>
                    </div>
                    <div class="content-actions">
                        <button class="action-btn" onclick="downloadResume('pdf')">Download PDF</button>
                        <button class="action-btn" onclick="downloadResume('word')">Download Word</button>
                        <button class="action-btn" onclick="copyResume()">Copy to Clipboard</button>
                        <button class="action-btn primary" onclick="editResume()">Edit Resume</button>
                    </div>
                `;

                // Auto-generate cover letter after resume
                setTimeout(() => {
                    generateCoverLetter();
                }, 1000);

                    const generateBtn = document.getElementById('generateResumeBtn');
                generateBtn.textContent = 'Generate Optimized Resume';
                generateBtn.disabled = false;

                // If in guided mode, advance to next step
                if (isGuidedMode && currentStep === 5) {
                    setTimeout(() => {
                        nextStep();
                    }, 2000);
                }
                }, 2000);
                
            } catch (error) {
                console.error('Error parsing PDF:', error);
                alert('Error parsing PDF file. Please try uploading a text file or ensure the PDF is not corrupted. Error: ' + error.message);
                
                const generateBtn = document.getElementById('generateResumeBtn');
                generateBtn.textContent = 'Generate Optimized Resume';
                generateBtn.disabled = false;
            }
        }

        // Create ATS-friendly professional resume template
        function createProfessionalResume(parsedData, targetRole, targetCompany, jobDescription) {
            const { name, contact, summary, experience, education, skills } = parsedData;
            
            console.log('Creating resume with data:', { name, summary, targetRole });
            
            // Always use the summary from parsed data, with fallback
            let customizedSummary = summary;
            
            // If no summary or empty, use default based on role
            if (!customizedSummary || customizedSummary.trim() === '') {
                if (targetRole && targetRole.toLowerCase().includes('prompt engineer')) {
                    customizedSummary = `Experienced AI Engineer and Prompt Engineer with 6+ years in digital transformation, CRM optimization, and advanced analytics. Specializing in Generative AI and intelligent automation, with expertise in deploying GPT-4, LangChain, Hugging Face Transformers, and Cursor-powered workflows for AI products. Proven track record in building ATS-optimized resume platforms, voice assistants, and scalable AI solutions across AWS, Vercel, and Heroku.`;
                } else {
                    customizedSummary = `Experienced AI Engineer with 6+ years in digital transformation, CRM optimization, and advanced analytics. Specializing in Generative AI and intelligent automation, with expertise in deploying GPT-4, LangChain, Hugging Face Transformers, and Cursor-powered workflows for AI products. Proven track record in building ATS-optimized resume platforms, voice assistants, and scalable AI solutions across AWS, Vercel, and Heroku.`;
                }
            }
            
            console.log('Final customized summary:', customizedSummary);
            
            return `
                <div class="ats-resume">
                    <div class="resume-header">
                        <h1 class="resume-name">${name}</h1>
                        <div class="resume-contact">
                            ${contact.map(item => `<span class="contact-item">${item}</span>`).join(' | ')}
                        </div>
                    </div>
                    
                    <div class="resume-section">
                        <h2 class="section-title">PROFESSIONAL SUMMARY</h2>
                        <p class="section-content">${customizedSummary}</p>
                    </div>
                    
                    <div class="resume-section">
                        <h2 class="section-title">TECHNICAL SKILLS</h2>
                        <div class="skills-categories">
                            <div class="skill-category">
                                <strong>AI & Generative Models:</strong> GPT-4, LangChain, Hugging Face Transformers, OpenAI APIs, Whisper, DALLÂ·E, ElevenLabs
                            </div>
                            <div class="skill-category">
                                <strong>AI Development Tools:</strong> Cursor, n8n workflows, Hugging Face pipelines, LangChain agents
                            </div>
                            <div class="skill-category">
                                <strong>Frontend & Mobile:</strong> Next.js, React, Flutter/Dart, Tailwind CSS
                            </div>
                            <div class="skill-category">
                                <strong>Data & Cloud:</strong> SQL, Python (pandas), Tableau, AWS (Lambda, Redshift, S3, EC2), Databricks, Snowflake, PostgreSQL
                            </div>
                            <div class="skill-category">
                                <strong>DevOps & Infrastructure:</strong> Docker, Kubernetes, GitHub Actions CI/CD, Vercel, Heroku
                            </div>
                            <div class="skill-category">
                                <strong>CRM & Business Tools:</strong> Salesforce, JIRA, Confluence
                            </div>
                        </div>
                    </div>
                    
                    <div class="resume-section">
                        <h2 class="section-title">PROFESSIONAL EXPERIENCE</h2>
                        ${experience.map(exp => `
                            <div class="experience-item">
                                <div class="job-header">
                                    <h3 class="job-title">${exp.title}</h3>
                                    <span class="job-company">${exp.company}</span>
                                    <span class="job-dates">${exp.dates}</span>
                                </div>
                                <ul class="job-achievements">
                                    ${exp.achievements.map(achievement => `<li>${achievement}</li>`).join('')}
                                </ul>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="resume-section">
                        <h2 class="section-title">PROJECTS</h2>
                        <div class="experience-item">
                            <div class="job-header">
                                <h3 class="job-title">Ron's AI Career Coach (2025)</h3>
                                <span class="job-company">Full-stack AI Platform</span>
                            </div>
                            <ul class="job-achievements">
                                <li>Built comprehensive AI platform for resume analysis, ATS scoring, interview practice, job search, and AI career chat with voice capabilities</li>
                                <li>Tech: Next.js, Node.js, OpenAI APIs, LangChain, Stripe, AWS, Heroku, PostgreSQL, MongoDB, Vercel</li>
                            </ul>
                        </div>
                        <div class="experience-item">
                            <div class="job-header">
                                <h3 class="job-title">RonBot AI Job Agent (2025)</h3>
                                <span class="job-company">Automated Job-Search Assistant</span>
                            </div>
                            <ul class="job-achievements">
                                <li>Automated job-search assistant integrating GPT-4, LangChain, Hugging Face pipelines, LinkedIn/Gmail/Calendar APIs, and Airtable</li>
                                <li>Tech: Next.js, GPT-4, Hugging Face, Airtable</li>
                            </ul>
                        </div>
                        <div class="experience-item">
                            <div class="job-header">
                                <h3 class="job-title">Flutter Voice Chatbot (2025)</h3>
                                <span class="job-company">Cross-platform Voice Assistant</span>
                            </div>
                            <ul class="job-achievements">
                                <li>Cross-platform voice assistant with GPT-4, Hugging Face Transformers, DALLÂ·E, ElevenLabs TTS</li>
                                <li>Tech: Flutter/Dart, OpenAI APIs, Hugging Face, LangChain</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="resume-section">
                        <h2 class="section-title">EDUCATION</h2>
                        ${education.map(edu => `
                            <div class="education-item">
                                <div class="education-header">
                                    <h3 class="degree">${edu.degree}</h3>
                                    <span class="institution">${edu.institution}</span>
                                    <span class="education-dates">${edu.dates}</span>
                                </div>
                                ${edu.gpa ? `<div class="education-details"><strong>GPA:</strong> ${edu.gpa}</div>` : ''}
                                ${edu.relevant_courses ? `<div class="education-details"><strong>Relevant Coursework:</strong> ${edu.relevant_courses}</div>` : ''}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        // Parse resume content into structured data
        function parseResumeToStructuredData(content) {
            console.log('Parsing resume content:', content.substring(0, 500));
            
            const lines = content.split('\n').map(line => line.trim()).filter(line => line.length > 0);
            
            // Extract name (usually first line or first few lines)
            let name = 'Sylvester Ronith Reagan'; // Default fallback
            if (lines.length > 0) {
                // Look for name patterns
                const namePatterns = [
                    /^[A-Z][a-z]+ [A-Z][a-z]+ [A-Z][a-z]+$/, // First Last Middle
                    /^[A-Z][a-z]+ [A-Z][a-z]+$/, // First Last
                    /^[A-Z][a-z]+ [A-Z]\. [A-Z][a-z]+$/ // First M. Last
                ];
                
                for (let i = 0; i < Math.min(3, lines.length); i++) {
                    if (namePatterns.some(pattern => pattern.test(lines[i]))) {
                        name = lines[i];
                        break;
                    }
                }
            }
            
            // Extract contact information
            const contact = [];
            const emailPattern = /[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/;
            const phonePattern = /(\+?1[-.\s]?)?\(?([0-9]{3})\)?[-.\s]?([0-9]{3})[-.\s]?([0-9]{4})/;
            const linkedinPattern = /linkedin\.com\/in\/[a-zA-Z0-9-]+/i;
            const githubPattern = /github\.com\/[a-zA-Z0-9-]+/i;
            
            lines.forEach(line => {
                if (emailPattern.test(line)) {
                    const email = line.match(emailPattern)[0];
                    contact.push(email);
                }
                if (phonePattern.test(line)) {
                    const phone = line.match(phonePattern)[0];
                    contact.push(phone);
                }
                if (linkedinPattern.test(line)) {
                    const linkedin = line.match(linkedinPattern)[0];
                    contact.push(linkedin);
                }
                if (githubPattern.test(line)) {
                    const github = line.match(githubPattern)[0];
                    contact.push(github);
                }
                // Look for location patterns
                if (line.match(/^[A-Z][a-z]+,\s*[A-Z]{2}$/) || line.match(/^[A-Z][a-z]+,\s*[A-Z][a-z]+$/)) {
                    contact.push(line);
                }
            });
            
            // Extract summary/professional summary
            let summary = '';
            let inSummarySection = false;
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i].toLowerCase();
                if (line.includes('professional summary') || line.includes('summary') || line.includes('objective')) {
                    inSummarySection = true;
                    continue;
                }
                if (inSummarySection && (line.includes('experience') || line.includes('education') || line.includes('skills'))) {
                    break;
                }
                if (inSummarySection && lines[i].length > 20) {
                    summary += lines[i] + ' ';
                }
            }
            
            // If no summary found, use default
            if (!summary.trim()) {
                summary = 'Experienced AI Engineer and Prompt Engineer with 6+ years in digital transformation, CRM optimization, and advanced analytics. Specializing in Generative AI and intelligent automation, with expertise in deploying GPT-4, LangChain, Hugging Face Transformers, and Cursor-powered workflows for AI products. Proven track record in building ATS-optimized resume platforms, voice assistants, and scalable AI solutions across AWS, Vercel, and Heroku.';
            }
            
            const data = {
                name: name,
                contact: contact.length > 0 ? contact : [
                    'San Francisco, CA',
                    '+1 (628) 358-8060', 
                    'ronith.reagan@gmail.com',
                    'linkedin.com/in/ronithreagan',
                    'github.com/Ronith2906'
                ],
                summary: summary.trim(),
                experience: parseExperience(lines),
                education: parseEducation(lines),
                skills: [
                    'GPT-4', 'LangChain', 'Hugging Face Transformers', 'OpenAI APIs', 'Whisper', 'DALLÂ·E', 'ElevenLabs',
                    'Cursor', 'n8n workflows', 'Hugging Face pipelines', 'LangChain agents',
                    'Next.js', 'React', 'Flutter/Dart', 'Tailwind CSS',
                    'SQL', 'Python', 'pandas', 'Tableau', 'AWS', 'Lambda', 'Redshift', 'S3', 'EC2', 'Databricks', 'Snowflake', 'PostgreSQL',
                    'Docker', 'Kubernetes', 'GitHub Actions', 'CI/CD', 'Vercel', 'Heroku',
                    'Salesforce', 'JIRA', 'Confluence'
                ]
            };
            
            return data;
        }

        // Parse experience section from resume content
        function parseExperience(lines) {
            const experience = [];
            let inExperienceSection = false;
            let currentJob = null;
            
            console.log('Parsing experience from lines:', lines.slice(0, 20)); // Debug log
            
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i];
                const lowerLine = line.toLowerCase();
                
                // Check if we're entering experience section
                if (lowerLine.includes('experience') && (lowerLine.includes('professional') || lowerLine.includes('work'))) {
                    inExperienceSection = true;
                    console.log('Found experience section at line:', i);
                    continue;
                }
                
                // Check if we're leaving experience section
                if (inExperienceSection && (lowerLine.includes('education') || lowerLine.includes('skills') || lowerLine.includes('projects'))) {
                    if (currentJob) {
                        experience.push(currentJob);
                    }
                    console.log('Leaving experience section at line:', i);
                    break;
                }
                
                if (inExperienceSection) {
                    // Look for job title patterns - handle various formats
                    if (line.includes('|') || line.includes('â€“') || line.includes('-') || line.includes('at ')) {
                        if (currentJob) {
                            experience.push(currentJob);
                        }
                        
                        // Handle different separators
                        let parts = [];
                        if (line.includes('|')) {
                            parts = line.split('|');
                        } else if (line.includes('â€“')) {
                            parts = line.split('â€“');
                        } else if (line.includes(' - ')) {
                            parts = line.split(' - ');
                        } else if (line.includes(' at ')) {
                            const atIndex = line.indexOf(' at ');
                            parts = [line.substring(0, atIndex), line.substring(atIndex + 4)];
                        }
                        
                        if (parts.length >= 2) {
                            currentJob = {
                                title: parts[0].trim(),
                                company: parts[1].trim(),
                                dates: parts[2] ? parts[2].trim() : '',
                                achievements: []
                            };
                            console.log('Found job:', currentJob);
                        }
                    } else if (currentJob && line.length > 10 && (line.startsWith('â€¢') || line.startsWith('-') || line.startsWith('*') || line.startsWith('â—¦'))) {
                        // This is an achievement/bullet point
                        const achievement = line.replace(/^[â€¢\-*â—¦]\s*/, '').trim();
                        if (achievement.length > 0) {
                            currentJob.achievements.push(achievement);
                        }
                    }
                }
            }
            
            // Add the last job if exists
            if (currentJob) {
                experience.push(currentJob);
            }
            
            console.log('Final experience array:', experience);
            
            // If no experience found, use default
            if (experience.length === 0) {
                console.log('No experience found, using default');
                return [
                    {
                        title: 'Data Science Intern',
                        company: 'Golden Gate University',
                        dates: 'May 2025 - Present',
                        achievements: [
                            'Built predictive ML models, designed interactive Tableau/Python dashboards, increasing stakeholder insights by 15%',
                            'Automated ETL workflows using Python and SQL, improving reporting efficiency by 20%'
                        ]
                    }
                ];
            }
            
            return experience;
        }

        // Parse education section from resume content
        function parseEducation(lines) {
            const education = [];
            let inEducationSection = false;
            
            console.log('Parsing education from lines:', lines.slice(0, 20)); // Debug log
            
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i];
                const lowerLine = line.toLowerCase();
                
                // Check if we're entering education section
                if (lowerLine.includes('education')) {
                    inEducationSection = true;
                    console.log('Found education section at line:', i);
                    continue;
                }
                
                // Check if we're leaving education section
                if (inEducationSection && (lowerLine.includes('skills') || lowerLine.includes('projects') || lowerLine.includes('certifications') || lowerLine.includes('experience'))) {
                    console.log('Leaving education section at line:', i);
                    break;
                }
                
                if (inEducationSection) {
                    // Look for degree patterns - expanded to include M.S., B.B.A., etc.
                    const degreePatterns = [
                        /M\.S\.|Master|MBA|M\.A\.|M\.Eng/i,
                        /B\.S\.|B\.A\.|B\.B\.A\.|Bachelor|B\.Tech|B\.E\./i,
                        /PhD|Ph\.D\.|Doctorate/i,
                        /Associate|A\.S\.|A\.A\./i,
                        /Diploma|Certificate/i
                    ];
                    
                    if (degreePatterns.some(pattern => pattern.test(line))) {
                        console.log('Found degree at line:', i, ':', line);
                        
                        // Parse the education line - handle formats like "M.S. Business Analytics â€“ Golden Gate University (2023â€“2025)"
                        let eduItem = {
                            degree: '',
                            institution: '',
                            dates: '',
                            gpa: '',
                            relevant_courses: ''
                        };
                        
                        // Check if the line contains all info in one line (like "M.S. Business Analytics â€“ Golden Gate University (2023â€“2025)")
                        if (line.includes('â€“') || line.includes('-')) {
                            const parts = line.split(/[â€“-]/);
                            if (parts.length >= 2) {
                                eduItem.degree = parts[0].trim();
                                const remaining = parts[1].trim();
                                
                                // Extract institution and dates from remaining part
                                const dateMatch = remaining.match(/\((\d{4}[-â€“]\d{4})\)/);
                                if (dateMatch) {
                                    eduItem.dates = dateMatch[1];
                                    eduItem.institution = remaining.replace(/\([^)]*\)/, '').trim();
                                } else {
                                    eduItem.institution = remaining;
                                }
                            }
                        } else {
                            // Multi-line format
                            eduItem.degree = line.trim();
                            
                            // Look for institution and dates in next few lines
                            for (let j = i + 1; j < Math.min(i + 4, lines.length); j++) {
                                const nextLine = lines[j];
                                if (nextLine.includes('University') || nextLine.includes('College') || nextLine.includes('Institute') || nextLine.includes('Academy')) {
                                    eduItem.institution = nextLine.trim();
                                } else if (nextLine.match(/\d{4}[-â€“]\d{4}/) || nextLine.match(/\(\d{4}[-â€“]\d{4}\)/)) {
                                    eduItem.dates = nextLine.replace(/[()]/g, '').trim();
                                }
                            }
                        }
                        
                        console.log('Parsed education item:', eduItem);
                        education.push(eduItem);
                    }
                }
            }
            
            console.log('Final education array:', education);
            
            // If no education found, use default
            if (education.length === 0) {
                console.log('No education found, using default');
                return [
                    {
                        degree: 'M.S. Business Analytics',
                        institution: 'Golden Gate University',
                        dates: '2023â€“2025',
                        gpa: '',
                        relevant_courses: ''
                    },
                    {
                        degree: 'B.B.A.',
                        institution: 'Loyola Academy, Hyderabad',
                        dates: '2014â€“2017',
                        gpa: '',
                        relevant_courses: ''
                    }
                ];
            }
            
            return education;
        }

        // Parse resume content from uploaded file
        function parseResumeContent(content) {
            // Clean up the content - remove extra whitespace and normalize
            const cleanContent = content.replace(/\s+/g, ' ').trim();
            const lines = cleanContent.split(/[.\n]/).map(line => line.trim()).filter(line => line.length > 0);
            
            let parsedContent = '';
            let currentSection = '';
            let inExperience = false;
            let inEducation = false;
            let inSkills = false;
            let inSummary = false;
            
            // First, try to identify sections by looking for common patterns
            const experienceKeywords = ['experience', 'work history', 'employment', 'professional experience', 'career', 'work experience'];
            const educationKeywords = ['education', 'academic', 'degree', 'university', 'college', 'school', 'qualification'];
            const skillsKeywords = ['skill', 'technical', 'competenc', 'expertise', 'proficiency', 'abilities'];
            const summaryKeywords = ['summary', 'objective', 'profile', 'about', 'overview', 'introduction'];
            
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i];
                const lowerLine = line.toLowerCase();
                
                // Detect sections with more flexible matching
                if (experienceKeywords.some(keyword => lowerLine.includes(keyword))) {
                    currentSection = 'experience';
                    inExperience = true;
                    inEducation = false;
                    inSkills = false;
                    inSummary = false;
                    parsedContent += `<p><strong>Professional Experience</strong></p>`;
                    continue;
                }
                
                if (educationKeywords.some(keyword => lowerLine.includes(keyword))) {
                    currentSection = 'education';
                    inExperience = false;
                    inEducation = true;
                    inSkills = false;
                    inSummary = false;
                    parsedContent += `<p><strong>Education</strong></p>`;
                    continue;
                }
                
                if (skillsKeywords.some(keyword => lowerLine.includes(keyword))) {
                    currentSection = 'skills';
                    inExperience = false;
                    inEducation = false;
                    inSkills = true;
                    inSummary = false;
                    parsedContent += `<p><strong>Key Skills</strong></p>`;
                    continue;
                }
                
                if (summaryKeywords.some(keyword => lowerLine.includes(keyword))) {
                    currentSection = 'summary';
                    inExperience = false;
                    inEducation = false;
                    inSkills = false;
                    inSummary = true;
                    parsedContent += `<p><strong>Professional Summary</strong></p>`;
                    continue;
                }
                
                // Process content based on current section
                if (inExperience) {
                    // Look for job titles and company names
                    if (line.match(/\b(Engineer|Analyst|Manager|Developer|Designer|Coordinator|Specialist|Consultant|Director|Lead|Senior|Junior|Associate|Executive|Officer|Representative|Assistant|Supervisor|Administrator|Technician|Advisor|Intern|Trainee|Apprentice)\b/i)) {
                        parsedContent += `<p><strong>${line}</strong></p>`;
                    } else if (line.match(/\b(202[0-9]|202[0-9]|201[0-9]|20[0-9][0-9])\b/)) {
                        // Likely a date or time period
                        parsedContent += `<p><em>${line}</em></p>`;
                    } else if (line.startsWith('â€¢') || line.startsWith('-') || line.startsWith('*') || line.match(/^\d+\./)) {
                        parsedContent += `<ul><li>${line.replace(/^[â€¢\-*\d+\.]\s*/, '')}</li></ul>`;
                    } else if (line.length > 15) {
                        parsedContent += `<p>${line}</p>`;
                    }
                } else if (inEducation) {
                    if (line.match(/\b(Bachelor|Master|PhD|Doctorate|Degree|Certificate|Diploma|Associate|B\.S\.|M\.S\.|B\.A\.|M\.A\.|B\.E\.|M\.E\.|B\.Tech|M\.Tech)\b/i)) {
                        parsedContent += `<p><strong>${line}</strong></p>`;
                    } else if (line.length > 10) {
                        parsedContent += `<p>${line}</p>`;
                    }
                } else if (inSkills) {
                    if (line.includes('â€¢') || line.includes(',') || line.includes('|') || line.includes(';')) {
                        const skills = line.split(/[â€¢,|;]/).map(skill => skill.trim()).filter(skill => skill.length > 0);
                        parsedContent += `<p>${skills.join(' â€¢ ')}</p>`;
                    } else if (line.length > 3) {
                        parsedContent += `<p>${line}</p>`;
                    }
                } else if (inSummary) {
                    if (line.length > 20) {
                        parsedContent += `<p>${line}</p>`;
                    }
                } else {
                    // Default section - try to identify content type
                    if (line.length > 25) {
                        // Check if it looks like a job title or important content
                        if (line.match(/\b(Engineer|Analyst|Manager|Developer|Designer|Coordinator|Specialist|Consultant|Director|Lead|Senior|Junior|Associate|Executive|Officer|Representative|Assistant|Supervisor|Administrator|Technician|Advisor|Intern|Trainee|Apprentice)\b/i)) {
                            parsedContent += `<p><strong>${line}</strong></p>`;
                        } else {
                            parsedContent += `<p>${line}</p>`;
                        }
                    }
                }
            }
            
            // If no content was parsed, show the raw content
            if (parsedContent.trim().length === 0) {
                parsedContent = `<div class="raw-content"><pre>${content}</pre></div>`;
            }
            
            return parsedContent;
        }

        // Generate cover letter
        function generateCoverLetter() {
            const generateBtn = document.getElementById('generateCoverLetterBtn');
            generateBtn.textContent = 'Generating...';
            generateBtn.disabled = true;

            // Get form data
            const targetRole = document.getElementById('clTargetRole')?.value || 'AI Engineer';
            const targetCompany = document.getElementById('clTargetCompany')?.value || 'Your Company';
            const jobDescription = document.getElementById('clJobDescription')?.value || '';
            const companyInfo = document.getElementById('clCompanyInfo')?.value || '';
            
            // Get selected tone
            const selectedTone = document.querySelector('input[name="clTone"]:checked')?.value || 'professional';
            
            console.log('Generating cover letter for:', { targetRole, targetCompany, selectedTone });

            // Generate professional cover letter
            setTimeout(() => {
                const generatedCoverLetter = document.getElementById('generatedCoverLetter');
                generatedCoverLetter.style.display = 'block';
                
                // Create personalized cover letter based on role and company
                const coverLetterContent = createPersonalizedCoverLetter(targetRole, targetCompany, jobDescription, companyInfo, selectedTone);
                
                generatedCoverLetter.innerHTML = `
                    <h4>Your Tailored Cover Letter (${selectedTone} tone)</h4>
                    <div class="content-preview">
                        ${coverLetterContent}
                    </div>
                    <div class="content-actions">
                        <button class="action-btn" onclick="downloadCoverLetter('pdf')">Download PDF</button>
                        <button class="action-btn" onclick="downloadCoverLetter('word')">Download Word</button>
                        <button class="action-btn" onclick="copyCoverLetter()">Copy to Clipboard</button>
                        <button class="action-btn primary" onclick="editCoverLetter()">Edit Cover Letter</button>
                    </div>
                `;

                generateBtn.textContent = 'Generate Cover Letter';
                generateBtn.disabled = false;

                // If in guided mode, advance to next step
                if (isGuidedMode && currentStep === 6) {
                    setTimeout(() => {
                        nextStep();
                    }, 2000);
                }
            }, 2000);
        }

        function createPersonalizedCoverLetter(role, company, jobDescription, companyInfo, tone) {
            const currentDate = new Date().toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            // Extract key skills from job description
            const keySkills = extractKeySkillsFromJD(jobDescription);
            const relevantExperience = getRelevantExperience(role);
            
            let greeting = "Dear Hiring Manager,";
            if (companyInfo && companyInfo.toLowerCase().includes('recruiter')) {
                greeting = "Dear Hiring Team,";
            }
            
            let openingParagraph = "";
            let bodyParagraphs = "";
            let closingParagraph = "";
            
            // Customize based on tone
            if (tone === 'enthusiastic') {
                openingParagraph = `I am thrilled to apply for the ${role} position at ${company}! With my passion for AI engineering and proven track record in developing innovative solutions, I am excited about the opportunity to contribute to your team's success.`;
                
                bodyParagraphs = `
                    <p>My experience spans 6+ years in AI and machine learning, with particular expertise in:</p>
                    <ul>
                        <li><strong>Generative AI & LLMs:</strong> Extensive experience with GPT-4, LangChain, and Hugging Face Transformers, building conversational AI systems and automated workflows</li>
                        <li><strong>Full-Stack Development:</strong> Proficient in Next.js, React, Python, and modern web technologies, with experience deploying scalable applications on AWS and Vercel</li>
                        <li><strong>Data Analytics & Visualization:</strong> Advanced skills in Tableau, Python (pandas, scikit-learn), and SQL, with a track record of improving business insights by 20%+</li>
                        <li><strong>Cloud & DevOps:</strong> Hands-on experience with AWS services (Lambda, Redshift, S3, EC2), CI/CD pipelines, and containerization</li>
                    </ul>
                    
                    <p>In my current role as a Data Science Intern at Golden Gate University, I've built predictive ML models and interactive dashboards that increased stakeholder insights by 15%. Previously, as a Business Analyst at Deloitte, I led Salesforce-Databricks integrations and developed Tableau dashboards that boosted reporting efficiency by 20%.</p>
                    
                    <p>What excites me most about ${company} is your commitment to innovation and cutting-edge technology. ${companyInfo ? `I'm particularly impressed by ${companyInfo.toLowerCase()}. ` : ''}I'm eager to bring my expertise in AI engineering and passion for solving complex problems to your team.</p>
                `;
                
                closingParagraph = `I would love the opportunity to discuss how my skills and enthusiasm can contribute to ${company}'s continued success. Thank you for considering my application!`;
                
            } else if (tone === 'confident') {
                openingParagraph = `I am writing to express my strong interest in the ${role} position at ${company}. With my comprehensive background in AI engineering and data analytics, I am confident that I can deliver exceptional results for your organization.`;
                
                bodyParagraphs = `
                    <p>My qualifications include:</p>
                    <ul>
                        <li><strong>Advanced AI Expertise:</strong> 6+ years developing and deploying AI solutions using GPT-4, LangChain, and Hugging Face Transformers</li>
                        <li><strong>Proven Business Impact:</strong> Delivered 25% improvement in user adoption and 20% increase in reporting efficiency through strategic AI implementations</li>
                        <li><strong>Technical Leadership:</strong> Led cross-functional teams in CRM optimization and data integration projects at Deloitte and Smartried Software</li>
                        <li><strong>Cloud & Data Mastery:</strong> Expert-level proficiency in AWS, Snowflake, Databricks, and modern data stack technologies</li>
                    </ul>
                    
                    <p>My recent achievements include building automated ETL workflows that improved reporting efficiency by 20% and developing interactive Tableau dashboards that increased stakeholder insights by 15%. These results demonstrate my ability to translate complex technical concepts into business value.</p>
                    
                    <p>${company} represents an ideal environment for me to leverage my technical expertise and drive innovation. ${companyInfo ? `Your recent initiatives in ${companyInfo.toLowerCase()} align perfectly with my experience and interests. ` : ''}I am prepared to make an immediate and significant contribution to your team's objectives.</p>
                `;
                
                closingParagraph = `I am confident that my technical skills and proven track record make me an ideal candidate for this role. I look forward to discussing how I can contribute to ${company}'s success.`;
                
            } else { // professional tone
                openingParagraph = `I am writing to apply for the ${role} position at ${company}. With my extensive background in AI engineering and data analytics, I believe I am well-suited to contribute to your team's objectives.`;
                
                bodyParagraphs = `
                    <p>My professional experience includes:</p>
                    <ul>
                        <li><strong>AI & Machine Learning:</strong> 6+ years developing and implementing AI solutions using GPT-4, LangChain, and Hugging Face Transformers</li>
                        <li><strong>Data Analytics:</strong> Advanced proficiency in Python, SQL, Tableau, and data visualization tools, with experience in ETL workflows and business intelligence</li>
                        <li><strong>Cloud Technologies:</strong> Extensive experience with AWS services, including Lambda, Redshift, S3, and EC2, as well as modern deployment practices</li>
                        <li><strong>Business Analysis:</strong> Proven ability to translate business requirements into technical solutions and drive process improvements</li>
                    </ul>
                    
                    <p>In my current position as a Data Science Intern at Golden Gate University, I have successfully built predictive ML models and automated ETL workflows that improved reporting efficiency by 20%. My previous experience at Deloitte involved leading Salesforce-Databricks integrations and developing Tableau dashboards that enhanced business insights.</p>
                    
                    <p>I am particularly interested in ${company} because of your reputation for innovation and excellence in technology. ${companyInfo ? `Your focus on ${companyInfo.toLowerCase()} aligns well with my professional interests and experience. ` : ''}I am eager to contribute my technical expertise and analytical skills to support your organization's goals.</p>
                `;
                
                closingParagraph = `I would welcome the opportunity to discuss how my qualifications and experience can contribute to ${company}'s continued success. Thank you for your consideration.`;
            }
            
            return `
                <div style="font-family: Arial, sans-serif; line-height: 1.6; color: #333;">
                    <p style="margin-bottom: 20px;">${currentDate}</p>
                    
                    <p style="margin-bottom: 15px;">${greeting}</p>
                    
                    <p style="margin-bottom: 15px;">${openingParagraph}</p>
                    
                    ${bodyParagraphs}
                    
                    <p style="margin-bottom: 15px;">${closingParagraph}</p>
                    
                    <p style="margin-bottom: 20px;">
                        Sincerely,<br>
                        Sylvester Ronith Reagan<br>
                        San Francisco, CA<br>
                        +1 (628) 358-8060<br>
                        ronith.reagan@gmail.com
                    </p>
                </div>
            `;
        }

        function extractKeySkillsFromJD(jobDescription) {
            if (!jobDescription) return [];
            
            const commonSkills = [
                'Python', 'JavaScript', 'React', 'Node.js', 'AWS', 'Machine Learning', 'AI', 'Data Analysis',
                'SQL', 'Tableau', 'Power BI', 'Cloud Computing', 'DevOps', 'Docker', 'Kubernetes',
                'Git', 'CI/CD', 'Agile', 'Scrum', 'Project Management', 'Leadership', 'Communication'
            ];
            
            const foundSkills = commonSkills.filter(skill => 
                jobDescription.toLowerCase().includes(skill.toLowerCase())
            );
            
            return foundSkills.slice(0, 5); // Return top 5 relevant skills
        }

        function getRelevantExperience(role) {
            const roleLower = role.toLowerCase();
            
            if (roleLower.includes('data') || roleLower.includes('analyst')) {
                return "data analysis and business intelligence";
            } else if (roleLower.includes('ai') || roleLower.includes('machine learning')) {
                return "artificial intelligence and machine learning";
            } else if (roleLower.includes('engineer') || roleLower.includes('developer')) {
                return "software engineering and development";
            } else if (roleLower.includes('manager') || roleLower.includes('lead')) {
                return "technical leadership and team management";
            } else {
                return "technology and business solutions";
            }
        }

        // Premium Utility functions for generated content
        function downloadResume(format = 'pdf') {
            const fileName = `Sylvester_Ronith_Reagan_Resume_${new Date().toISOString().split('T')[0]}`;
            const resumeElement = document.querySelector('#generatedResume .content-preview');
            
            if (!resumeElement) {
                alert('No resume content found. Please generate a resume first.');
                return;
            }

            if (format === 'pdf') {
                downloadAsPDF(resumeElement, fileName);
            } else if (format === 'word' || format === 'docx') {
                downloadAsWord(resumeElement, fileName);
            }
        }

        function downloadAsPDFPrint(element, fileName) {
            // Create a new window for printing
            const printWindow = window.open('', '_blank');
            
            // Extract only the resume content, not the entire element
            let content = '';
            const resumeContent = element.querySelector('.ats-resume');
            
            if (resumeContent) {
                // Get only the resume content
                content = resumeContent.innerHTML;
            } else {
                // Fallback: get text content and format it
                const textContent = element.innerText || element.textContent || '';
                const lines = textContent.split('\n').filter(line => line.trim().length > 0);
                content = lines.map(line => `<p>${line.trim()}</p>`).join('');
            }
            
            printWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>${fileName}</title>
                    <style>
                        body { 
                            font-family: Arial, sans-serif; 
                            font-size: 12pt; 
                            line-height: 1.4; 
                            color: #000; 
                            margin: 1in;
                            max-width: 8.5in;
                            background: white;
                        }
                        .ats-resume { 
                            font-family: Arial, sans-serif; 
                            font-size: 12pt; 
                            line-height: 1.4; 
                            color: #000; 
                        }
                        .resume-name { 
                            font-size: 20pt; 
                            font-weight: bold; 
                            color: #000; 
                            margin-bottom: 10pt; 
                            text-align: center;
                        }
                        .resume-contact { 
                            font-size: 11pt; 
                            color: #000; 
                            margin-bottom: 15pt; 
                            text-align: center;
                        }
                        .section-title { 
                            font-size: 14pt; 
                            font-weight: bold; 
                            color: #000; 
                            margin-top: 15pt; 
                            margin-bottom: 8pt; 
                            border-bottom: 1pt solid #000; 
                            padding-bottom: 3pt; 
                        }
                        .section-content { 
                            font-size: 11pt; 
                            color: #000; 
                            margin-bottom: 10pt; 
                        }
                        .experience-item, .education-item { 
                            margin-bottom: 12pt; 
                        }
                        .job-header { 
                            font-weight: bold; 
                            color: #000; 
                        }
                        .job-dates { 
                            font-style: italic; 
                            color: #000; 
                        }
                        .achievements { 
                            margin-top: 5pt; 
                        }
                        .achievements li { 
                            margin-bottom: 3pt; 
                            color: #000; 
                        }
                        .skills-categories { 
                            margin-bottom: 10pt; 
                        }
                        .skill-category { 
                            margin-bottom: 5pt; 
                        }
                        .skill-category strong { 
                            font-weight: bold; 
                            color: #000; 
                        }
                        h1, h2, h3, h4, h5, h6 { 
                            color: #000; 
                            font-weight: bold; 
                        }
                        p, div, span { 
                            color: #000; 
                        }
                        ul, ol { 
                            margin: 10pt 0; 
                            padding-left: 20pt; 
                        }
                        li { 
                            margin-bottom: 3pt; 
                            color: #000; 
                        }
                        @media print {
                            body { margin: 0; }
                            .no-print { display: none; }
                        }
                    </style>
                </head>
                <body>
                    <div class="ats-resume">
                        ${content}
                    </div>
                </body>
                </html>
            `);
            
            printWindow.document.close();
            
            // Wait for content to load, then trigger print
            setTimeout(() => {
                printWindow.print();
                printWindow.close();
            }, 500);
        }

        function downloadAsPDF(element, fileName) {
            try {
                console.log('Starting PDF generation...');
                
                // Use the print method as primary method since it's more reliable
                downloadAsPDFPrint(element, fileName);
                
            } catch (error) {
                console.error('Error in downloadAsPDF:', error);
                alert('Error generating PDF: ' + error.message + '. Please try again.');
            }
        }

        function downloadAsWord(element, fileName) {
            // Get the text content
            const textContent = element.innerText;
            
            // Create a simple HTML document for Word
            const htmlContent = `
                <!DOCTYPE html>
                <html>
                <head>
                    <meta charset="UTF-8">
                    <style>
                        body { font-family: Arial, sans-serif; font-size: 12pt; line-height: 1.4; color: #000000; margin: 1in; }
                        h1 { font-size: 24pt; font-weight: bold; color: #000000; margin-bottom: 10pt; }
                        h2 { font-size: 14pt; font-weight: bold; color: #000000; margin-top: 15pt; margin-bottom: 8pt; border-bottom: 1pt solid #000000; padding-bottom: 3pt; }
                        p { margin-bottom: 10pt; }
                        ul { margin-bottom: 10pt; }
                        li { margin-bottom: 3pt; }
                    </style>
                </head>
                <body>
                    ${element.innerHTML}
                </body>
                </html>
            `;
            
            // Create blob and download
            const blob = new Blob([htmlContent], { type: 'application/msword' });
            saveAs(blob, `${fileName}.doc`);
        }

        // Cover letter download functions
        function downloadCoverLetter(format = 'pdf') {
            console.log('downloadCoverLetter called with format:', format);
            const fileName = `Sylvester_Ronith_Reagan_Cover_Letter_${new Date().toISOString().split('T')[0]}`;
            const coverLetterElement = document.querySelector('#generatedCoverLetter .content-preview');
            
            console.log('Cover letter element found:', coverLetterElement);
            
            if (!coverLetterElement) {
                alert('No cover letter content found. Please generate a cover letter first.');
                return;
            }

            if (format === 'pdf') {
                console.log('Calling downloadCoverLetterAsPDF...');
                downloadCoverLetterAsPDF(coverLetterElement, fileName);
            } else if (format === 'word' || format === 'docx') {
                console.log('Calling downloadCoverLetterAsWord...');
                downloadCoverLetterAsWord(coverLetterElement, fileName);
            }
        }

        function downloadCoverLetterAsPDFPrint(element, fileName) {
            // Create a new window for printing
            const printWindow = window.open('', '_blank');
            
            // Extract only the cover letter content, not the entire element
            let content = '';
            const coverLetterContent = element.querySelector('div[style*="font-family"]');
            
            if (coverLetterContent) {
                // Get only the cover letter content
                content = coverLetterContent.innerHTML;
            } else {
                // Fallback: get text content and format it
                const textContent = element.innerText || element.textContent || '';
                const lines = textContent.split('\n').filter(line => line.trim().length > 0);
                content = lines.map(line => `<p>${line.trim()}</p>`).join('');
            }
            
            printWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>${fileName}</title>
                    <style>
                        body { 
                            font-family: Arial, sans-serif; 
                            font-size: 12pt; 
                            line-height: 1.6; 
                            color: #000; 
                            margin: 1in;
                            max-width: 8.5in;
                            background: white;
                        }
                        p { 
                            margin-bottom: 12pt; 
                            color: #000;
                        }
                        ul { 
                            margin-bottom: 12pt; 
                            padding-left: 20pt;
                        }
                        li { 
                            margin-bottom: 6pt; 
                            color: #000;
                        }
                        strong { 
                            font-weight: bold; 
                            color: #000;
                        }
                        h1, h2, h3, h4, h5, h6 { 
                            color: #000; 
                            font-weight: bold; 
                        }
                        div, span { 
                            color: #000; 
                        }
                        @media print {
                            body { margin: 0; }
                            .no-print { display: none; }
                        }
                    </style>
                </head>
                <body>
                    ${content}
                </body>
                </html>
            `);
            
            printWindow.document.close();
            
            // Wait for content to load, then trigger print
            setTimeout(() => {
                printWindow.print();
                printWindow.close();
            }, 500);
        }

        function downloadCoverLetterAsPDF(element, fileName) {
            try {
                console.log('Starting cover letter PDF generation...');
                
                // Use the print method as primary method since it's more reliable
                downloadCoverLetterAsPDFPrint(element, fileName);
                
            } catch (error) {
                console.error('Error in downloadCoverLetterAsPDF:', error);
                alert('Error generating cover letter PDF: ' + error.message + '. Please try again.');
            }
        }

        function downloadCoverLetterAsWord(element, fileName) {
            // Get the text content
            const textContent = element.innerText;
            
            // Create a simple HTML document for Word
            const htmlContent = `
                <!DOCTYPE html>
                <html>
                <head>
                    <meta charset="UTF-8">
                    <style>
                        body { font-family: Arial, sans-serif; font-size: 12pt; line-height: 1.6; color: #000000; margin: 1in; }
                        p { margin-bottom: 12pt; }
                        ul { margin-bottom: 12pt; }
                        li { margin-bottom: 6pt; }
                        strong { font-weight: bold; }
                    </style>
                </head>
                <body>
                    ${element.innerHTML}
                </body>
                </html>
            `;
            
            // Create blob and download
            const blob = new Blob([htmlContent], { type: 'application/msword' });
            saveAs(blob, `${fileName}.doc`);
        }

        function copyCoverLetter() {
            const content = document.querySelector('#generatedCoverLetter .content-preview').innerText;
            navigator.clipboard.writeText(content).then(() => {
                alert('Cover letter copied to clipboard!');
            }).catch(err => {
                console.error('Error copying cover letter:', err);
                alert('Error copying cover letter. Please try again.');
            });
        }

        function editCoverLetter() {
            alert('Cover letter editing feature coming soon! For now, you can copy the text and edit it in your preferred word processor.');
        }

        function copyResume() {
            const content = document.querySelector('#generatedResume .content-preview').innerText;
            navigator.clipboard.writeText(content).then(() => {
                // Show success message
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                btn.style.background = 'var(--success)';
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '';
                }, 2000);
            });
        }

        function editResume() {
            alert('Resume editing functionality would be implemented here');
        }


        function copyCoverLetter() {
            const content = document.querySelector('#generatedCoverLetter .content-preview').innerText;
            navigator.clipboard.writeText(content).then(() => {
                // Show success message
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                btn.style.background = 'var(--success)';
                btn.style.color = 'white';
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '';
                    btn.style.color = '';
                }, 2000);
            });
        }

        function editCoverLetter() {
            alert('Cover letter editing functionality would be implemented here');
        }

        // Drag and drop functionality
        const uploadArea = document.querySelector('.upload-area');
        
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });
        
        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('dragover');
        });
        
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                document.getElementById('resumeFile').files = files;
                handleFileUpload({ target: { files: files } });
            }
        });

        // AI Chat functionality
        function sendChatMessage() {
            const chatInput = document.getElementById('chatInput');
            const message = chatInput.value.trim();
            
            if (!message) return;
            
            // Add user message
            addChatMessage(message, 'user');
            chatInput.value = '';
            
            // Simulate AI response (replace with actual API call)
            setTimeout(() => {
                const aiResponse = generateAIResponse(message);
                addChatMessage(aiResponse, 'ai');
            }, 1000);
        }

        function addChatMessage(content, sender) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            
            messageDiv.innerHTML = `
                <div class="message-content">
                    <p>${content}</p>
                </div>
            `;
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function generateAIResponse(userMessage) {
            const responses = {
                'career': 'For career transitions, I recommend starting with a skills assessment, identifying transferable skills, and building a targeted learning plan.',
                'salary': 'When negotiating salary, research market rates, highlight your achievements, and be prepared to discuss your value proposition.',
                'network': 'Effective networking involves attending industry events, joining professional groups, and maintaining genuine relationships.',
                'skills': 'Focus on both technical and soft skills. Consider online courses, certifications, and hands-on projects to build your portfolio.',
                'interview': 'Practice common questions, prepare STAR method responses, and research the company thoroughly before interviews.'
            };
            
            const lowerMessage = userMessage.toLowerCase();
            for (const [key, response] of Object.entries(responses)) {
                if (lowerMessage.includes(key)) {
                    return response;
                }
            }
            
            return 'That\'s a great question! I\'d be happy to help you with career advice. Could you provide more specific details about what you\'d like to know?';
        }

        // Enhanced Interview Prep functionality
        let currentQuestion = 0;
        let interviewQuestions = [];
        let userAnswers = [];
        let isVideoMode = false;
        let videoStream = null;
        let analysisInterval = null;

        function startInterview() {
            const interviewMode = document.querySelector('input[name="interviewMode"]:checked').value;
            const roleType = document.getElementById('roleType').value;
            const experienceLevel = document.getElementById('experienceLevel').value;
            const industry = document.getElementById('industry').value;
            const interviewType = document.getElementById('interviewType').value;
            const questionCount = parseInt(document.getElementById('questionCount').value);
            
            // Check which input method is active
            const textTab = document.getElementById('textTab');
            const isTextInput = textTab.classList.contains('active');
            
            let jobDescription = '';
            
            if (isTextInput) {
                // Get text input
                jobDescription = document.getElementById('jdTextInput').value.trim();
                if (!jobDescription) {
                    alert('Please enter a job description to get personalized interview questions tailored to the specific role.');
                    return;
                }
            } else {
                // Get file input
            const jdFile = document.getElementById('jdFile').files[0];
                if (!jdFile) {
                    alert('Please upload a job description to get personalized interview questions tailored to the specific role.');
                    return;
                }
                
                // For file input, we'll process it in the next step
                processJobDescriptionForInterview(jdFile, roleType, experienceLevel, industry, interviewType, questionCount, interviewMode);
                return;
            }
            
            // Show loading state
            const startBtn = document.querySelector('.start-interview-btn');
            const originalText = startBtn.innerHTML;
            startBtn.innerHTML = '<div class="loading-spinner"></div> Analyzing Job Description...';
            startBtn.disabled = true;
            
            // Process text job description and generate tailored questions
            processTextJobDescriptionForInterview(jobDescription, roleType, experienceLevel, industry, interviewType, questionCount, interviewMode);
        }

        // Switch between text input and file upload methods
        function switchInputMethod(method) {
            const textTab = document.getElementById('textTab');
            const fileTab = document.getElementById('fileTab');
            const textMethod = document.getElementById('textInputMethod');
            const fileMethod = document.getElementById('fileInputMethod');
            
            if (method === 'text') {
                textTab.classList.add('active');
                fileTab.classList.remove('active');
                textMethod.style.display = 'block';
                fileMethod.style.display = 'none';
            } else {
                textTab.classList.remove('active');
                fileTab.classList.add('active');
                textMethod.style.display = 'none';
                fileMethod.style.display = 'block';
            }
        }

        // Process text job description for interview prep
        function processTextJobDescriptionForInterview(jobDescriptionText, roleType, experienceLevel, industry, interviewType, questionCount, interviewMode) {
            console.log('ðŸ” Processing text job description for interview prep...');
            console.log('ðŸ“ Job description text:', jobDescriptionText.substring(0, 200) + '...');
            
            try {
                // Parse job description to extract key information
                const jobInfo = parseJobDescription(jobDescriptionText);
                console.log('ðŸ“‹ Extracted job information:', jobInfo);
                
                // Generate tailored interview questions based on job description
                interviewQuestions = generateTailoredInterviewQuestions(jobInfo, roleType, experienceLevel, industry, interviewType, questionCount);
                console.log('ðŸŽ¯ Generated interview questions:', interviewQuestions);
                console.log('ðŸŽ¯ Number of questions generated:', interviewQuestions.length);
                
                // Initialize interview session
            currentQuestion = 0;
            userAnswers = [];
            isVideoMode = (interviewMode === 'video');
            
                // Hide setup and start interview
            document.getElementById('interviewSetup').style.display = 'none';
            
            if (isVideoMode) {
                startVideoInterview();
            } else {
                startTextInterview();
            }
                
            } catch (error) {
                console.error('Error processing job description:', error);
                alert('Error processing job description. Please try again with a different format.');
                
                // Reset button
                const startBtn = document.querySelector('.start-interview-btn');
                startBtn.innerHTML = 'Start Interview Practice';
                startBtn.disabled = false;
            }
        }

        // Enhanced Job Description Processing for Interview Prep
        function processJobDescriptionForInterview(file, roleType, experienceLevel, industry, interviewType, questionCount, interviewMode) {
            console.log('ðŸ” Processing job description for interview prep...');
            
            const reader = new FileReader();
            
            reader.onload = function(e) {
                try {
                    let content = e.target.result;
                    
                    // Handle different file types
                    if (file.type === 'application/pdf') {
                        // For PDF files, we'll use a simplified approach
                        content = extractTextFromPDF(content);
                    }
                    
                    // Parse job description to extract key information
                    const jobInfo = parseJobDescription(content);
                    console.log('ðŸ“‹ Extracted job information:', jobInfo);
                    
                    // Generate tailored interview questions based on job description
                    interviewQuestions = generateTailoredInterviewQuestions(jobInfo, roleType, experienceLevel, industry, interviewType, questionCount);
                    console.log('ðŸŽ¯ Generated interview questions:', interviewQuestions);
                    
                    // Initialize interview session
                    currentQuestion = 0;
                    userAnswers = [];
                    isVideoMode = (interviewMode === 'video');
                    
                    // Hide setup and start interview
                    document.getElementById('interviewSetup').style.display = 'none';
                    
                    if (isVideoMode) {
                        startVideoInterview();
                    } else {
                        startTextInterview();
                    }
                    
                } catch (error) {
                    console.error('Error processing job description:', error);
                    alert('Error processing job description. Please try again with a different file.');
                    
                    // Reset button
                    const startBtn = document.querySelector('.start-interview-btn');
                    startBtn.innerHTML = 'Start Interview Practice';
                    startBtn.disabled = false;
                }
            };
            
            reader.onerror = function() {
                console.error('Error reading file');
                alert('Error reading file. Please try again.');
                
                // Reset button
                const startBtn = document.querySelector('.start-interview-btn');
                startBtn.innerHTML = 'Start Interview Practice';
                startBtn.disabled = false;
            };
            
            // Read file based on type
            if (file.type === 'application/pdf') {
                reader.readAsArrayBuffer(file);
            } else {
                reader.readAsText(file);
            }
        }

        // Parse job description to extract key information
        function parseJobDescription(content) {
            console.log('ðŸ” Parsing job description content...');
            console.log('ðŸ“„ Content length:', content.length);
            
            const lines = content.split('\n').map(line => line.trim()).filter(line => line.length > 0);
            console.log('ðŸ“„ Number of lines:', lines.length);
            
            const jobInfo = {
                title: '',
                company: '',
                requirements: [],
                responsibilities: [],
                skills: [],
                experience: '',
                education: '',
                location: '',
                type: ''
            };
            
            // Extract job title (usually in first few lines)
            for (let i = 0; i < Math.min(5, lines.length); i++) {
                const line = lines[i].toLowerCase();
                if (line.includes('title:') || line.includes('position:') || line.includes('role:')) {
                    jobInfo.title = lines[i].split(':')[1]?.trim() || '';
                } else if (lines[i].length > 5 && lines[i].length < 100 && !line.includes('description') && !line.includes('requirements')) {
                    jobInfo.title = lines[i];
                }
            }
            
            // Extract company name
            for (let i = 0; i < Math.min(3, lines.length); i++) {
                const line = lines[i];
                if (line.length > 2 && line.length < 50 && !line.toLowerCase().includes('job') && !line.toLowerCase().includes('description')) {
                    jobInfo.company = line;
                    break;
                }
            }
            
            // Extract requirements and skills
            let inRequirements = false;
            let inResponsibilities = false;
            
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i].toLowerCase();
                
                if (line.includes('requirements') || line.includes('qualifications') || line.includes('must have')) {
                    inRequirements = true;
                    inResponsibilities = false;
                    continue;
                }
                
                if (line.includes('responsibilities') || line.includes('duties') || line.includes('what you\'ll do')) {
                    inResponsibilities = true;
                    inRequirements = false;
                    continue;
                }
                
                if (line.includes('experience') && (line.includes('years') || line.includes('+') || line.includes('minimum'))) {
                    jobInfo.experience = lines[i];
                }
                
                if (line.includes('education') || line.includes('degree') || line.includes('bachelor') || line.includes('master')) {
                    jobInfo.education = lines[i];
                }
                
                if (line.includes('location') || line.includes('remote') || line.includes('hybrid')) {
                    jobInfo.location = lines[i];
                }
                
                if (line.includes('full-time') || line.includes('part-time') || line.includes('contract')) {
                    jobInfo.type = lines[i];
                }
                
                // Extract bullet points and requirements
                if (inRequirements && (line.startsWith('â€¢') || line.startsWith('-') || line.startsWith('*') || line.startsWith('â—¦'))) {
                    jobInfo.requirements.push(lines[i].replace(/^[â€¢\-*â—¦]\s*/, ''));
                }
                
                if (inResponsibilities && (line.startsWith('â€¢') || line.startsWith('-') || line.startsWith('*') || line.startsWith('â—¦'))) {
                    jobInfo.responsibilities.push(lines[i].replace(/^[â€¢\-*â—¦]\s*/, ''));
                }
                
                // Extract technical skills
                const techKeywords = ['javascript', 'python', 'java', 'react', 'angular', 'vue', 'node', 'sql', 'mongodb', 'aws', 'azure', 'docker', 'kubernetes', 'git', 'agile', 'scrum'];
                if (techKeywords.some(keyword => line.includes(keyword))) {
                    jobInfo.skills.push(lines[i]);
                }
            }
            
            console.log('ðŸ“‹ Final parsed job info:', jobInfo);
            return jobInfo;
        }

        // Generate tailored interview questions based on job description
        function generateTailoredInterviewQuestions(jobInfo, roleType, experienceLevel, industry, interviewType, questionCount) {
            console.log('ðŸŽ¯ Generating tailored interview questions...');
            console.log('Job Info:', jobInfo);
            console.log('Question Count:', questionCount);
            
            const questions = [];
            
            // Always add a test question first to ensure the system works
            questions.push({
                text: "Tell me about yourself and why you're interested in this role.",
                category: 'General',
                difficulty: 'Easy'
            });
            console.log('Added test question:', questions[0]);
            
            // Role-specific questions based on job title
            if (jobInfo.title && (jobInfo.title.toLowerCase().includes('engineer') || jobInfo.title.toLowerCase().includes('developer'))) {
                const question = {
                    text: `I see you're applying for a ${jobInfo.title} position. Can you walk me through your experience with the technical stack mentioned in our job description?`,
                    category: 'Technical',
                    difficulty: 'Medium'
                };
                questions.push(question);
                console.log('Added Technical question:', question);
            }
            
            if (jobInfo.title.toLowerCase().includes('manager') || jobInfo.title.toLowerCase().includes('lead')) {
                questions.push({
                    text: `As a ${jobInfo.title}, you'll be leading a team. Can you describe a time when you had to manage a difficult team member or resolve a conflict?`,
                    category: 'Leadership',
                    difficulty: 'Medium'
                });
            }
            
            if (jobInfo.title.toLowerCase().includes('analyst') || jobInfo.title.toLowerCase().includes('data')) {
                questions.push({
                    text: `This ${jobInfo.title} role involves data analysis. Can you describe a project where you had to analyze complex data and present insights to stakeholders?`,
                    category: 'Analytical',
                    difficulty: 'Medium'
                });
            }
            
            // Company-specific questions
            if (jobInfo.company) {
                questions.push({
                    text: `What interests you most about working at ${jobInfo.company} and how do you see yourself contributing to our mission?`,
                    category: 'Company Fit',
                    difficulty: 'Easy'
                });
            }
            
            // Skills-based questions
            if (jobInfo.skills.length > 0) {
                const primarySkill = jobInfo.skills[0];
                questions.push({
                    text: `I notice ${primarySkill} is mentioned in our requirements. Can you tell me about your experience with this technology and a specific project where you used it?`,
                    category: 'Technical',
                    difficulty: 'Medium'
                });
            }
            
            // Requirements-based questions
            if (jobInfo.requirements.length > 0) {
                const keyRequirement = jobInfo.requirements[0];
                questions.push({
                    text: `One of our key requirements is: "${keyRequirement}". How do you meet this requirement, and can you provide a specific example?`,
                    category: 'Requirements',
                    difficulty: 'Medium'
                });
            }
            
            // Experience level questions
            if (jobInfo.experience) {
                questions.push({
                    text: `Our job description mentions ${jobInfo.experience}. How does your background align with this experience requirement?`,
                    category: 'Experience',
                    difficulty: 'Easy'
                });
            }
            
            // Behavioral questions based on responsibilities
            if (jobInfo.responsibilities.length > 0) {
                const responsibility = jobInfo.responsibilities[0];
                questions.push({
                    text: `One of your key responsibilities will be: "${responsibility}". Can you describe a similar situation you've handled in the past?`,
                    category: 'Behavioral',
                    difficulty: 'Medium'
                });
            }
            
            // Add some standard questions to fill up to the requested count
            const standardQuestions = [
                {
                    text: "Tell me about yourself and why you're interested in this role.",
                    category: 'General',
                    difficulty: 'Easy'
                },
                {
                    text: "What are your greatest strengths and how do they apply to this position?",
                    category: 'General',
                    difficulty: 'Easy'
                },
                {
                    text: "Describe a challenging project you worked on and how you overcame obstacles.",
                    category: 'Behavioral',
                    difficulty: 'Medium'
                },
                {
                    text: "Where do you see yourself in 5 years?",
                    category: 'Career Goals',
                    difficulty: 'Easy'
                },
                {
                    text: "Do you have any questions for us about the role or company?",
                    category: 'General',
                    difficulty: 'Easy'
                }
            ];
            
            // Combine tailored and standard questions, then limit to requested count
            const allQuestions = [...questions, ...standardQuestions];
            const finalQuestions = allQuestions.slice(0, questionCount);
            
            console.log('ðŸ“‹ Final questions generated:', finalQuestions);
            console.log('Total questions:', finalQuestions.length);
            
            return finalQuestions;
        }

        // Extract text from PDF for job description processing
        function extractTextFromPDF(arrayBuffer) {
            // For now, return a placeholder - in a real implementation, you'd use PDF.js
            // This is a simplified version for demonstration
            return "PDF content extraction would be implemented here. For now, please use a text file or copy-paste the job description.";
        }

        // Job Description Upload Functions
        function handleJDUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const fileInfo = document.getElementById('jdFileInfo');
                const fileName = fileInfo.querySelector('.file-name');
                
                fileName.textContent = file.name;
                fileInfo.style.display = 'flex';
                
                console.log('ðŸ“‹ Job Description uploaded:', file.name);
            }
        }

        // Remove job description file
        function removeJD() {
            document.getElementById('jdFile').value = '';
            document.getElementById('jdFileInfo').style.display = 'none';
            console.log('ðŸ“‹ Job Description removed');
        }

        // Process job description for tailored questions
        function processJobDescription(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const content = e.target.result;
                console.log('ðŸ“‹ Processing JD content for tailored questions');
                // Here you would send the JD content to your AI service
                // to generate role-specific interview questions
                generateTailoredQuestions(content);
            };
            reader.readAsText(file);
        }

        // Generate tailored questions based on job description
        function generateTailoredQuestions(jdContent) {
            console.log('ðŸŽ¯ Generating tailored questions based on JD');
            // This would integrate with your AI service to generate
            // role-specific questions based on the job description
            // For now, we'll log the content length
            console.log('ðŸ“„ JD Content length:', jdContent.length, 'characters');
        }

        function startVideoInterview() {
            // Ensure questions are available for video mode
            if (!interviewQuestions || interviewQuestions.length === 0) {
                console.log('No questions available for video interview, creating test questions');
                interviewQuestions = [
                    {
                        text: "Tell me about yourself and why you're interested in this role.",
                        category: 'General',
                        difficulty: 'Easy'
                    },
                    {
                        text: "What are your greatest strengths and how do they apply to this position?",
                        category: 'General',
                        difficulty: 'Easy'
                    },
                    {
                        text: "Describe a challenging project you worked on and how you overcame obstacles.",
                        category: 'Behavioral',
                        difficulty: 'Medium'
                    }
                ];
                currentQuestion = 0;
            }
            
            // Request camera access
            navigator.mediaDevices.getUserMedia({ video: true, audio: true })
                .then(stream => {
                    videoStream = stream;
                    const video = document.getElementById('userVideo');
                    video.srcObject = stream;
                    
                    // Show video session
                    document.getElementById('videoInterviewSession').style.display = 'block';
                    document.getElementById('interviewResults').style.display = 'none';
                    
                    // Start AI analysis
                    startAIAnalysis();
                    
                    // Display first question
                    displayVideoQuestion();
                })
                .catch(err => {
                    console.error('Error accessing camera:', err);
                    alert('Unable to access camera. Please check permissions and try again.');
                    // Fallback to text mode
                    isVideoMode = false;
                    startTextInterview();
                });
        }

        function startTextInterview() {
            // Show text interview session
            document.getElementById('interviewSession').style.display = 'block';
            document.getElementById('interviewResults').style.display = 'none';
            
            // Debug: Log the questions array before displaying
            console.log('Starting text interview with questions:', interviewQuestions);
            console.log('First question:', interviewQuestions[0]);
            
            // Force a test question if no questions are available
            if (!interviewQuestions || interviewQuestions.length === 0) {
                console.log('No questions available, creating test question');
                interviewQuestions = [{
                    text: "Tell me about yourself and why you're interested in this role.",
                    category: 'General',
                    difficulty: 'Easy'
                }];
                currentQuestion = 0;
            }
            
            displayQuestion();
        }

        function startAIAnalysis() {
            // Simulate real-time AI analysis
            analysisInterval = setInterval(() => {
                updateAIMetrics();
                updateRealTimeFeedback();
            }, 2000);
        }

        function updateAIMetrics() {
            // Simulate real-time metric updates
            const metrics = {
                eyeContact: Math.floor(Math.random() * 30) + 70, // 70-100%
                facialExpression: Math.floor(Math.random() * 20) + 80, // 80-100%
                confidence: Math.floor(Math.random() * 25) + 75, // 75-100%
                speechClarity: Math.floor(Math.random() * 20) + 80 // 80-100%
            };
            
            // Update metric bars
            document.getElementById('eyeContactBar').style.width = metrics.eyeContact + '%';
            document.getElementById('facialExpressionBar').style.width = metrics.facialExpression + '%';
            document.getElementById('confidenceBar').style.width = metrics.confidence + '%';
            document.getElementById('speechClarityBar').style.width = metrics.speechClarity + '%';
            
            // Update metric values
            document.getElementById('eyeContactValue').textContent = metrics.eyeContact + '%';
            document.getElementById('facialExpressionValue').textContent = getExpressionLabel(metrics.facialExpression);
            document.getElementById('confidenceValue').textContent = getConfidenceLabel(metrics.confidence);
            document.getElementById('speechClarityValue').textContent = getClarityLabel(metrics.speechClarity);
        }

        function getExpressionLabel(value) {
            if (value >= 95) return 'Excellent';
            if (value >= 85) return 'Good';
            if (value >= 75) return 'Fair';
            return 'Needs Improvement';
        }

        function getConfidenceLabel(value) {
            if (value >= 90) return 'Very High';
            if (value >= 80) return 'High';
            if (value >= 70) return 'Moderate';
            return 'Low';
        }

        function getClarityLabel(value) {
            if (value >= 90) return 'Very Clear';
            if (value >= 80) return 'Clear';
            if (value >= 70) return 'Fair';
            return 'Unclear';
        }

        function updateRealTimeFeedback() {
            const feedbackMessages = [
                "Great eye contact! Maintain this throughout your answer.",
                "Your facial expressions are engaging. Keep it up!",
                "Try to vary your hand gestures for more impact.",
                "Excellent posture! You look confident and professional.",
                "Consider pausing briefly between key points.",
                "Your energy level is perfect for this response.",
                "Great use of vocal variety in your delivery."
            ];
            
            const randomFeedback = feedbackMessages[Math.floor(Math.random() * feedbackMessages.length)];
            document.getElementById('feedbackMessage').textContent = randomFeedback;
        }

        function displayVideoQuestion() {
            if (currentQuestion >= interviewQuestions.length) {
                endVideoInterview();
                return;
            }
            
            document.getElementById('videoQuestionNumber').textContent = currentQuestion + 1;
            
            // Fix the video question display to show actual text instead of [object Object]
            const question = interviewQuestions[currentQuestion];
            let questionText = '';
            
            if (typeof question === 'string') {
                questionText = question;
            } else if (question && typeof question === 'object') {
                questionText = question.text || question.question || 'No question text available';
            } else {
                questionText = 'Question not available';
            }
            
            console.log('Video question display - question:', question, 'text:', questionText);
            document.getElementById('videoQuestionText').textContent = questionText;
        }

        function nextVideoQuestion() {
            currentQuestion++;
            if (currentQuestion >= interviewQuestions.length) {
                endVideoInterview();
            } else {
                displayVideoQuestion();
            }
        }

        function pauseVideo() {
            const video = document.getElementById('userVideo');
            const pauseBtn = document.getElementById('pauseBtn');
            
            if (video.paused) {
                video.play();
                pauseBtn.innerHTML = `
                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    Pause
                `;
            } else {
                video.pause();
                pauseBtn.innerHTML = `
                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3l14 9-14 9V3z"></path>
                    </svg>
                    Resume
                `;
            }
        }

        function endVideoInterview() {
            // Stop video stream
            if (videoStream) {
                videoStream.getTracks().forEach(track => track.stop());
                videoStream = null;
            }
            
            // Stop AI analysis
            if (analysisInterval) {
                clearInterval(analysisInterval);
                analysisInterval = null;
            }
            
            // Hide video session
            document.getElementById('videoInterviewSession').style.display = 'none';
            
            // Show results with video analysis
            showVideoInterviewResults();
        }

        function showVideoInterviewResults() {
            document.getElementById('interviewResults').style.display = 'block';
            document.getElementById('videoAnalysisResults').style.display = 'block';
            
            // Generate comprehensive results
            const resultsSummary = document.getElementById('resultsSummary');
            resultsSummary.innerHTML = `
                <div class="results-content">
                    <h4>Video Interview Summary</h4>
                    <p>You completed ${interviewQuestions.length} questions in video mode with real-time AI analysis.</p>
                    
                    <h5>Performance Highlights:</h5>
                    <ul>
                        <li>Maintained excellent eye contact throughout the interview</li>
                        <li>Demonstrated confident body language and posture</li>
                        <li>Used appropriate facial expressions and hand gestures</li>
                        <li>Spoke clearly with good pacing and vocal variety</li>
                    </ul>
                </div>
            `;
        }


        function displayQuestion() {
            if (currentQuestion >= interviewQuestions.length) {
                showInterviewResults();
                return;
            }
            
            const question = interviewQuestions[currentQuestion];
            document.getElementById('questionNumber').textContent = currentQuestion + 1;
            document.getElementById('totalQuestions').textContent = interviewQuestions.length;
            
            // Ensure question is properly structured
            let questionText, questionCategory, questionDifficulty;
            
            console.log('Processing question:', question, 'Type:', typeof question);
            
            if (typeof question === 'string') {
                // Handle string questions (fallback)
                questionText = question;
                questionCategory = 'General';
                questionDifficulty = 'Medium';
                console.log('Using string question:', questionText);
            } else if (question && typeof question === 'object') {
                // Handle object questions (preferred)
                questionText = question.text || question.question || 'No question text available';
                questionCategory = question.category || 'General';
                questionDifficulty = question.difficulty || 'Medium';
                console.log('Using object question - text:', questionText, 'category:', questionCategory, 'difficulty:', questionDifficulty);
            } else {
                // Fallback for any other format
                questionText = 'Question not available';
                questionCategory = 'General';
                questionDifficulty = 'Medium';
                console.log('Using fallback question:', questionText);
            }
            
            // Ensure questionText is a string
            if (typeof questionText !== 'string') {
                console.error('Question text is not a string:', questionText);
                questionText = 'Question format error - please try again';
            }
            
            // Display question with category and difficulty
            const questionElement = document.getElementById('questionText');
            
            if (!questionElement) {
                console.error('Question element not found!');
                return;
            }
            
            console.log('Question element found:', questionElement);
            console.log('Setting question text to:', questionText);
            
            // Simple test first - just set the text directly
            questionElement.innerHTML = `
                <div class="question-content">
                    <div class="question-meta">
                        <span class="question-category">${questionCategory}</span>
                        <span class="question-difficulty">${questionDifficulty}</span>
                    </div>
                    <div class="question-text">${questionText}</div>
                </div>
            `;
            
            // Verify the content was set
            console.log('Question element innerHTML after setting:', questionElement.innerHTML);
            console.log('Question element text content:', questionElement.textContent);
            
            document.getElementById('answerInput').value = '';
            
            // Show progress
            const progress = ((currentQuestion + 1) / interviewQuestions.length) * 100;
            const progressBar = document.querySelector('.progress-bar');
            if (progressBar) {
                progressBar.style.width = `${progress}%`;
            }
            
            // Debug logging
            console.log('Displaying question:', {
                currentQuestion,
                totalQuestions: interviewQuestions.length,
                question: question,
                questionText: questionText,
                category: questionCategory,
                difficulty: questionDifficulty
            });
        }

        function submitAnswer() {
            const answer = document.getElementById('answerInput').value.trim();
            if (!answer) return;
            
            userAnswers.push({
                question: interviewQuestions[currentQuestion],
                answer: answer
            });
            
            currentQuestion++;
            displayQuestion();
        }

        function skipQuestion() {
            userAnswers.push({
                question: interviewQuestions[currentQuestion],
                answer: 'Skipped'
            });
            
            currentQuestion++;
            displayQuestion();
        }

        function showInterviewResults() {
            document.getElementById('interviewSession').style.display = 'none';
            document.getElementById('interviewResults').style.display = 'block';
            
            // Generate real, personalized feedback based on job description and answers
            const feedback = generateRealInterviewFeedback();
            
            const resultsSummary = document.getElementById('resultsSummary');
            resultsSummary.innerHTML = feedback;
        }

        // Generate real, personalized interview feedback
        function generateRealInterviewFeedback() {
            const answeredQuestions = userAnswers.filter(a => a.answer !== 'Skipped');
            const skippedQuestions = userAnswers.filter(a => a.answer === 'Skipped');
            
            // Analyze answers for key metrics
            const analysis = analyzeAnswers(answeredQuestions);
            
            // Get job description info for personalized feedback
            const jobInfo = getJobDescriptionInfo();
            
            return `
                <div class="results-content">
                    <div class="interview-header">
                        <h4>ðŸŽ¯ Personalized Interview Analysis</h4>
                        <div class="completion-stats">
                            <span class="stat-item">âœ… ${answeredQuestions.length} Questions Answered</span>
                            <span class="stat-item">â­ï¸ ${skippedQuestions.length} Questions Skipped</span>
                            <span class="stat-item">ðŸ“Š ${Math.round((answeredQuestions.length / userAnswers.length) * 100)}% Completion Rate</span>
                        </div>
                    </div>
                    
                    ${jobInfo ? `
                    <div class="job-context">
                        <h5>ðŸ“‹ Job Context Analysis</h5>
                        <p><strong>Position:</strong> ${jobInfo.title || 'Not specified'}</p>
                        <p><strong>Company:</strong> ${jobInfo.company || 'Not specified'}</p>
                        <p><strong>Key Requirements:</strong> ${jobInfo.requirements.slice(0, 3).join(', ') || 'Not specified'}</p>
                        </div>
                    ` : ''}
                    
                    <div class="performance-analysis">
                        <h5>ðŸ“ˆ Performance Analysis</h5>
                        <div class="analysis-grid">
                            <div class="analysis-card">
                                <h6>Answer Quality</h6>
                                <div class="score-badge ${analysis.qualityScore >= 80 ? 'excellent' : analysis.qualityScore >= 60 ? 'good' : 'needs-improvement'}">
                                    ${analysis.qualityScore}/100
                                </div>
                                <p>${analysis.qualityFeedback}</p>
                            </div>
                            
                            <div class="analysis-card">
                                <h6>Relevance to Role</h6>
                                <div class="score-badge ${analysis.relevanceScore >= 80 ? 'excellent' : analysis.relevanceScore >= 60 ? 'good' : 'needs-improvement'}">
                                    ${analysis.relevanceScore}/100
                                </div>
                                <p>${analysis.relevanceFeedback}</p>
                            </div>
                            
                            <div class="analysis-card">
                                <h6>Communication Skills</h6>
                                <div class="score-badge ${analysis.communicationScore >= 80 ? 'excellent' : analysis.communicationScore >= 60 ? 'good' : 'needs-improvement'}">
                                    ${analysis.communicationScore}/100
                                </div>
                                <p>${analysis.communicationFeedback}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="detailed-feedback">
                        <h5>ðŸ’¬ Detailed Question Analysis</h5>
                        ${answeredQuestions.map((item, index) => generateQuestionFeedback(item, index)).join('')}
                    </div>
                    
                    <div class="improvement-recommendations">
                        <h5>ðŸš€ Improvement Recommendations</h5>
                        <ul>
                            ${analysis.recommendations.map(rec => `<li>${rec}</li>`).join('')}
                        </ul>
                    </div>
                    
                    <div class="strengths-highlights">
                        <h5>â­ Key Strengths Identified</h5>
                        <ul>
                            ${analysis.strengths.map(strength => `<li>${strength}</li>`).join('')}
                        </ul>
                    </div>
                </div>
            `;
        }

        // Analyze user answers to generate metrics and feedback
        function analyzeAnswers(answers) {
            let totalScore = 0;
            let qualityScore = 0;
            let relevanceScore = 0;
            let communicationScore = 0;
            
            const strengths = [];
            const recommendations = [];
            
            answers.forEach(answer => {
                const answerText = answer.answer.toLowerCase();
                const questionText = (answer.question.text || answer.question).toLowerCase();
                
                // Analyze answer length and detail
                if (answer.answer.length > 100) {
                    qualityScore += 20;
                    strengths.push('Provides detailed, comprehensive answers');
                } else if (answer.answer.length > 50) {
                    qualityScore += 15;
                } else {
                    qualityScore += 10;
                    recommendations.push('Provide more detailed answers with specific examples');
                }
                
                // Analyze relevance to job requirements
                if (questionText.includes('experience') && answerText.includes('experience')) {
                    relevanceScore += 25;
                    strengths.push('Effectively discusses relevant experience');
                }
                
                if (questionText.includes('skill') && answerText.includes('skill')) {
                    relevanceScore += 25;
                    strengths.push('Demonstrates awareness of required skills');
                }
                
                if (questionText.includes('project') && answerText.includes('project')) {
                    relevanceScore += 25;
                    strengths.push('Uses project examples effectively');
                }
                
                // Analyze communication quality
                if (answerText.includes('i') && answerText.includes('my')) {
                    communicationScore += 20; // Personal examples
                }
                
                if (answerText.includes('team') || answerText.includes('collaborat')) {
                    communicationScore += 15; // Teamwork focus
                    strengths.push('Emphasizes collaboration and teamwork');
                }
                
                if (answerText.includes('result') || answerText.includes('achieve') || answerText.includes('improve')) {
                    communicationScore += 20; // Results-oriented
                    strengths.push('Results-focused communication');
                }
            });
            
            // Calculate final scores
            const numAnswers = Math.max(answers.length, 1);
            qualityScore = Math.min(Math.round(qualityScore / numAnswers), 100);
            relevanceScore = Math.min(Math.round(relevanceScore / numAnswers), 100);
            communicationScore = Math.min(Math.round(communicationScore / numAnswers), 100);
            
            // Generate feedback based on scores
            const qualityFeedback = qualityScore >= 80 ? 
                'Excellent detail and depth in your responses' : 
                qualityScore >= 60 ? 
                'Good responses with room for more detail' : 
                'Consider providing more specific examples and details';
                
            const relevanceFeedback = relevanceScore >= 80 ? 
                'Strong alignment with job requirements' : 
                relevanceScore >= 60 ? 
                'Good relevance to the role' : 
                'Focus more on job-specific skills and experience';
                
            const communicationFeedback = communicationScore >= 80 ? 
                'Clear, professional communication style' : 
                communicationScore >= 60 ? 
                'Good communication with room for improvement' : 
                'Work on structuring responses more clearly';
            
            // Add general recommendations
            if (qualityScore < 70) {
                recommendations.push('Use the STAR method (Situation, Task, Action, Result) for behavioral questions');
            }
            
            if (relevanceScore < 70) {
                recommendations.push('Research the company and role more thoroughly before interviews');
            }
            
            if (communicationScore < 70) {
                recommendations.push('Practice structuring answers with clear beginning, middle, and end');
            }
            
            // Remove duplicate strengths
            const uniqueStrengths = [...new Set(strengths)];
            const uniqueRecommendations = [...new Set(recommendations)];
            
            return {
                qualityScore,
                relevanceScore,
                communicationScore,
                qualityFeedback,
                relevanceFeedback,
                communicationFeedback,
                strengths: uniqueStrengths.length > 0 ? uniqueStrengths : ['Completed the interview successfully'],
                recommendations: uniqueRecommendations.length > 0 ? uniqueRecommendations : ['Continue practicing interview skills']
            };
        }

        // Generate feedback for individual questions
        function generateQuestionFeedback(answerItem, index) {
            const question = answerItem.question.text || answerItem.question;
            const answer = answerItem.answer;
            
            let feedback = '';
            let score = 0;
            
            // Analyze specific answer
            if (answer.length > 100) {
                feedback = 'âœ… Comprehensive answer with good detail';
                score = 85;
            } else if (answer.length > 50) {
                feedback = 'âœ… Good answer with adequate detail';
                score = 70;
            } else {
                feedback = 'âš ï¸ Brief answer - consider adding more detail';
                score = 50;
            }
            
            return `
                <div class="question-feedback">
                    <div class="question-header">
                        <h6>Question ${index + 1}</h6>
                        <span class="question-score">${score}/100</span>
                    </div>
                    <p class="question-text"><strong>Q:</strong> ${question}</p>
                    <p class="answer-text"><strong>Your Answer:</strong> ${answer}</p>
                    <p class="feedback-text">${feedback}</p>
                </div>
            `;
        }

        // Get job description information for context
        function getJobDescriptionInfo() {
            // This would ideally store the parsed job info from earlier
            // For now, we'll return null and handle it gracefully
            return null;
        }

        function restartInterview() {
            document.getElementById('interviewSetup').style.display = 'block';
            document.getElementById('interviewSession').style.display = 'none';
            document.getElementById('videoInterviewSession').style.display = 'none';
            document.getElementById('interviewResults').style.display = 'none';
            document.getElementById('videoAnalysisResults').style.display = 'none';
            currentQuestion = 0;
            userAnswers = [];
            isVideoMode = false;
            
            // Stop any ongoing video/analysis
            if (videoStream) {
                videoStream.getTracks().forEach(track => track.stop());
                videoStream = null;
            }
            if (analysisInterval) {
                clearInterval(analysisInterval);
                analysisInterval = null;
            }
        }

        function downloadResults() {
            // Create a comprehensive report
            const report = generateInterviewReport();
            const blob = new Blob([report], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'interview-results.txt';
            a.click();
            URL.revokeObjectURL(url);
        }

        function shareResults() {
            // Generate shareable summary
            const summary = generateShareableSummary();
            if (navigator.share) {
                navigator.share({
                    title: 'My Interview Results',
                    text: summary,
                    url: window.location.href
                });
            } else {
                // Fallback to clipboard
                navigator.clipboard.writeText(summary).then(() => {
                    alert('Results copied to clipboard!');
                });
            }
        }

        function generateInterviewReport() {
            const mode = isVideoMode ? 'Video Interview' : 'Text Interview';
            const score = isVideoMode ? '87/100' : 'Based on written responses';
            
            let report = `INTERVIEW PRACTICE REPORT\n`;
            report += `========================\n\n`;
            report += `Mode: ${mode}\n`;
            report += `Role Type: ${document.getElementById('roleType').value}\n`;
            report += `Experience Level: ${document.getElementById('experienceLevel').value}\n`;
            report += `Industry: ${document.getElementById('industry').value}\n`;
            report += `Questions Completed: ${interviewQuestions.length}\n`;
            report += `Overall Score: ${score}\n\n`;
            
            if (isVideoMode) {
                report += `VIDEO PERFORMANCE METRICS:\n`;
                report += `- Eye Contact: 92%\n`;
                report += `- Body Language: 85%\n`;
                report += `- Speech Quality: 88%\n`;
                report += `- Overall Performance: Excellent\n\n`;
            }
            
            report += `QUESTIONS AND RESPONSES:\n`;
            userAnswers.forEach((item, index) => {
                report += `${index + 1}. ${item.question}\n`;
                report += `   Answer: ${item.answer}\n\n`;
            });
            
            report += `RECOMMENDATIONS:\n`;
            report += `- Continue practicing with video interviews for confidence building\n`;
            report += `- Focus on maintaining consistent eye contact\n`;
            report += `- Practice varying facial expressions and hand gestures\n`;
            report += `- Work on pacing and vocal variety in responses\n`;
            
            return report;
        }

        function generateShareableSummary() {
            const mode = isVideoMode ? 'Video Interview' : 'Text Interview';
            const score = isVideoMode ? '87/100' : 'Completed successfully';
            
            return `Just completed my ${mode} practice session with AI Career Coach! ðŸŽ¯\n\n` +
                   `Role: ${document.getElementById('roleType').value}\n` +
                   `Questions: ${interviewQuestions.length}\n` +
                   `Score: ${score}\n\n` +
                   `The AI analysis was incredibly helpful for improving my interview skills! ðŸ’ª`;
        }

        // Career Development functionality
        function generateCareerPlan() {
            console.log('ðŸŽ¯ Generating career plan...');
            
            const currentRole = document.getElementById('cpCurrentRole').value.trim();
            const targetRole = document.getElementById('cpTargetRole').value.trim();
            const yearsExperience = document.getElementById('cpYearsExperience').value.trim();
            const careerGoals = document.getElementById('cpCareerGoals').value.trim();
            
            console.log('ðŸ“‹ Input values:', { currentRole, targetRole, yearsExperience, careerGoals });
            
            if (!currentRole || !targetRole || !yearsExperience || !careerGoals) {
                alert('Please fill in all fields to generate your career plan.');
                return;
            }
            
            // Show loading state
            const generateBtn = document.querySelector('.generate-plan-btn');
            const originalText = generateBtn.textContent;
            generateBtn.textContent = 'Generating Career Plan...';
            generateBtn.disabled = true;
            
            // Simulate plan generation (replace with actual API call)
            setTimeout(() => {
                try {
                const careerPlan = document.getElementById('careerPlan');
                const planContent = document.getElementById('planContent');
                    
                    if (!careerPlan || !planContent) {
                        throw new Error('Career plan elements not found');
                    }
                    
                    console.log('ðŸ“ Generating career plan content...');
                
                planContent.innerHTML = `
                    <h4>Career Transition Plan: ${currentRole} â†’ ${targetRole}</h4>
                    
                    <h5>Current Situation:</h5>
                    <p>You currently work as a <strong>${currentRole}</strong> with <strong>${yearsExperience} years</strong> of experience.</p>
                    
                    <h5>Career Goals:</h5>
                    <p>${careerGoals}</p>
                    
                    <h5>90-Day Action Plan:</h5>
                    
                    <h6>Month 1: Assessment & Foundation</h6>
                    <ul>
                        <li>Conduct a comprehensive skills gap analysis</li>
                        <li>Research industry requirements for ${targetRole}</li>
                        <li>Identify 3-5 key skills to develop</li>
                        <li>Set up learning resources and courses</li>
                    </ul>
                    
                    <h6>Month 2: Skill Development</h6>
                    <ul>
                        <li>Complete 2-3 relevant online courses</li>
                        <li>Work on a portfolio project</li>
                        <li>Network with professionals in target role</li>
                        <li>Practice new skills through side projects</li>
                    </ul>
                    
                    <h6>Month 3: Application & Networking</h6>
                    <ul>
                        <li>Update resume with new skills and projects</li>
                        <li>Apply to 10-15 relevant positions</li>
                        <li>Schedule informational interviews</li>
                        <li>Join professional associations</li>
                    </ul>
                    
                    <h5>Key Success Metrics:</h5>
                    <ul>
                        <li>Complete 3+ relevant courses/certifications</li>
                        <li>Build 2-3 portfolio projects</li>
                        <li>Network with 10+ professionals</li>
                        <li>Apply to 20+ positions</li>
                    </ul>
                `;
                
                careerPlan.style.display = 'block';
                console.log('âœ… Career plan generated successfully');
                
                } catch (error) {
                    console.error('âŒ Error generating career plan:', error);
                    alert('Error generating career plan. Please try again.');
                } finally {
                    // Reset button state
                    generateBtn.textContent = originalText;
                generateBtn.disabled = false;
                }
            }, 3000);
        }

        function downloadPlan() {
            alert('Career plan download functionality would be implemented here');
        }

        function editPlan() {
            alert('Career plan editing functionality would be implemented here');
        }

        // Cover Letter Functions
        function selectCLTone(tone) {
            // Remove active class from all tone buttons
            document.querySelectorAll('.tone-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Add active class to selected button
            event.target.closest('.tone-btn').classList.add('active');
        }

        function selectCustomization(level) {
            // Remove active class from all customization buttons
            document.querySelectorAll('.customization-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Add active class to selected button
            event.target.classList.add('active');
        }

        function analyzeCLJD() {
            const jd = document.getElementById('clJobDescription').value;
            if (!jd.trim()) {
                alert('Please enter a job description first.');
                return;
            }
            
            // Simulate JD analysis
            const analyzeBtn = event.target;
            const originalText = analyzeBtn.innerHTML;
            analyzeBtn.innerHTML = '<svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> Analyzing...';
            analyzeBtn.disabled = true;
            
            setTimeout(() => {
                analyzeBtn.innerHTML = originalText;
                analyzeBtn.disabled = false;
                alert('Job description analyzed! Keywords and requirements extracted successfully.');
            }, 2000);
        }

        function clearCLJD() {
            document.getElementById('clJobDescription').value = '';
        }



        function copyCoverLetter() {
            const coverLetterText = document.getElementById('coverLetterPreview').innerText;
            navigator.clipboard.writeText(coverLetterText).then(() => {
                alert('Cover letter copied to clipboard!');
            }).catch(() => {
                alert('Failed to copy to clipboard. Please select and copy manually.');
            });
        }

        function editCoverLetter() {
            alert('Cover letter editing functionality would be implemented here');
        }

        // Cover Letter Step Navigation
        function nextCoverLetterStep() {
            const currentStep = document.querySelector('.cover-letter-step.active');
            const nextStep = currentStep.nextElementSibling;
            
            if (nextStep && nextStep.classList.contains('cover-letter-step')) {
                currentStep.classList.remove('active');
                nextStep.classList.add('active');
                
                // Update step indicator
                const stepNumber = nextStep.querySelector('.step-number');
                if (stepNumber) {
                    document.getElementById('currentStepNumber').textContent = stepNumber.textContent;
                    document.getElementById('currentStepTitle').textContent = nextStep.querySelector('.step-title').textContent;
                }
            }
        }

        function previousCoverLetterStep() {
            const currentStep = document.querySelector('.cover-letter-step.active');
            const prevStep = currentStep.previousElementSibling;
            
            if (prevStep && prevStep.classList.contains('cover-letter-step')) {
                currentStep.classList.remove('active');
                prevStep.classList.add('active');
                
                // Update step indicator
                const stepNumber = prevStep.querySelector('.step-number');
                if (stepNumber) {
                    document.getElementById('currentStepNumber').textContent = stepNumber.textContent;
                    document.getElementById('currentStepTitle').textContent = prevStep.querySelector('.step-title').textContent;
                }
            }
        }

        // Resume Generation Step Navigation
        function nextResumeGenStep() {
            const currentStep = document.querySelector('.generation-step.active');
            const currentStepId = currentStep ? currentStep.id : 'not found';
            
            // Validate current step before proceeding
            if (!validateCurrentStep(currentStepId)) {
                return;
            }
            
            const nextStep = currentStep.nextElementSibling;
            
            if (nextStep && nextStep.classList.contains('generation-step')) {
                currentStep.classList.remove('active');
                nextStep.classList.add('active');
                
                // Update step indicator
                const stepNumber = nextStep.querySelector('.step-number');
                if (stepNumber) {
                    document.getElementById('currentStepNumber').textContent = stepNumber.textContent;
                    document.getElementById('currentStepTitle').textContent = nextStep.querySelector('.step-title').textContent;
                }
            }
        }

        // Validate current step before proceeding
        function validateCurrentStep(stepId) {
            switch (stepId) {
                case 'genStep1':
                    // Check if resume file is uploaded
                    const resumeFile = document.getElementById('resumeFile');
                    const fileInfo = document.getElementById('fileInfo');
                    
                    if (!resumeFile.files.length || !fileInfo.style.display || fileInfo.style.display === 'none') {
                        alert('Please upload a resume file first.');
                        return false;
                    }
                    break;
                    
                case 'genStep2':
                    // Check if target role is filled
                    const targetRole = document.getElementById('targetRole');
                    if (!targetRole || !targetRole.value.trim()) {
                        alert('Please enter a target role/position before proceeding.');
                        return false;
                    }
                    
                    // Check if target company is filled
                    const targetCompany = document.getElementById('targetCompany');
                    if (!targetCompany || !targetCompany.value.trim()) {
                        alert('Please enter a target company before proceeding.');
                        return false;
                    }
                    
                    // Check if job description is filled
                    const genJobDescription = document.getElementById('genJobDescription');
                    if (!genJobDescription || !genJobDescription.value.trim()) {
                        alert('Please enter a job description before proceeding.');
                        return false;
                    }
                    
                    // Check if job description has minimum content
                    if (genJobDescription.value.trim().split(' ').length < 10) {
                        alert('Please provide a more detailed job description (at least 10 words).');
                        return false;
                    }
                    break;
                    
                case 'genStep3':
                    // All customization options are optional, so no validation needed
                    break;
                    
                default:
                    break;
            }
            
            return true;
        }

        function previousResumeGenStep() {
            const currentStep = document.querySelector('.generation-step.active');
            const prevStep = currentStep.previousElementSibling;
            
            if (prevStep && prevStep.classList.contains('generation-step')) {
                currentStep.classList.remove('active');
                prevStep.classList.add('active');
                
                // Update step indicator
                const stepNumber = prevStep.querySelector('.step-number');
                if (stepNumber) {
                    document.getElementById('currentStepNumber').textContent = stepNumber.textContent;
                    document.getElementById('currentStepTitle').textContent = prevStep.querySelector('.step-title').textContent;
                }
            }
        }

        // Chat Functions
        let speechSynthesis = window.speechSynthesis;
        let currentUtterance = null;

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message
            addMessage(message, 'user');
            input.value = '';
            
            // Generate relevant AI response based on user question
            setTimeout(() => {
                const relevantResponse = generateRelevantResponse(message);
                addMessage(relevantResponse, 'ai');
                
                // Auto-speak the response
                speakText(relevantResponse);
            }, 1000);
        }

        function generateRelevantResponse(userMessage) {
            const message = userMessage.toLowerCase();
            
            // Resume related questions
            if (message.includes('resume') || message.includes('cv')) {
                if (message.includes('ats') || message.includes('tracking')) {
                    return "Use standard fonts (Arial, Calibri), avoid tables/images, include relevant keywords, and keep it under 2 pages.";
                } else if (message.includes('format') || message.includes('layout')) {
                    return "Use clear sections: Contact, Summary, Experience, Skills, Education. Use bullet points and consistent formatting.";
                } else if (message.includes('skill') || message.includes('competency')) {
                    return "List technical skills first, then soft skills. Include proficiency levels and relevant certifications.";
                } else {
                    return "Focus on quantifiable achievements, use action verbs, tailor to job description, and keep it concise.";
                }
            }
            
            // Interview related questions
            else if (message.includes('interview') || message.includes('question')) {
                if (message.includes('behavioral') || message.includes('star')) {
                    return "Use STAR method: Situation, Task, Action, Result. Prepare 3-5 examples for common questions.";
                } else if (message.includes('technical') || message.includes('coding')) {
                    return "Practice coding problems, review fundamentals, explain your thinking process, and ask clarifying questions.";
                } else if (message.includes('salary') || message.includes('negotiate')) {
                    return "Research market rates, provide range, focus on value, and negotiate total compensation package.";
                } else {
                    return "Research the company, prepare questions, practice responses, and follow up with thank you notes.";
                }
            }
            
            // Job search related questions
            else if (message.includes('job') || message.includes('career') || message.includes('apply')) {
                if (message.includes('network') || message.includes('connection')) {
                    return "Attend industry events, use LinkedIn, reach out to alumni, and offer value before asking for help.";
                } else if (message.includes('cover letter') || message.includes('application')) {
                    return "Customize for each role, highlight relevant experience, show company knowledge, and keep it under 1 page.";
                } else if (message.includes('skill gap') || message.includes('learning')) {
                    return "Identify required skills, take online courses, work on projects, and get certifications in your field.";
                } else {
                    return "Focus on relevant experience, tailor applications, follow up appropriately, and maintain professional online presence.";
                }
            }
            
            // General career advice
            else if (message.includes('promotion') || message.includes('advance')) {
                return "Take on challenging projects, develop leadership skills, build relationships, and document your achievements.";
            } else if (message.includes('switch') || message.includes('transition')) {
                return "Identify transferable skills, gain relevant experience, network in target industry, and consider certifications.";
            } else if (message.includes('mentor') || message.includes('guidance')) {
                return "Seek mentors in your field, join professional groups, attend workshops, and be open to feedback.";
            }
            
            // Default response for unclear questions
            else {
                return "I'd be happy to help! Could you please be more specific about your career question? For example: 'How do I improve my resume?' or 'What should I prepare for interviews?'";
            }
        }

        function addMessage(text, sender) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            
            messageDiv.innerHTML = `
                <div class="message-content">
                    <p>${text}</p>
                </div>
            `;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function startVoiceInput() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
                recognition.continuous = false;
                recognition.interimResults = false;
                
                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById('chatInput').value = transcript;
                };
                
                recognition.start();
            } else {
                alert('Voice input is not supported in your browser.');
            }
        }

        function speakText(text) {
            // Stop any current speech
            if (currentUtterance) {
                speechSynthesis.cancel();
            }
            
            // Create new utterance
            currentUtterance = new SpeechSynthesisUtterance(text);
            currentUtterance.rate = 0.9;
            currentUtterance.pitch = 1;
            currentUtterance.volume = 0.8;
            
            // Show stop button
            document.getElementById('stopSpeakBtn').style.display = 'flex';
            document.getElementById('voiceInputBtn').style.display = 'none';
            
            // Handle speech end
            currentUtterance.onend = function() {
                document.getElementById('stopSpeakBtn').style.display = 'none';
                document.getElementById('voiceInputBtn').style.display = 'flex';
                currentUtterance = null;
            };
            
            // Start speaking
            speechSynthesis.speak(currentUtterance);
        }

        function stopSpeaking() {
            if (currentUtterance) {
                speechSynthesis.cancel();
                currentUtterance = null;
            }
            
            // Hide stop button and show voice button
            document.getElementById('stopSpeakBtn').style.display = 'none';
            document.getElementById('voiceInputBtn').style.display = 'flex';
        }

                // Job Search Functions with Adzuna API
        async function searchJobs() {
            const jobTitle = document.getElementById('jobTitle').value;
            const location = document.getElementById('jobLocation').value;
            const experience = document.getElementById('experienceLevel').value;
            const salary = document.getElementById('salaryRange').value;
            
            if (!jobTitle || !location) {
                alert('Please enter job title and location.');
                return;
            }
            
            // Show loading
            const resultsDiv = document.getElementById('jobResults');
            resultsDiv.style.display = 'block';
            resultsDiv.innerHTML = '<p>Searching for real-time jobs via Adzuna API...</p>';
            
            try {
                // Use Adzuna API configuration for US jobs with correct format
                const params = new URLSearchParams({
                    app_id: ADZUNA_CONFIG.appId,
                    app_key: ADZUNA_CONFIG.appKey,
                    results_per_page: 25,
                    what: jobTitle || '',
                    where: location || '',
                    sort_by: 'date',
                    'content-type': 'application/json'
                });
                
                console.log('ðŸ” Searching Adzuna API with params:', params.toString());
                
                const response = await fetch(`${ADZUNA_CONFIG.baseUrl}?${params}`, {
                    method: 'GET',
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                    }
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('ðŸ“Š Adzuna API Response:', data);
                
                if (data.results && data.results.length > 0) {
                    // Transform Adzuna data to our format
                    const jobs = data.results.map(job => ({
                        title: job.title || 'Job Title Not Available',
                        company: job.company?.display_name || 'Company Not Available',
                        location: job.location?.display_name || 'Location Not Available',
                        salary: job.salary_min && job.salary_max ? 
                            `$${job.salary_min.toLocaleString()} - $${job.salary_max.toLocaleString()}` : 
                            job.salary_min ? `$${job.salary_min.toLocaleString()}+` :
                            job.salary_max ? `Up to $${job.salary_max.toLocaleString()}` :
                            'Salary Not Specified',
                        description: job.description || 'No description available',
                        url: job.redirect_url || '#',
                        posted: job.created ? new Date(job.created).toLocaleDateString() : 'Date not available',
                        category: job.category?.label || 'Technology'
                    }));
                    
                    console.log(`âœ… Found ${jobs.length} real-time jobs from Adzuna API`);
                    displayJobs(jobs);
                } else {
                    resultsDiv.innerHTML = '<p>No jobs found. Try different keywords or location.</p>';
                }
                
            } catch (error) {
                console.error('âŒ Error fetching jobs from Adzuna API:', error);
                resultsDiv.innerHTML = `<p>API Error: ${error.message}. Using fallback data...</p>`;
                
                // Fallback to mock data if API fails
                const mockJobs = [
                    {
                        title: 'Senior Software Engineer',
                        company: 'Tech Corp',
                        location: location || 'United States',
                        salary: '$120,000 - $150,000',
                        description: 'We are looking for a talented software engineer to join our growing team. Experience with modern web technologies required.',
                        url: '#',
                        posted: 'Today',
                        category: 'Technology'
                    },
                    {
                        title: 'Full Stack Developer',
                        company: 'Startup Inc',
                        location: location || 'United States',
                        salary: '$90,000 - $110,000',
                        description: 'Join our growing team as a full stack developer. We use React, Node.js, and AWS.',
                        url: '#',
                        posted: '2 days ago',
                        category: 'Technology'
                    },
                    {
                        title: 'Data Scientist',
                        company: 'DataFlow Inc',
                        location: location || 'United States',
                        salary: '$130,000 - $160,000',
                        description: 'Looking for a data scientist to build machine learning models and analyze large datasets.',
                        url: '#',
                        posted: '1 week ago',
                        category: 'Technology'
                    }
                ];
                
                displayJobs(mockJobs);
            }
        }

        function displayJobs(jobs) {
            const jobList = document.getElementById('jobList');
            if (!jobList) {
                console.error('Job list container not found');
                return;
            }
            
            if (!jobs || jobs.length === 0) {
                jobList.innerHTML = '<p>No jobs found. Try different search criteria.</p>';
                return;
            }
            
            jobList.innerHTML = jobs.map(job => `
                <div class="job-item">
                    <div class="job-header">
                        <h4>${job.title}</h4>
                        <span class="job-posted">Posted: ${job.posted || 'Recently'}</span>
                    </div>
                    <div class="job-details">
                        <p><strong>${job.company}</strong> - ${job.location}</p>
                        <p class="job-salary">ðŸ’° ${job.salary}</p>
                        <p class="job-description">${job.description.substring(0, 200)}${job.description.length > 200 ? '...' : ''}</p>
                    </div>
                    <div class="job-actions">
                        <button onclick="applyToJob('${job.title}', '${job.url}')" class="action-btn primary">Apply Now</button>
                        <button onclick="viewJobDetails('${job.title}')" class="action-btn">View Details</button>
                    </div>
                </div>
            `).join('');
        }

        function applyToJob(jobTitle, jobUrl) {
            if (jobUrl && jobUrl !== '#') {
                window.open(jobUrl, '_blank');
            } else {
                alert(`Application for ${jobTitle} would be submitted here.`);
            }
        }

        function viewJobDetails(jobTitle) {
            alert(`Viewing detailed information for ${jobTitle}`);
        }

        // Insights Functions
        function refreshInsights() {
            alert('Refreshing your insights...');
            // Simulate refresh
            setTimeout(() => {
                alert('Your insights have been updated!');
            }, 1000);
        }

        function setPreferences() {
            alert('Opening preferences panel...');
        }


        function downloadPlan() {
            alert('Career plan download would be implemented here.');
        }

        function editPlan() {
            alert('Career plan editing would be implemented here.');
        }

        // Industry and Analysis Functions
        let selectedIndustry = 'tech';
        let selectedDepth = 'comprehensive';

        function selectIndustry(industry) {
            selectedIndustry = industry;
            document.querySelectorAll('.industry-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update analysis button text based on industry
            const analyzeBtn = document.getElementById('analyzeBtn');
            if (analyzeBtn) {
                analyzeBtn.innerHTML = `
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                    </svg>
                    Start ${getIndustryName(industry)} Analysis
                `;
            }
        }

        function selectDepth(depth) {
            selectedDepth = depth;
            document.querySelectorAll('.depth-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }

        function getIndustryName(industry) {
            const industryNames = {
                'tech': 'Technology',
                'finance': 'Finance',
                'healthcare': 'Healthcare',
                'marketing': 'Marketing',
                'consulting': 'Consulting',
                'other': 'General'
            };
            return industryNames[industry] || 'General';
        }

        // Missing Functions to Fix Errors
        function analyzeJD() {
            const jobDescription = document.getElementById('jobDescription').value;
            if (!jobDescription.trim()) {
                alert('Please enter a job description first.');
                return;
            }
            
            // Show loading
            const analyzeBtn = event.target;
            const originalText = analyzeBtn.innerHTML;
            analyzeBtn.innerHTML = 'Analyzing...';
            analyzeBtn.disabled = true;
            
            // Simulate JD analysis
            setTimeout(() => {
                alert('Job Description Analysis Complete!\n\nKey Requirements Identified:\nâ€¢ Technical skills\nâ€¢ Experience level\nâ€¢ Responsibilities\nâ€¢ Company culture');
                analyzeBtn.innerHTML = originalText;
                analyzeBtn.disabled = false;
            }, 2000);
        }

        function clearJD() {
            document.getElementById('jobDescription').value = '';
        }

        function changeFile() {
            document.getElementById('resumeFile').value = '';
            document.getElementById('fileInfo').style.display = 'none';
            const analyzeBtn = document.getElementById('analyzeBtn');
            if (analyzeBtn) {
                analyzeBtn.disabled = true;
                analyzeBtn.textContent = 'Analyze Resume';
            }
        }

        // Settings Functions
        function changeTheme() {
            const theme = document.getElementById('themeSelect').value;
            document.body.className = `theme-${theme}`;
            localStorage.setItem('theme', theme);
            
            // Apply theme to chat interface
            if (theme === 'dark') {
                document.body.classList.add('theme-dark');
            } else {
                document.body.classList.remove('theme-dark');
            }
            
            alert(`Theme changed to ${theme} mode`);
        }

        function changeColorScheme() {
            const scheme = document.getElementById('colorScheme').value;
            document.documentElement.style.setProperty('--primary-color', getColorValue(scheme));
            localStorage.setItem('colorScheme', scheme);
            alert(`Color scheme changed to ${scheme}`);
        }

        function getColorValue(scheme) {
            const colors = {
                blue: '#2563eb',
                green: '#059669',
                purple: '#7c3aed',
                orange: '#ea580c'
            };
            return colors[scheme] || '#2563eb';
        }

        function changeFontSize() {
            const size = document.getElementById('fontSize').value;
            document.body.style.fontSize = getFontSizeValue(size);
            localStorage.setItem('fontSize', size);
            alert(`Font size changed to ${size}`);
        }

        function getFontSizeValue(size) {
            const sizes = {
                small: '14px',
                medium: '16px',
                large: '18px'
            };
            return sizes[size] || '16px';
        }

        function changePassword() {
            const newPassword = prompt('Enter new password:');
            if (newPassword) {
                const confirmPassword = prompt('Confirm new password:');
                if (newPassword === confirmPassword) {
                    alert('Password changed successfully!');
                } else {
                    alert('Passwords do not match!');
                }
            }
        }

        function exportData() {
            alert('Exporting your data...\nThis feature would download all your career data as a JSON file.');
        }

        function deleteAccount() {
            const confirm = window.confirm('Are you sure you want to delete your account? This action cannot be undone.');
            if (confirm) {
                alert('Account deletion would be processed here.');
            }
        }

        function contactSupport() {
            alert('Contact Support\n\nEmail: support@aicareercoach.com\nPhone: 1-800-AI-COACH\nLive Chat: Available 24/7');
        }

        function viewHelpCenter() {
            alert('Opening Help Center...\nThis would navigate to a comprehensive help section with FAQs and tutorials.');
        }

        function submitFeedback() {
            const feedback = prompt('Please share your feedback with us:');
            if (feedback) {
                alert('Thank you for your feedback! We appreciate your input.');
            }
        }

        function reportBug() {
            const bugDescription = prompt('Please describe the bug you encountered:');
            if (bugDescription) {
                alert('Bug report submitted successfully! Our team will investigate this issue.');
            }
        }

        function saveSettings() {
            // Save all settings to localStorage
            const settings = {
                displayName: document.getElementById('displayName').value,
                userEmail: document.getElementById('userEmail').value,
                userJobTitle: document.getElementById('userJobTitle').value,
                userIndustry: document.getElementById('userIndustry').value,
                emailNotifications: document.getElementById('emailNotifications').checked,
                browserNotifications: document.getElementById('browserNotifications').checked,
                weeklyInsights: document.getElementById('weeklyInsights').checked,
                jobAlerts: document.getElementById('jobAlerts').checked
            };
            
            localStorage.setItem('userSettings', JSON.stringify(settings));
            alert('Settings saved successfully!');
        }

        function resetSettings() {
            const confirm = window.confirm('Are you sure you want to reset all settings to default?');
            if (confirm) {
                // Reset form fields
                document.getElementById('displayName').value = '';
                document.getElementById('userEmail').value = '';
                document.getElementById('userJobTitle').value = '';
                document.getElementById('userIndustry').value = '';
                document.getElementById('emailNotifications').checked = true;
                document.getElementById('browserNotifications').checked = true;
                document.getElementById('weeklyInsights').checked = true;
                document.getElementById('jobAlerts').checked = true;
                
                // Reset theme and color scheme
                document.getElementById('themeSelect').value = 'light';
                document.getElementById('colorScheme').value = 'blue';
                document.getElementById('fontSize').value = 'medium';
                
                // Clear localStorage
                localStorage.removeItem('userSettings');
                localStorage.removeItem('theme');
                localStorage.removeItem('colorScheme');
                localStorage.removeItem('fontSize');
                
                alert('Settings reset to default successfully!');
            }
        }

        // Header Settings Dropdown
        function toggleSettingsMenu() {
            const dropdown = document.getElementById('settingsDropdown');
            dropdown.classList.toggle('show');
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const dropdown = document.getElementById('settingsDropdown');
            const settingsBtn = document.querySelector('.header-settings-btn');
            
            if (!settingsBtn.contains(event.target) && !dropdown.contains(event.target)) {
                dropdown.classList.remove('show');
            }
        });

        // Logout function
        function logout() {
            const confirm = window.confirm('Are you sure you want to logout?');
            if (confirm) {
                alert('Logging out... This would redirect to login page.');
                // Here you would typically redirect to login page or clear session
            }
        }

        // Load saved settings on page load
        function loadSavedSettings() {
            const savedSettings = localStorage.getItem('userSettings');
            if (savedSettings) {
                const settings = JSON.parse(savedSettings);
                document.getElementById('displayName').value = settings.displayName || '';
                document.getElementById('userEmail').value = settings.userEmail || '';
                document.getElementById('userJobTitle').value = settings.userJobTitle || '';
                document.getElementById('userIndustry').value = settings.userIndustry || '';
                document.getElementById('emailNotifications').checked = settings.emailNotifications !== false;
                document.getElementById('browserNotifications').checked = settings.browserNotifications !== false;
                document.getElementById('weeklyInsights').checked = settings.weeklyInsights !== false;
                document.getElementById('jobAlerts').checked = settings.jobAlerts !== false;
            }
            
            // Load theme and color scheme - Default to dark theme
            const savedTheme = localStorage.getItem('theme') || 'dark';
            const savedColorScheme = localStorage.getItem('colorScheme') || 'blue';
            const savedFontSize = localStorage.getItem('fontSize') || 'medium';
            
            document.getElementById('themeSelect').value = savedTheme;
            document.getElementById('colorScheme').value = savedColorScheme;
            document.getElementById('fontSize').value = savedFontSize;
            
            // Apply saved settings
            changeTheme();
            changeColorScheme();
            changeFontSize();
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Load saved settings
            loadSavedSettings();
            
            // Initialize job description upload functionality
            const jdFileInput = document.getElementById('jdFile');
            if (jdFileInput) {
                jdFileInput.addEventListener('change', handleJDUpload);
            }
            
            // Show floating CTA after a delay (if it exists)
            setTimeout(() => {
                const floatingCTA = document.getElementById('floatingCTA');
                if (floatingCTA) {
                    floatingCTA.classList.remove('hidden');
                }
            }, 3000);
            
            // Ensure chat input visibility
            ensureChatInputVisible();
        });

        // Ensure chat input is properly visible and positioned
        function ensureChatInputVisible() {
            const inputContainer = document.querySelector('.chat-input-container');
            const inputGroup = document.querySelector('.input-group');
            const chatInput = document.getElementById('chatInput');
            const chatActions = document.querySelector('.chat-actions');
            const voiceBtn = document.getElementById('voiceInputBtn');
            const sendBtn = document.querySelector('.send-btn');
            const chatInterface = document.querySelector('.chat-interface');
            
            if (inputContainer) {
                inputContainer.style.display = 'flex';
                inputContainer.style.visibility = 'visible';
                inputContainer.style.opacity = '1';
                inputContainer.style.position = 'relative';
                inputContainer.style.zIndex = '100';
            }
            
            if (inputGroup) {
                inputGroup.style.display = 'flex';
                inputGroup.style.visibility = 'visible';
                inputGroup.style.opacity = '1';
            }
            
            if (chatInput) {
                chatInput.style.display = 'block';
                chatInput.style.visibility = 'visible';
                chatInput.style.opacity = '1';
            }
            
            if (chatActions) {
                chatActions.style.display = 'flex';
                chatActions.style.visibility = 'visible';
                chatActions.style.opacity = '1';
            }
            
            if (voiceBtn) {
                voiceBtn.style.display = 'flex';
                voiceBtn.style.visibility = 'visible';
                voiceBtn.style.opacity = '1';
            }
            
            if (sendBtn) {
                sendBtn.style.display = 'flex';
                sendBtn.style.visibility = 'visible';
                sendBtn.style.opacity = '1';
            }
            
            // Ensure chat interface has proper layout
            if (chatInterface) {
                chatInterface.style.overflow = 'hidden';
                chatInterface.style.height = '350px';
                chatInterface.style.minHeight = '350px';
                chatInterface.style.display = 'flex';
                chatInterface.style.flexDirection = 'column';
            }
            
            console.log('Chat input elements properly positioned and visible');
        }

        // Analyze and extract keywords from job description
        function analyzeGenJD() {
            const jobDescription = document.getElementById('genJobDescription');
            if (!jobDescription || !jobDescription.value.trim()) {
                alert('Please enter a job description first.');
                return;
            }
            
            // Extract keywords and analyze the JD
            const jdText = jobDescription.value.trim();
            const keywords = extractKeywords(jdText);
            
            // Display the analysis
            const analysisResult = `
                <div class="jd-analysis">
                    <h4>ðŸ“Š Job Description Analysis</h4>
                    <div class="analysis-content">
                        <p><strong>Key Skills Found:</strong></p>
                        <ul>${keywords.map(keyword => `<li>${keyword}</li>`).join('')}</ul>
                        <p><strong>Word Count:</strong> ${jdText.split(' ').length}</p>
                        <p><strong>Analysis Complete!</strong> You can now proceed to the next step.</p>
                    </div>
                </div>
            `;
            
            // Show the analysis
            const jdContainer = jobDescription.closest('.jd-input-section');
            if (jdContainer) {
                const existingAnalysis = jdContainer.querySelector('.jd-analysis');
                if (existingAnalysis) {
                    existingAnalysis.remove();
                }
                jdContainer.insertAdjacentHTML('beforeend', analysisResult);
            }
            
            console.log('Job description analyzed successfully');
        }

        // Extract keywords from text
        function extractKeywords(text) {
            const commonSkills = [
                'JavaScript', 'Python', 'Java', 'React', 'Node.js', 'SQL', 'AWS', 'Azure',
                'Project Management', 'Leadership', 'Communication', 'Analytics', 'Data Analysis',
                'Machine Learning', 'AI', 'DevOps', 'Agile', 'Scrum', 'Customer Service',
                'Sales', 'Marketing', 'Design', 'UX/UI', 'Testing', 'Quality Assurance'
            ];
            
            const words = text.toLowerCase().split(/\s+/);
            const foundKeywords = [];
            
            commonSkills.forEach(skill => {
                if (text.toLowerCase().includes(skill.toLowerCase())) {
                    foundKeywords.push(skill);
                }
            });
            
            // Add some common words if no specific skills found
            if (foundKeywords.length === 0) {
                foundKeywords.push('Communication', 'Teamwork', 'Problem Solving', 'Leadership');
            }
            
            return foundKeywords;
        }

        // Clear job description
        function clearGenJD() {
            const jobDescription = document.getElementById('genJobDescription');
            if (jobDescription) {
                jobDescription.value = '';
            }
            
            // Remove any existing analysis
            const jdContainer = document.querySelector('.jd-input-section');
            if (jdContainer) {
                const existingAnalysis = jdContainer.querySelector('.jd-analysis');
                if (existingAnalysis) {
                    existingAnalysis.remove();
                }
            }
            
            console.log('Job description cleared');
        }
    </script>
</body>
</html>
